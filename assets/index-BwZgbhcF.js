function dv(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function hv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var cf={exports:{}},jo={},df={exports:{}},U={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qi=Symbol.for("react.element"),fv=Symbol.for("react.portal"),pv=Symbol.for("react.fragment"),mv=Symbol.for("react.strict_mode"),gv=Symbol.for("react.profiler"),vv=Symbol.for("react.provider"),yv=Symbol.for("react.context"),_v=Symbol.for("react.forward_ref"),xv=Symbol.for("react.suspense"),wv=Symbol.for("react.memo"),Cv=Symbol.for("react.lazy"),Xc=Symbol.iterator;function Ev(t){return t===null||typeof t!="object"?null:(t=Xc&&t[Xc]||t["@@iterator"],typeof t=="function"?t:null)}var hf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ff=Object.assign,pf={};function Ir(t,e,n){this.props=t,this.context=e,this.refs=pf,this.updater=n||hf}Ir.prototype.isReactComponent={};Ir.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ir.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function mf(){}mf.prototype=Ir.prototype;function pu(t,e,n){this.props=t,this.context=e,this.refs=pf,this.updater=n||hf}var mu=pu.prototype=new mf;mu.constructor=pu;ff(mu,Ir.prototype);mu.isPureReactComponent=!0;var Jc=Array.isArray,gf=Object.prototype.hasOwnProperty,gu={current:null},vf={key:!0,ref:!0,__self:!0,__source:!0};function yf(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)gf.call(e,r)&&!vf.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Qi,type:t,key:s,ref:o,props:i,_owner:gu.current}}function Sv(t,e){return{$$typeof:Qi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function vu(t){return typeof t=="object"&&t!==null&&t.$$typeof===Qi}function Nv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var Zc=/\/+/g;function cl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Nv(""+t.key):e.toString(36)}function Rs(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Qi:case fv:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+cl(o,0):r,Jc(i)?(n="",t!=null&&(n=t.replace(Zc,"$&/")+"/"),Rs(i,e,n,"",function(u){return u})):i!=null&&(vu(i)&&(i=Sv(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(Zc,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Jc(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+cl(s,l);o+=Rs(s,e,n,a,i)}else if(a=Ev(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+cl(s,l++),o+=Rs(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function cs(t,e,n){if(t==null)return t;var r=[],i=0;return Rs(t,r,"","",function(s){return e.call(n,s,i++)}),r}function kv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var je={current:null},Ps={transition:null},Iv={ReactCurrentDispatcher:je,ReactCurrentBatchConfig:Ps,ReactCurrentOwner:gu};function _f(){throw Error("act(...) is not supported in production builds of React.")}U.Children={map:cs,forEach:function(t,e,n){cs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return cs(t,function(){e++}),e},toArray:function(t){return cs(t,function(e){return e})||[]},only:function(t){if(!vu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};U.Component=Ir;U.Fragment=pv;U.Profiler=gv;U.PureComponent=pu;U.StrictMode=mv;U.Suspense=xv;U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iv;U.act=_f;U.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=ff({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=gu.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)gf.call(e,a)&&!vf.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:Qi,type:t.type,key:i,ref:s,props:r,_owner:o}};U.createContext=function(t){return t={$$typeof:yv,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vv,_context:t},t.Consumer=t};U.createElement=yf;U.createFactory=function(t){var e=yf.bind(null,t);return e.type=t,e};U.createRef=function(){return{current:null}};U.forwardRef=function(t){return{$$typeof:_v,render:t}};U.isValidElement=vu;U.lazy=function(t){return{$$typeof:Cv,_payload:{_status:-1,_result:t},_init:kv}};U.memo=function(t,e){return{$$typeof:wv,type:t,compare:e===void 0?null:e}};U.startTransition=function(t){var e=Ps.transition;Ps.transition={};try{t()}finally{Ps.transition=e}};U.unstable_act=_f;U.useCallback=function(t,e){return je.current.useCallback(t,e)};U.useContext=function(t){return je.current.useContext(t)};U.useDebugValue=function(){};U.useDeferredValue=function(t){return je.current.useDeferredValue(t)};U.useEffect=function(t,e){return je.current.useEffect(t,e)};U.useId=function(){return je.current.useId()};U.useImperativeHandle=function(t,e,n){return je.current.useImperativeHandle(t,e,n)};U.useInsertionEffect=function(t,e){return je.current.useInsertionEffect(t,e)};U.useLayoutEffect=function(t,e){return je.current.useLayoutEffect(t,e)};U.useMemo=function(t,e){return je.current.useMemo(t,e)};U.useReducer=function(t,e,n){return je.current.useReducer(t,e,n)};U.useRef=function(t){return je.current.useRef(t)};U.useState=function(t){return je.current.useState(t)};U.useSyncExternalStore=function(t,e,n){return je.current.useSyncExternalStore(t,e,n)};U.useTransition=function(){return je.current.useTransition()};U.version="18.3.1";df.exports=U;var w=df.exports;const xf=hv(w),Tv=dv({__proto__:null,default:xf},[w]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rv=w,Pv=Symbol.for("react.element"),jv=Symbol.for("react.fragment"),bv=Object.prototype.hasOwnProperty,Ov=Rv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Dv={key:!0,ref:!0,__self:!0,__source:!0};function wf(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)bv.call(e,r)&&!Dv.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Pv,type:t,key:s,ref:o,props:i,_owner:Ov.current}}jo.Fragment=jv;jo.jsx=wf;jo.jsxs=wf;cf.exports=jo;var c=cf.exports,Kl={},Cf={exports:{}},Qe={},Ef={exports:{}},Sf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(T,_){var N=T.length;T.push(_);e:for(;0<N;){var D=N-1>>>1,A=T[D];if(0<i(A,_))T[D]=_,T[N]=A,N=D;else break e}}function n(T){return T.length===0?null:T[0]}function r(T){if(T.length===0)return null;var _=T[0],N=T.pop();if(N!==_){T[0]=N;e:for(var D=0,A=T.length,Oe=A>>>1;D<Oe;){var Be=2*(D+1)-1,Mr=T[Be],ae=Be+1,ve=T[ae];if(0>i(Mr,N))ae<A&&0>i(ve,Mr)?(T[D]=ve,T[ae]=N,D=ae):(T[D]=Mr,T[Be]=N,D=Be);else if(ae<A&&0>i(ve,N))T[D]=ve,T[ae]=N,D=ae;else break e}}return _}function i(T,_){var N=T.sortIndex-_.sortIndex;return N!==0?N:T.id-_.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],h=1,d=null,f=3,y=!1,g=!1,x=!1,S=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(T){for(var _=n(u);_!==null;){if(_.callback===null)r(u);else if(_.startTime<=T)r(u),_.sortIndex=_.expirationTime,e(a,_);else break;_=n(u)}}function C(T){if(x=!1,v(T),!g)if(n(a)!==null)g=!0,Ar(I);else{var _=n(u);_!==null&&Lr(C,_.startTime-T)}}function I(T,_){g=!1,x&&(x=!1,m(b),b=-1),y=!0;var N=f;try{for(v(_),d=n(a);d!==null&&(!(d.expirationTime>_)||T&&!Ue());){var D=d.callback;if(typeof D=="function"){d.callback=null,f=d.priorityLevel;var A=D(d.expirationTime<=_);_=t.unstable_now(),typeof A=="function"?d.callback=A:d===n(a)&&r(a),v(_)}else r(a);d=n(a)}if(d!==null)var Oe=!0;else{var Be=n(u);Be!==null&&Lr(C,Be.startTime-_),Oe=!1}return Oe}finally{d=null,f=N,y=!1}}var P=!1,j=null,b=-1,J=5,L=-1;function Ue(){return!(t.unstable_now()-L<J)}function gn(){if(j!==null){var T=t.unstable_now();L=T;var _=!0;try{_=j(!0,T)}finally{_?vn():(P=!1,j=null)}}else P=!1}var vn;if(typeof p=="function")vn=function(){p(gn)};else if(typeof MessageChannel<"u"){var us=new MessageChannel,ul=us.port2;us.port1.onmessage=gn,vn=function(){ul.postMessage(null)}}else vn=function(){S(gn,0)};function Ar(T){j=T,P||(P=!0,vn())}function Lr(T,_){b=S(function(){T(t.unstable_now())},_)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(T){T.callback=null},t.unstable_continueExecution=function(){g||y||(g=!0,Ar(I))},t.unstable_forceFrameRate=function(T){0>T||125<T?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<T?Math.floor(1e3/T):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(T){switch(f){case 1:case 2:case 3:var _=3;break;default:_=f}var N=f;f=_;try{return T()}finally{f=N}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(T,_){switch(T){case 1:case 2:case 3:case 4:case 5:break;default:T=3}var N=f;f=T;try{return _()}finally{f=N}},t.unstable_scheduleCallback=function(T,_,N){var D=t.unstable_now();switch(typeof N=="object"&&N!==null?(N=N.delay,N=typeof N=="number"&&0<N?D+N:D):N=D,T){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=N+A,T={id:h++,callback:_,priorityLevel:T,startTime:N,expirationTime:A,sortIndex:-1},N>D?(T.sortIndex=N,e(u,T),n(a)===null&&T===n(u)&&(x?(m(b),b=-1):x=!0,Lr(C,N-D))):(T.sortIndex=A,e(a,T),g||y||(g=!0,Ar(I))),T},t.unstable_shouldYield=Ue,t.unstable_wrapCallback=function(T){var _=f;return function(){var N=f;f=_;try{return T.apply(this,arguments)}finally{f=N}}}})(Sf);Ef.exports=Sf;var Av=Ef.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Lv=w,He=Av;function E(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Nf=new Set,pi={};function Ln(t,e){pr(t,e),pr(t+"Capture",e)}function pr(t,e){for(pi[t]=e,t=0;t<e.length;t++)Nf.add(e[t])}var It=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ql=Object.prototype.hasOwnProperty,Mv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ed={},td={};function Fv(t){return ql.call(td,t)?!0:ql.call(ed,t)?!1:Mv.test(t)?td[t]=!0:(ed[t]=!0,!1)}function zv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Uv(t,e,n,r){if(e===null||typeof e>"u"||zv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function be(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var we={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){we[t]=new be(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];we[e]=new be(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){we[t]=new be(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){we[t]=new be(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){we[t]=new be(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){we[t]=new be(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){we[t]=new be(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){we[t]=new be(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){we[t]=new be(t,5,!1,t.toLowerCase(),null,!1,!1)});var yu=/[\-:]([a-z])/g;function _u(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(yu,_u);we[e]=new be(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(yu,_u);we[e]=new be(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(yu,_u);we[e]=new be(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){we[t]=new be(t,1,!1,t.toLowerCase(),null,!1,!1)});we.xlinkHref=new be("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){we[t]=new be(t,1,!1,t.toLowerCase(),null,!0,!0)});function xu(t,e,n,r){var i=we.hasOwnProperty(e)?we[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Uv(e,n,i,r)&&(n=null),r||i===null?Fv(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Ot=Lv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ds=Symbol.for("react.element"),Qn=Symbol.for("react.portal"),Gn=Symbol.for("react.fragment"),wu=Symbol.for("react.strict_mode"),Yl=Symbol.for("react.profiler"),kf=Symbol.for("react.provider"),If=Symbol.for("react.context"),Cu=Symbol.for("react.forward_ref"),Xl=Symbol.for("react.suspense"),Jl=Symbol.for("react.suspense_list"),Eu=Symbol.for("react.memo"),Ft=Symbol.for("react.lazy"),Tf=Symbol.for("react.offscreen"),nd=Symbol.iterator;function Fr(t){return t===null||typeof t!="object"?null:(t=nd&&t[nd]||t["@@iterator"],typeof t=="function"?t:null)}var te=Object.assign,dl;function Yr(t){if(dl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);dl=e&&e[1]||""}return`
`+dl+t}var hl=!1;function fl(t,e){if(!t||hl)return"";hl=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{hl=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Yr(t):""}function Bv(t){switch(t.tag){case 5:return Yr(t.type);case 16:return Yr("Lazy");case 13:return Yr("Suspense");case 19:return Yr("SuspenseList");case 0:case 2:case 15:return t=fl(t.type,!1),t;case 11:return t=fl(t.type.render,!1),t;case 1:return t=fl(t.type,!0),t;default:return""}}function Zl(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Gn:return"Fragment";case Qn:return"Portal";case Yl:return"Profiler";case wu:return"StrictMode";case Xl:return"Suspense";case Jl:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case If:return(t.displayName||"Context")+".Consumer";case kf:return(t._context.displayName||"Context")+".Provider";case Cu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Eu:return e=t.displayName||null,e!==null?e:Zl(t.type)||"Memo";case Ft:e=t._payload,t=t._init;try{return Zl(t(e))}catch{}}return null}function Wv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zl(e);case 8:return e===wu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function on(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Rf(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $v(t){var e=Rf(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function hs(t){t._valueTracker||(t._valueTracker=$v(t))}function Pf(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Rf(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Ws(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ea(t,e){var n=e.checked;return te({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function rd(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=on(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function jf(t,e){e=e.checked,e!=null&&xu(t,"checked",e,!1)}function ta(t,e){jf(t,e);var n=on(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?na(t,e.type,n):e.hasOwnProperty("defaultValue")&&na(t,e.type,on(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function id(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function na(t,e,n){(e!=="number"||Ws(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Xr=Array.isArray;function sr(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+on(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ra(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(E(91));return te({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function sd(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(E(92));if(Xr(n)){if(1<n.length)throw Error(E(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:on(n)}}function bf(t,e){var n=on(e.value),r=on(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function od(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Of(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ia(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Of(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var fs,Df=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(fs=fs||document.createElement("div"),fs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=fs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function mi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ei={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vv=["Webkit","ms","Moz","O"];Object.keys(ei).forEach(function(t){Vv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ei[e]=ei[t]})});function Af(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ei.hasOwnProperty(t)&&ei[t]?(""+e).trim():e+"px"}function Lf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=Af(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Hv=te({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sa(t,e){if(e){if(Hv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(E(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(E(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(E(61))}if(e.style!=null&&typeof e.style!="object")throw Error(E(62))}}function oa(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var la=null;function Su(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var aa=null,or=null,lr=null;function ld(t){if(t=qi(t)){if(typeof aa!="function")throw Error(E(280));var e=t.stateNode;e&&(e=Lo(e),aa(t.stateNode,t.type,e))}}function Mf(t){or?lr?lr.push(t):lr=[t]:or=t}function Ff(){if(or){var t=or,e=lr;if(lr=or=null,ld(t),e)for(t=0;t<e.length;t++)ld(e[t])}}function zf(t,e){return t(e)}function Uf(){}var pl=!1;function Bf(t,e,n){if(pl)return t(e,n);pl=!0;try{return zf(t,e,n)}finally{pl=!1,(or!==null||lr!==null)&&(Uf(),Ff())}}function gi(t,e){var n=t.stateNode;if(n===null)return null;var r=Lo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(E(231,e,typeof n));return n}var ua=!1;if(It)try{var zr={};Object.defineProperty(zr,"passive",{get:function(){ua=!0}}),window.addEventListener("test",zr,zr),window.removeEventListener("test",zr,zr)}catch{ua=!1}function Qv(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ti=!1,$s=null,Vs=!1,ca=null,Gv={onError:function(t){ti=!0,$s=t}};function Kv(t,e,n,r,i,s,o,l,a){ti=!1,$s=null,Qv.apply(Gv,arguments)}function qv(t,e,n,r,i,s,o,l,a){if(Kv.apply(this,arguments),ti){if(ti){var u=$s;ti=!1,$s=null}else throw Error(E(198));Vs||(Vs=!0,ca=u)}}function Mn(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Wf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function ad(t){if(Mn(t)!==t)throw Error(E(188))}function Yv(t){var e=t.alternate;if(!e){if(e=Mn(t),e===null)throw Error(E(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return ad(i),t;if(s===r)return ad(i),e;s=s.sibling}throw Error(E(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(E(189))}}if(n.alternate!==r)throw Error(E(190))}if(n.tag!==3)throw Error(E(188));return n.stateNode.current===n?t:e}function $f(t){return t=Yv(t),t!==null?Vf(t):null}function Vf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Vf(t);if(e!==null)return e;t=t.sibling}return null}var Hf=He.unstable_scheduleCallback,ud=He.unstable_cancelCallback,Xv=He.unstable_shouldYield,Jv=He.unstable_requestPaint,se=He.unstable_now,Zv=He.unstable_getCurrentPriorityLevel,Nu=He.unstable_ImmediatePriority,Qf=He.unstable_UserBlockingPriority,Hs=He.unstable_NormalPriority,ey=He.unstable_LowPriority,Gf=He.unstable_IdlePriority,bo=null,gt=null;function ty(t){if(gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(bo,t,void 0,(t.current.flags&128)===128)}catch{}}var ut=Math.clz32?Math.clz32:iy,ny=Math.log,ry=Math.LN2;function iy(t){return t>>>=0,t===0?32:31-(ny(t)/ry|0)|0}var ps=64,ms=4194304;function Jr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Qs(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=Jr(l):(s&=o,s!==0&&(r=Jr(s)))}else o=n&~i,o!==0?r=Jr(o):s!==0&&(r=Jr(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ut(e),i=1<<n,r|=t[n],e&=~i;return r}function sy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function oy(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ut(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=sy(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function da(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Kf(){var t=ps;return ps<<=1,!(ps&4194240)&&(ps=64),t}function ml(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Gi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ut(e),t[e]=n}function ly(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ut(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function ku(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ut(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var $=0;function qf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Yf,Iu,Xf,Jf,Zf,ha=!1,gs=[],Qt=null,Gt=null,Kt=null,vi=new Map,yi=new Map,Ut=[],ay="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function cd(t,e){switch(t){case"focusin":case"focusout":Qt=null;break;case"dragenter":case"dragleave":Gt=null;break;case"mouseover":case"mouseout":Kt=null;break;case"pointerover":case"pointerout":vi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":yi.delete(e.pointerId)}}function Ur(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=qi(e),e!==null&&Iu(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function uy(t,e,n,r,i){switch(e){case"focusin":return Qt=Ur(Qt,t,e,n,r,i),!0;case"dragenter":return Gt=Ur(Gt,t,e,n,r,i),!0;case"mouseover":return Kt=Ur(Kt,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return vi.set(s,Ur(vi.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,yi.set(s,Ur(yi.get(s)||null,t,e,n,r,i)),!0}return!1}function ep(t){var e=Cn(t.target);if(e!==null){var n=Mn(e);if(n!==null){if(e=n.tag,e===13){if(e=Wf(n),e!==null){t.blockedOn=e,Zf(t.priority,function(){Xf(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function js(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fa(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);la=r,n.target.dispatchEvent(r),la=null}else return e=qi(n),e!==null&&Iu(e),t.blockedOn=n,!1;e.shift()}return!0}function dd(t,e,n){js(t)&&n.delete(e)}function cy(){ha=!1,Qt!==null&&js(Qt)&&(Qt=null),Gt!==null&&js(Gt)&&(Gt=null),Kt!==null&&js(Kt)&&(Kt=null),vi.forEach(dd),yi.forEach(dd)}function Br(t,e){t.blockedOn===e&&(t.blockedOn=null,ha||(ha=!0,He.unstable_scheduleCallback(He.unstable_NormalPriority,cy)))}function _i(t){function e(i){return Br(i,t)}if(0<gs.length){Br(gs[0],t);for(var n=1;n<gs.length;n++){var r=gs[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Qt!==null&&Br(Qt,t),Gt!==null&&Br(Gt,t),Kt!==null&&Br(Kt,t),vi.forEach(e),yi.forEach(e),n=0;n<Ut.length;n++)r=Ut[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Ut.length&&(n=Ut[0],n.blockedOn===null);)ep(n),n.blockedOn===null&&Ut.shift()}var ar=Ot.ReactCurrentBatchConfig,Gs=!0;function dy(t,e,n,r){var i=$,s=ar.transition;ar.transition=null;try{$=1,Tu(t,e,n,r)}finally{$=i,ar.transition=s}}function hy(t,e,n,r){var i=$,s=ar.transition;ar.transition=null;try{$=4,Tu(t,e,n,r)}finally{$=i,ar.transition=s}}function Tu(t,e,n,r){if(Gs){var i=fa(t,e,n,r);if(i===null)Nl(t,e,r,Ks,n),cd(t,r);else if(uy(i,t,e,n,r))r.stopPropagation();else if(cd(t,r),e&4&&-1<ay.indexOf(t)){for(;i!==null;){var s=qi(i);if(s!==null&&Yf(s),s=fa(t,e,n,r),s===null&&Nl(t,e,r,Ks,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Nl(t,e,r,null,n)}}var Ks=null;function fa(t,e,n,r){if(Ks=null,t=Su(r),t=Cn(t),t!==null)if(e=Mn(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Wf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Ks=t,null}function tp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Zv()){case Nu:return 1;case Qf:return 4;case Hs:case ey:return 16;case Gf:return 536870912;default:return 16}default:return 16}}var Wt=null,Ru=null,bs=null;function np(){if(bs)return bs;var t,e=Ru,n=e.length,r,i="value"in Wt?Wt.value:Wt.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return bs=i.slice(t,1<r?1-r:void 0)}function Os(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function vs(){return!0}function hd(){return!1}function Ge(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?vs:hd,this.isPropagationStopped=hd,this}return te(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=vs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=vs)},persist:function(){},isPersistent:vs}),e}var Tr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pu=Ge(Tr),Ki=te({},Tr,{view:0,detail:0}),fy=Ge(Ki),gl,vl,Wr,Oo=te({},Ki,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ju,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Wr&&(Wr&&t.type==="mousemove"?(gl=t.screenX-Wr.screenX,vl=t.screenY-Wr.screenY):vl=gl=0,Wr=t),gl)},movementY:function(t){return"movementY"in t?t.movementY:vl}}),fd=Ge(Oo),py=te({},Oo,{dataTransfer:0}),my=Ge(py),gy=te({},Ki,{relatedTarget:0}),yl=Ge(gy),vy=te({},Tr,{animationName:0,elapsedTime:0,pseudoElement:0}),yy=Ge(vy),_y=te({},Tr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),xy=Ge(_y),wy=te({},Tr,{data:0}),pd=Ge(wy),Cy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ey={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Sy={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ny(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Sy[t])?!!e[t]:!1}function ju(){return Ny}var ky=te({},Ki,{key:function(t){if(t.key){var e=Cy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Os(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ey[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ju,charCode:function(t){return t.type==="keypress"?Os(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Os(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Iy=Ge(ky),Ty=te({},Oo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),md=Ge(Ty),Ry=te({},Ki,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ju}),Py=Ge(Ry),jy=te({},Tr,{propertyName:0,elapsedTime:0,pseudoElement:0}),by=Ge(jy),Oy=te({},Oo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Dy=Ge(Oy),Ay=[9,13,27,32],bu=It&&"CompositionEvent"in window,ni=null;It&&"documentMode"in document&&(ni=document.documentMode);var Ly=It&&"TextEvent"in window&&!ni,rp=It&&(!bu||ni&&8<ni&&11>=ni),gd=" ",vd=!1;function ip(t,e){switch(t){case"keyup":return Ay.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function sp(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Kn=!1;function My(t,e){switch(t){case"compositionend":return sp(e);case"keypress":return e.which!==32?null:(vd=!0,gd);case"textInput":return t=e.data,t===gd&&vd?null:t;default:return null}}function Fy(t,e){if(Kn)return t==="compositionend"||!bu&&ip(t,e)?(t=np(),bs=Ru=Wt=null,Kn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return rp&&e.locale!=="ko"?null:e.data;default:return null}}var zy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function yd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!zy[t.type]:e==="textarea"}function op(t,e,n,r){Mf(r),e=qs(e,"onChange"),0<e.length&&(n=new Pu("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ri=null,xi=null;function Uy(t){vp(t,0)}function Do(t){var e=Xn(t);if(Pf(e))return t}function By(t,e){if(t==="change")return e}var lp=!1;if(It){var _l;if(It){var xl="oninput"in document;if(!xl){var _d=document.createElement("div");_d.setAttribute("oninput","return;"),xl=typeof _d.oninput=="function"}_l=xl}else _l=!1;lp=_l&&(!document.documentMode||9<document.documentMode)}function xd(){ri&&(ri.detachEvent("onpropertychange",ap),xi=ri=null)}function ap(t){if(t.propertyName==="value"&&Do(xi)){var e=[];op(e,xi,t,Su(t)),Bf(Uy,e)}}function Wy(t,e,n){t==="focusin"?(xd(),ri=e,xi=n,ri.attachEvent("onpropertychange",ap)):t==="focusout"&&xd()}function $y(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Do(xi)}function Vy(t,e){if(t==="click")return Do(e)}function Hy(t,e){if(t==="input"||t==="change")return Do(e)}function Qy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ht=typeof Object.is=="function"?Object.is:Qy;function wi(t,e){if(ht(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!ql.call(e,i)||!ht(t[i],e[i]))return!1}return!0}function wd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Cd(t,e){var n=wd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=wd(n)}}function up(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?up(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function cp(){for(var t=window,e=Ws();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Ws(t.document)}return e}function Ou(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Gy(t){var e=cp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&up(n.ownerDocument.documentElement,n)){if(r!==null&&Ou(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Cd(n,s);var o=Cd(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Ky=It&&"documentMode"in document&&11>=document.documentMode,qn=null,pa=null,ii=null,ma=!1;function Ed(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ma||qn==null||qn!==Ws(r)||(r=qn,"selectionStart"in r&&Ou(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ii&&wi(ii,r)||(ii=r,r=qs(pa,"onSelect"),0<r.length&&(e=new Pu("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=qn)))}function ys(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Yn={animationend:ys("Animation","AnimationEnd"),animationiteration:ys("Animation","AnimationIteration"),animationstart:ys("Animation","AnimationStart"),transitionend:ys("Transition","TransitionEnd")},wl={},dp={};It&&(dp=document.createElement("div").style,"AnimationEvent"in window||(delete Yn.animationend.animation,delete Yn.animationiteration.animation,delete Yn.animationstart.animation),"TransitionEvent"in window||delete Yn.transitionend.transition);function Ao(t){if(wl[t])return wl[t];if(!Yn[t])return t;var e=Yn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in dp)return wl[t]=e[n];return t}var hp=Ao("animationend"),fp=Ao("animationiteration"),pp=Ao("animationstart"),mp=Ao("transitionend"),gp=new Map,Sd="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function dn(t,e){gp.set(t,e),Ln(e,[t])}for(var Cl=0;Cl<Sd.length;Cl++){var El=Sd[Cl],qy=El.toLowerCase(),Yy=El[0].toUpperCase()+El.slice(1);dn(qy,"on"+Yy)}dn(hp,"onAnimationEnd");dn(fp,"onAnimationIteration");dn(pp,"onAnimationStart");dn("dblclick","onDoubleClick");dn("focusin","onFocus");dn("focusout","onBlur");dn(mp,"onTransitionEnd");pr("onMouseEnter",["mouseout","mouseover"]);pr("onMouseLeave",["mouseout","mouseover"]);pr("onPointerEnter",["pointerout","pointerover"]);pr("onPointerLeave",["pointerout","pointerover"]);Ln("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ln("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ln("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ln("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ln("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ln("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zr="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Xy=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zr));function Nd(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,qv(r,e,void 0,t),t.currentTarget=null}function vp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Nd(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Nd(i,l,u),s=a}}}if(Vs)throw t=ca,Vs=!1,ca=null,t}function q(t,e){var n=e[xa];n===void 0&&(n=e[xa]=new Set);var r=t+"__bubble";n.has(r)||(yp(e,t,2,!1),n.add(r))}function Sl(t,e,n){var r=0;e&&(r|=4),yp(n,t,r,e)}var _s="_reactListening"+Math.random().toString(36).slice(2);function Ci(t){if(!t[_s]){t[_s]=!0,Nf.forEach(function(n){n!=="selectionchange"&&(Xy.has(n)||Sl(n,!1,t),Sl(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[_s]||(e[_s]=!0,Sl("selectionchange",!1,e))}}function yp(t,e,n,r){switch(tp(e)){case 1:var i=dy;break;case 4:i=hy;break;default:i=Tu}n=i.bind(null,e,n,t),i=void 0,!ua||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Nl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Cn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Bf(function(){var u=s,h=Su(n),d=[];e:{var f=gp.get(t);if(f!==void 0){var y=Pu,g=t;switch(t){case"keypress":if(Os(n)===0)break e;case"keydown":case"keyup":y=Iy;break;case"focusin":g="focus",y=yl;break;case"focusout":g="blur",y=yl;break;case"beforeblur":case"afterblur":y=yl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=fd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=my;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=Py;break;case hp:case fp:case pp:y=yy;break;case mp:y=by;break;case"scroll":y=fy;break;case"wheel":y=Dy;break;case"copy":case"cut":case"paste":y=xy;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=md}var x=(e&4)!==0,S=!x&&t==="scroll",m=x?f!==null?f+"Capture":null:f;x=[];for(var p=u,v;p!==null;){v=p;var C=v.stateNode;if(v.tag===5&&C!==null&&(v=C,m!==null&&(C=gi(p,m),C!=null&&x.push(Ei(p,C,v)))),S)break;p=p.return}0<x.length&&(f=new y(f,g,null,n,h),d.push({event:f,listeners:x}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",f&&n!==la&&(g=n.relatedTarget||n.fromElement)&&(Cn(g)||g[Tt]))break e;if((y||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,y?(g=n.relatedTarget||n.toElement,y=u,g=g?Cn(g):null,g!==null&&(S=Mn(g),g!==S||g.tag!==5&&g.tag!==6)&&(g=null)):(y=null,g=u),y!==g)){if(x=fd,C="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(x=md,C="onPointerLeave",m="onPointerEnter",p="pointer"),S=y==null?f:Xn(y),v=g==null?f:Xn(g),f=new x(C,p+"leave",y,n,h),f.target=S,f.relatedTarget=v,C=null,Cn(h)===u&&(x=new x(m,p+"enter",g,n,h),x.target=v,x.relatedTarget=S,C=x),S=C,y&&g)t:{for(x=y,m=g,p=0,v=x;v;v=$n(v))p++;for(v=0,C=m;C;C=$n(C))v++;for(;0<p-v;)x=$n(x),p--;for(;0<v-p;)m=$n(m),v--;for(;p--;){if(x===m||m!==null&&x===m.alternate)break t;x=$n(x),m=$n(m)}x=null}else x=null;y!==null&&kd(d,f,y,x,!1),g!==null&&S!==null&&kd(d,S,g,x,!0)}}e:{if(f=u?Xn(u):window,y=f.nodeName&&f.nodeName.toLowerCase(),y==="select"||y==="input"&&f.type==="file")var I=By;else if(yd(f))if(lp)I=Hy;else{I=$y;var P=Wy}else(y=f.nodeName)&&y.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(I=Vy);if(I&&(I=I(t,u))){op(d,I,n,h);break e}P&&P(t,f,u),t==="focusout"&&(P=f._wrapperState)&&P.controlled&&f.type==="number"&&na(f,"number",f.value)}switch(P=u?Xn(u):window,t){case"focusin":(yd(P)||P.contentEditable==="true")&&(qn=P,pa=u,ii=null);break;case"focusout":ii=pa=qn=null;break;case"mousedown":ma=!0;break;case"contextmenu":case"mouseup":case"dragend":ma=!1,Ed(d,n,h);break;case"selectionchange":if(Ky)break;case"keydown":case"keyup":Ed(d,n,h)}var j;if(bu)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Kn?ip(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(rp&&n.locale!=="ko"&&(Kn||b!=="onCompositionStart"?b==="onCompositionEnd"&&Kn&&(j=np()):(Wt=h,Ru="value"in Wt?Wt.value:Wt.textContent,Kn=!0)),P=qs(u,b),0<P.length&&(b=new pd(b,t,null,n,h),d.push({event:b,listeners:P}),j?b.data=j:(j=sp(n),j!==null&&(b.data=j)))),(j=Ly?My(t,n):Fy(t,n))&&(u=qs(u,"onBeforeInput"),0<u.length&&(h=new pd("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=j))}vp(d,e)})}function Ei(t,e,n){return{instance:t,listener:e,currentTarget:n}}function qs(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=gi(t,n),s!=null&&r.unshift(Ei(t,s,i)),s=gi(t,e),s!=null&&r.push(Ei(t,s,i))),t=t.return}return r}function $n(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function kd(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=gi(n,s),a!=null&&o.unshift(Ei(n,a,l))):i||(a=gi(n,s),a!=null&&o.push(Ei(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var Jy=/\r\n?/g,Zy=/\u0000|\uFFFD/g;function Id(t){return(typeof t=="string"?t:""+t).replace(Jy,`
`).replace(Zy,"")}function xs(t,e,n){if(e=Id(e),Id(t)!==e&&n)throw Error(E(425))}function Ys(){}var ga=null,va=null;function ya(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var _a=typeof setTimeout=="function"?setTimeout:void 0,e_=typeof clearTimeout=="function"?clearTimeout:void 0,Td=typeof Promise=="function"?Promise:void 0,t_=typeof queueMicrotask=="function"?queueMicrotask:typeof Td<"u"?function(t){return Td.resolve(null).then(t).catch(n_)}:_a;function n_(t){setTimeout(function(){throw t})}function kl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),_i(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);_i(e)}function qt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Rd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Rr=Math.random().toString(36).slice(2),mt="__reactFiber$"+Rr,Si="__reactProps$"+Rr,Tt="__reactContainer$"+Rr,xa="__reactEvents$"+Rr,r_="__reactListeners$"+Rr,i_="__reactHandles$"+Rr;function Cn(t){var e=t[mt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Tt]||n[mt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Rd(t);t!==null;){if(n=t[mt])return n;t=Rd(t)}return e}t=n,n=t.parentNode}return null}function qi(t){return t=t[mt]||t[Tt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Xn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(E(33))}function Lo(t){return t[Si]||null}var wa=[],Jn=-1;function hn(t){return{current:t}}function Y(t){0>Jn||(t.current=wa[Jn],wa[Jn]=null,Jn--)}function K(t,e){Jn++,wa[Jn]=t.current,t.current=e}var ln={},ke=hn(ln),Me=hn(!1),Tn=ln;function mr(t,e){var n=t.type.contextTypes;if(!n)return ln;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Fe(t){return t=t.childContextTypes,t!=null}function Xs(){Y(Me),Y(ke)}function Pd(t,e,n){if(ke.current!==ln)throw Error(E(168));K(ke,e),K(Me,n)}function _p(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(E(108,Wv(t)||"Unknown",i));return te({},n,r)}function Js(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||ln,Tn=ke.current,K(ke,t),K(Me,Me.current),!0}function jd(t,e,n){var r=t.stateNode;if(!r)throw Error(E(169));n?(t=_p(t,e,Tn),r.__reactInternalMemoizedMergedChildContext=t,Y(Me),Y(ke),K(ke,t)):Y(Me),K(Me,n)}var xt=null,Mo=!1,Il=!1;function xp(t){xt===null?xt=[t]:xt.push(t)}function s_(t){Mo=!0,xp(t)}function fn(){if(!Il&&xt!==null){Il=!0;var t=0,e=$;try{var n=xt;for($=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}xt=null,Mo=!1}catch(i){throw xt!==null&&(xt=xt.slice(t+1)),Hf(Nu,fn),i}finally{$=e,Il=!1}}return null}var Zn=[],er=0,Zs=null,eo=0,Ke=[],qe=0,Rn=null,wt=1,Ct="";function yn(t,e){Zn[er++]=eo,Zn[er++]=Zs,Zs=t,eo=e}function wp(t,e,n){Ke[qe++]=wt,Ke[qe++]=Ct,Ke[qe++]=Rn,Rn=t;var r=wt;t=Ct;var i=32-ut(r)-1;r&=~(1<<i),n+=1;var s=32-ut(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,wt=1<<32-ut(e)+i|n<<i|r,Ct=s+t}else wt=1<<s|n<<i|r,Ct=t}function Du(t){t.return!==null&&(yn(t,1),wp(t,1,0))}function Au(t){for(;t===Zs;)Zs=Zn[--er],Zn[er]=null,eo=Zn[--er],Zn[er]=null;for(;t===Rn;)Rn=Ke[--qe],Ke[qe]=null,Ct=Ke[--qe],Ke[qe]=null,wt=Ke[--qe],Ke[qe]=null}var Ve=null,$e=null,X=!1,ot=null;function Cp(t,e){var n=Ye(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function bd(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ve=t,$e=qt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ve=t,$e=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Rn!==null?{id:wt,overflow:Ct}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ye(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ve=t,$e=null,!0):!1;default:return!1}}function Ca(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Ea(t){if(X){var e=$e;if(e){var n=e;if(!bd(t,e)){if(Ca(t))throw Error(E(418));e=qt(n.nextSibling);var r=Ve;e&&bd(t,e)?Cp(r,n):(t.flags=t.flags&-4097|2,X=!1,Ve=t)}}else{if(Ca(t))throw Error(E(418));t.flags=t.flags&-4097|2,X=!1,Ve=t}}}function Od(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ve=t}function ws(t){if(t!==Ve)return!1;if(!X)return Od(t),X=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ya(t.type,t.memoizedProps)),e&&(e=$e)){if(Ca(t))throw Ep(),Error(E(418));for(;e;)Cp(t,e),e=qt(e.nextSibling)}if(Od(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(E(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){$e=qt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}$e=null}}else $e=Ve?qt(t.stateNode.nextSibling):null;return!0}function Ep(){for(var t=$e;t;)t=qt(t.nextSibling)}function gr(){$e=Ve=null,X=!1}function Lu(t){ot===null?ot=[t]:ot.push(t)}var o_=Ot.ReactCurrentBatchConfig;function $r(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(E(309));var r=n.stateNode}if(!r)throw Error(E(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(E(284));if(!n._owner)throw Error(E(290,t))}return t}function Cs(t,e){throw t=Object.prototype.toString.call(e),Error(E(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Dd(t){var e=t._init;return e(t._payload)}function Sp(t){function e(m,p){if(t){var v=m.deletions;v===null?(m.deletions=[p],m.flags|=16):v.push(p)}}function n(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function i(m,p){return m=Zt(m,p),m.index=0,m.sibling=null,m}function s(m,p,v){return m.index=v,t?(v=m.alternate,v!==null?(v=v.index,v<p?(m.flags|=2,p):v):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,p,v,C){return p===null||p.tag!==6?(p=Dl(v,m.mode,C),p.return=m,p):(p=i(p,v),p.return=m,p)}function a(m,p,v,C){var I=v.type;return I===Gn?h(m,p,v.props.children,C,v.key):p!==null&&(p.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Ft&&Dd(I)===p.type)?(C=i(p,v.props),C.ref=$r(m,p,v),C.return=m,C):(C=Us(v.type,v.key,v.props,null,m.mode,C),C.ref=$r(m,p,v),C.return=m,C)}function u(m,p,v,C){return p===null||p.tag!==4||p.stateNode.containerInfo!==v.containerInfo||p.stateNode.implementation!==v.implementation?(p=Al(v,m.mode,C),p.return=m,p):(p=i(p,v.children||[]),p.return=m,p)}function h(m,p,v,C,I){return p===null||p.tag!==7?(p=In(v,m.mode,C,I),p.return=m,p):(p=i(p,v),p.return=m,p)}function d(m,p,v){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Dl(""+p,m.mode,v),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ds:return v=Us(p.type,p.key,p.props,null,m.mode,v),v.ref=$r(m,null,p),v.return=m,v;case Qn:return p=Al(p,m.mode,v),p.return=m,p;case Ft:var C=p._init;return d(m,C(p._payload),v)}if(Xr(p)||Fr(p))return p=In(p,m.mode,v,null),p.return=m,p;Cs(m,p)}return null}function f(m,p,v,C){var I=p!==null?p.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return I!==null?null:l(m,p,""+v,C);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case ds:return v.key===I?a(m,p,v,C):null;case Qn:return v.key===I?u(m,p,v,C):null;case Ft:return I=v._init,f(m,p,I(v._payload),C)}if(Xr(v)||Fr(v))return I!==null?null:h(m,p,v,C,null);Cs(m,v)}return null}function y(m,p,v,C,I){if(typeof C=="string"&&C!==""||typeof C=="number")return m=m.get(v)||null,l(p,m,""+C,I);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ds:return m=m.get(C.key===null?v:C.key)||null,a(p,m,C,I);case Qn:return m=m.get(C.key===null?v:C.key)||null,u(p,m,C,I);case Ft:var P=C._init;return y(m,p,v,P(C._payload),I)}if(Xr(C)||Fr(C))return m=m.get(v)||null,h(p,m,C,I,null);Cs(p,C)}return null}function g(m,p,v,C){for(var I=null,P=null,j=p,b=p=0,J=null;j!==null&&b<v.length;b++){j.index>b?(J=j,j=null):J=j.sibling;var L=f(m,j,v[b],C);if(L===null){j===null&&(j=J);break}t&&j&&L.alternate===null&&e(m,j),p=s(L,p,b),P===null?I=L:P.sibling=L,P=L,j=J}if(b===v.length)return n(m,j),X&&yn(m,b),I;if(j===null){for(;b<v.length;b++)j=d(m,v[b],C),j!==null&&(p=s(j,p,b),P===null?I=j:P.sibling=j,P=j);return X&&yn(m,b),I}for(j=r(m,j);b<v.length;b++)J=y(j,m,b,v[b],C),J!==null&&(t&&J.alternate!==null&&j.delete(J.key===null?b:J.key),p=s(J,p,b),P===null?I=J:P.sibling=J,P=J);return t&&j.forEach(function(Ue){return e(m,Ue)}),X&&yn(m,b),I}function x(m,p,v,C){var I=Fr(v);if(typeof I!="function")throw Error(E(150));if(v=I.call(v),v==null)throw Error(E(151));for(var P=I=null,j=p,b=p=0,J=null,L=v.next();j!==null&&!L.done;b++,L=v.next()){j.index>b?(J=j,j=null):J=j.sibling;var Ue=f(m,j,L.value,C);if(Ue===null){j===null&&(j=J);break}t&&j&&Ue.alternate===null&&e(m,j),p=s(Ue,p,b),P===null?I=Ue:P.sibling=Ue,P=Ue,j=J}if(L.done)return n(m,j),X&&yn(m,b),I;if(j===null){for(;!L.done;b++,L=v.next())L=d(m,L.value,C),L!==null&&(p=s(L,p,b),P===null?I=L:P.sibling=L,P=L);return X&&yn(m,b),I}for(j=r(m,j);!L.done;b++,L=v.next())L=y(j,m,b,L.value,C),L!==null&&(t&&L.alternate!==null&&j.delete(L.key===null?b:L.key),p=s(L,p,b),P===null?I=L:P.sibling=L,P=L);return t&&j.forEach(function(gn){return e(m,gn)}),X&&yn(m,b),I}function S(m,p,v,C){if(typeof v=="object"&&v!==null&&v.type===Gn&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case ds:e:{for(var I=v.key,P=p;P!==null;){if(P.key===I){if(I=v.type,I===Gn){if(P.tag===7){n(m,P.sibling),p=i(P,v.props.children),p.return=m,m=p;break e}}else if(P.elementType===I||typeof I=="object"&&I!==null&&I.$$typeof===Ft&&Dd(I)===P.type){n(m,P.sibling),p=i(P,v.props),p.ref=$r(m,P,v),p.return=m,m=p;break e}n(m,P);break}else e(m,P);P=P.sibling}v.type===Gn?(p=In(v.props.children,m.mode,C,v.key),p.return=m,m=p):(C=Us(v.type,v.key,v.props,null,m.mode,C),C.ref=$r(m,p,v),C.return=m,m=C)}return o(m);case Qn:e:{for(P=v.key;p!==null;){if(p.key===P)if(p.tag===4&&p.stateNode.containerInfo===v.containerInfo&&p.stateNode.implementation===v.implementation){n(m,p.sibling),p=i(p,v.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else e(m,p);p=p.sibling}p=Al(v,m.mode,C),p.return=m,m=p}return o(m);case Ft:return P=v._init,S(m,p,P(v._payload),C)}if(Xr(v))return g(m,p,v,C);if(Fr(v))return x(m,p,v,C);Cs(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,p!==null&&p.tag===6?(n(m,p.sibling),p=i(p,v),p.return=m,m=p):(n(m,p),p=Dl(v,m.mode,C),p.return=m,m=p),o(m)):n(m,p)}return S}var vr=Sp(!0),Np=Sp(!1),to=hn(null),no=null,tr=null,Mu=null;function Fu(){Mu=tr=no=null}function zu(t){var e=to.current;Y(to),t._currentValue=e}function Sa(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function ur(t,e){no=t,Mu=tr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ae=!0),t.firstContext=null)}function et(t){var e=t._currentValue;if(Mu!==t)if(t={context:t,memoizedValue:e,next:null},tr===null){if(no===null)throw Error(E(308));tr=t,no.dependencies={lanes:0,firstContext:t}}else tr=tr.next=t;return e}var En=null;function Uu(t){En===null?En=[t]:En.push(t)}function kp(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,Uu(e)):(n.next=i.next,i.next=n),e.interleaved=n,Rt(t,r)}function Rt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var zt=!1;function Bu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ip(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function St(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Yt(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,B&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Rt(t,n)}return i=r.interleaved,i===null?(e.next=e,Uu(r)):(e.next=i.next,i.next=e),r.interleaved=e,Rt(t,n)}function Ds(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ku(t,n)}}function Ad(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function ro(t,e,n,r){var i=t.updateQueue;zt=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,h=u=a=null,l=s;do{var f=l.lane,y=l.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:y,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var g=t,x=l;switch(f=e,y=n,x.tag){case 1:if(g=x.payload,typeof g=="function"){d=g.call(y,d,f);break e}d=g;break e;case 3:g.flags=g.flags&-65537|128;case 0:if(g=x.payload,f=typeof g=="function"?g.call(y,d,f):g,f==null)break e;d=te({},d,f);break e;case 2:zt=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else y={eventTime:y,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=y,a=d):h=h.next=y,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);jn|=o,t.lanes=o,t.memoizedState=d}}function Ld(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(E(191,i));i.call(r)}}}var Yi={},vt=hn(Yi),Ni=hn(Yi),ki=hn(Yi);function Sn(t){if(t===Yi)throw Error(E(174));return t}function Wu(t,e){switch(K(ki,e),K(Ni,t),K(vt,Yi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ia(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ia(e,t)}Y(vt),K(vt,e)}function yr(){Y(vt),Y(Ni),Y(ki)}function Tp(t){Sn(ki.current);var e=Sn(vt.current),n=ia(e,t.type);e!==n&&(K(Ni,t),K(vt,n))}function $u(t){Ni.current===t&&(Y(vt),Y(Ni))}var Z=hn(0);function io(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Tl=[];function Vu(){for(var t=0;t<Tl.length;t++)Tl[t]._workInProgressVersionPrimary=null;Tl.length=0}var As=Ot.ReactCurrentDispatcher,Rl=Ot.ReactCurrentBatchConfig,Pn=0,ee=null,ue=null,pe=null,so=!1,si=!1,Ii=0,l_=0;function Ee(){throw Error(E(321))}function Hu(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!ht(t[n],e[n]))return!1;return!0}function Qu(t,e,n,r,i,s){if(Pn=s,ee=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,As.current=t===null||t.memoizedState===null?d_:h_,t=n(r,i),si){s=0;do{if(si=!1,Ii=0,25<=s)throw Error(E(301));s+=1,pe=ue=null,e.updateQueue=null,As.current=f_,t=n(r,i)}while(si)}if(As.current=oo,e=ue!==null&&ue.next!==null,Pn=0,pe=ue=ee=null,so=!1,e)throw Error(E(300));return t}function Gu(){var t=Ii!==0;return Ii=0,t}function pt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return pe===null?ee.memoizedState=pe=t:pe=pe.next=t,pe}function tt(){if(ue===null){var t=ee.alternate;t=t!==null?t.memoizedState:null}else t=ue.next;var e=pe===null?ee.memoizedState:pe.next;if(e!==null)pe=e,ue=t;else{if(t===null)throw Error(E(310));ue=t,t={memoizedState:ue.memoizedState,baseState:ue.baseState,baseQueue:ue.baseQueue,queue:ue.queue,next:null},pe===null?ee.memoizedState=pe=t:pe=pe.next=t}return pe}function Ti(t,e){return typeof e=="function"?e(t):e}function Pl(t){var e=tt(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=ue,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var h=u.lane;if((Pn&h)===h)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,ee.lanes|=h,jn|=h}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,ht(r,e.memoizedState)||(Ae=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ee.lanes|=s,jn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function jl(t){var e=tt(),n=e.queue;if(n===null)throw Error(E(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);ht(s,e.memoizedState)||(Ae=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Rp(){}function Pp(t,e){var n=ee,r=tt(),i=e(),s=!ht(r.memoizedState,i);if(s&&(r.memoizedState=i,Ae=!0),r=r.queue,Ku(Op.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||pe!==null&&pe.memoizedState.tag&1){if(n.flags|=2048,Ri(9,bp.bind(null,n,r,i,e),void 0,null),ge===null)throw Error(E(349));Pn&30||jp(n,e,i)}return i}function jp(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function bp(t,e,n,r){e.value=n,e.getSnapshot=r,Dp(e)&&Ap(t)}function Op(t,e,n){return n(function(){Dp(e)&&Ap(t)})}function Dp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ht(t,n)}catch{return!0}}function Ap(t){var e=Rt(t,1);e!==null&&ct(e,t,1,-1)}function Md(t){var e=pt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ti,lastRenderedState:t},e.queue=t,t=t.dispatch=c_.bind(null,ee,t),[e.memoizedState,t]}function Ri(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ee.updateQueue,e===null?(e={lastEffect:null,stores:null},ee.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Lp(){return tt().memoizedState}function Ls(t,e,n,r){var i=pt();ee.flags|=t,i.memoizedState=Ri(1|e,n,void 0,r===void 0?null:r)}function Fo(t,e,n,r){var i=tt();r=r===void 0?null:r;var s=void 0;if(ue!==null){var o=ue.memoizedState;if(s=o.destroy,r!==null&&Hu(r,o.deps)){i.memoizedState=Ri(e,n,s,r);return}}ee.flags|=t,i.memoizedState=Ri(1|e,n,s,r)}function Fd(t,e){return Ls(8390656,8,t,e)}function Ku(t,e){return Fo(2048,8,t,e)}function Mp(t,e){return Fo(4,2,t,e)}function Fp(t,e){return Fo(4,4,t,e)}function zp(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Up(t,e,n){return n=n!=null?n.concat([t]):null,Fo(4,4,zp.bind(null,e,t),n)}function qu(){}function Bp(t,e){var n=tt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hu(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Wp(t,e){var n=tt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Hu(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function $p(t,e,n){return Pn&21?(ht(n,e)||(n=Kf(),ee.lanes|=n,jn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ae=!0),t.memoizedState=n)}function a_(t,e){var n=$;$=n!==0&&4>n?n:4,t(!0);var r=Rl.transition;Rl.transition={};try{t(!1),e()}finally{$=n,Rl.transition=r}}function Vp(){return tt().memoizedState}function u_(t,e,n){var r=Jt(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},Hp(t))Qp(e,n);else if(n=kp(t,e,n,r),n!==null){var i=Re();ct(n,t,r,i),Gp(n,e,r)}}function c_(t,e,n){var r=Jt(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(Hp(t))Qp(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,ht(l,o)){var a=e.interleaved;a===null?(i.next=i,Uu(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=kp(t,e,i,r),n!==null&&(i=Re(),ct(n,t,r,i),Gp(n,e,r))}}function Hp(t){var e=t.alternate;return t===ee||e!==null&&e===ee}function Qp(t,e){si=so=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Gp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,ku(t,n)}}var oo={readContext:et,useCallback:Ee,useContext:Ee,useEffect:Ee,useImperativeHandle:Ee,useInsertionEffect:Ee,useLayoutEffect:Ee,useMemo:Ee,useReducer:Ee,useRef:Ee,useState:Ee,useDebugValue:Ee,useDeferredValue:Ee,useTransition:Ee,useMutableSource:Ee,useSyncExternalStore:Ee,useId:Ee,unstable_isNewReconciler:!1},d_={readContext:et,useCallback:function(t,e){return pt().memoizedState=[t,e===void 0?null:e],t},useContext:et,useEffect:Fd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ls(4194308,4,zp.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ls(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ls(4,2,t,e)},useMemo:function(t,e){var n=pt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=pt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=u_.bind(null,ee,t),[r.memoizedState,t]},useRef:function(t){var e=pt();return t={current:t},e.memoizedState=t},useState:Md,useDebugValue:qu,useDeferredValue:function(t){return pt().memoizedState=t},useTransition:function(){var t=Md(!1),e=t[0];return t=a_.bind(null,t[1]),pt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ee,i=pt();if(X){if(n===void 0)throw Error(E(407));n=n()}else{if(n=e(),ge===null)throw Error(E(349));Pn&30||jp(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Fd(Op.bind(null,r,s,t),[t]),r.flags|=2048,Ri(9,bp.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=pt(),e=ge.identifierPrefix;if(X){var n=Ct,r=wt;n=(r&~(1<<32-ut(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ii++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=l_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},h_={readContext:et,useCallback:Bp,useContext:et,useEffect:Ku,useImperativeHandle:Up,useInsertionEffect:Mp,useLayoutEffect:Fp,useMemo:Wp,useReducer:Pl,useRef:Lp,useState:function(){return Pl(Ti)},useDebugValue:qu,useDeferredValue:function(t){var e=tt();return $p(e,ue.memoizedState,t)},useTransition:function(){var t=Pl(Ti)[0],e=tt().memoizedState;return[t,e]},useMutableSource:Rp,useSyncExternalStore:Pp,useId:Vp,unstable_isNewReconciler:!1},f_={readContext:et,useCallback:Bp,useContext:et,useEffect:Ku,useImperativeHandle:Up,useInsertionEffect:Mp,useLayoutEffect:Fp,useMemo:Wp,useReducer:jl,useRef:Lp,useState:function(){return jl(Ti)},useDebugValue:qu,useDeferredValue:function(t){var e=tt();return ue===null?e.memoizedState=t:$p(e,ue.memoizedState,t)},useTransition:function(){var t=jl(Ti)[0],e=tt().memoizedState;return[t,e]},useMutableSource:Rp,useSyncExternalStore:Pp,useId:Vp,unstable_isNewReconciler:!1};function it(t,e){if(t&&t.defaultProps){e=te({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Na(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:te({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var zo={isMounted:function(t){return(t=t._reactInternals)?Mn(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Re(),i=Jt(t),s=St(r,i);s.payload=e,n!=null&&(s.callback=n),e=Yt(t,s,i),e!==null&&(ct(e,t,i,r),Ds(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Re(),i=Jt(t),s=St(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Yt(t,s,i),e!==null&&(ct(e,t,i,r),Ds(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Re(),r=Jt(t),i=St(n,r);i.tag=2,e!=null&&(i.callback=e),e=Yt(t,i,r),e!==null&&(ct(e,t,r,n),Ds(e,t,r))}};function zd(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!wi(n,r)||!wi(i,s):!0}function Kp(t,e,n){var r=!1,i=ln,s=e.contextType;return typeof s=="object"&&s!==null?s=et(s):(i=Fe(e)?Tn:ke.current,r=e.contextTypes,s=(r=r!=null)?mr(t,i):ln),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=zo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function Ud(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&zo.enqueueReplaceState(e,e.state,null)}function ka(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Bu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=et(s):(s=Fe(e)?Tn:ke.current,i.context=mr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Na(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&zo.enqueueReplaceState(i,i.state,null),ro(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function _r(t,e){try{var n="",r=e;do n+=Bv(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function bl(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ia(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var p_=typeof WeakMap=="function"?WeakMap:Map;function qp(t,e,n){n=St(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ao||(ao=!0,Ma=r),Ia(t,e)},n}function Yp(t,e,n){n=St(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ia(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ia(t,e),typeof r!="function"&&(Xt===null?Xt=new Set([this]):Xt.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Bd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new p_;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=T_.bind(null,t,e,n),e.then(t,t))}function Wd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function $d(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=St(-1,1),e.tag=2,Yt(n,e,1))),n.lanes|=1),t)}var m_=Ot.ReactCurrentOwner,Ae=!1;function Ie(t,e,n,r){e.child=t===null?Np(e,null,n,r):vr(e,t.child,n,r)}function Vd(t,e,n,r,i){n=n.render;var s=e.ref;return ur(e,i),r=Qu(t,e,n,r,s,i),n=Gu(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pt(t,e,i)):(X&&n&&Du(e),e.flags|=1,Ie(t,e,r,i),e.child)}function Hd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!rc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Xp(t,e,s,r,i)):(t=Us(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:wi,n(o,r)&&t.ref===e.ref)return Pt(t,e,i)}return e.flags|=1,t=Zt(s,r),t.ref=e.ref,t.return=e,e.child=t}function Xp(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(wi(s,r)&&t.ref===e.ref)if(Ae=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ae=!0);else return e.lanes=t.lanes,Pt(t,e,i)}return Ta(t,e,n,r,i)}function Jp(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},K(rr,We),We|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,K(rr,We),We|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,K(rr,We),We|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,K(rr,We),We|=r;return Ie(t,e,i,n),e.child}function Zp(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Ta(t,e,n,r,i){var s=Fe(n)?Tn:ke.current;return s=mr(e,s),ur(e,i),n=Qu(t,e,n,r,s,i),r=Gu(),t!==null&&!Ae?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Pt(t,e,i)):(X&&r&&Du(e),e.flags|=1,Ie(t,e,n,i),e.child)}function Qd(t,e,n,r,i){if(Fe(n)){var s=!0;Js(e)}else s=!1;if(ur(e,i),e.stateNode===null)Ms(t,e),Kp(e,n,r),ka(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=et(u):(u=Fe(n)?Tn:ke.current,u=mr(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&Ud(e,o,r,u),zt=!1;var f=e.memoizedState;o.state=f,ro(e,r,o,i),a=e.memoizedState,l!==r||f!==a||Me.current||zt?(typeof h=="function"&&(Na(e,n,h,r),a=e.memoizedState),(l=zt||zd(e,n,l,r,f,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,Ip(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:it(e.type,l),o.props=u,d=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=et(a):(a=Fe(n)?Tn:ke.current,a=mr(e,a));var y=n.getDerivedStateFromProps;(h=typeof y=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==a)&&Ud(e,o,r,a),zt=!1,f=e.memoizedState,o.state=f,ro(e,r,o,i);var g=e.memoizedState;l!==d||f!==g||Me.current||zt?(typeof y=="function"&&(Na(e,n,y,r),g=e.memoizedState),(u=zt||zd(e,n,u,r,f,g,a)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,g,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,g,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=g),o.props=r,o.state=g,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Ra(t,e,n,r,s,i)}function Ra(t,e,n,r,i,s){Zp(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&jd(e,n,!1),Pt(t,e,s);r=e.stateNode,m_.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=vr(e,t.child,null,s),e.child=vr(e,null,l,s)):Ie(t,e,l,s),e.memoizedState=r.state,i&&jd(e,n,!0),e.child}function em(t){var e=t.stateNode;e.pendingContext?Pd(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Pd(t,e.context,!1),Wu(t,e.containerInfo)}function Gd(t,e,n,r,i){return gr(),Lu(i),e.flags|=256,Ie(t,e,n,r),e.child}var Pa={dehydrated:null,treeContext:null,retryLane:0};function ja(t){return{baseLanes:t,cachePool:null,transitions:null}}function tm(t,e,n){var r=e.pendingProps,i=Z.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),K(Z,i&1),t===null)return Ea(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Wo(o,r,0,null),t=In(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=ja(n),e.memoizedState=Pa,t):Yu(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return g_(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Zt(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Zt(l,s):(s=In(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?ja(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Pa,r}return s=t.child,t=s.sibling,r=Zt(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Yu(t,e){return e=Wo({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Es(t,e,n,r){return r!==null&&Lu(r),vr(e,t.child,null,n),t=Yu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function g_(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=bl(Error(E(422))),Es(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Wo({mode:"visible",children:r.children},i,0,null),s=In(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&vr(e,t.child,null,o),e.child.memoizedState=ja(o),e.memoizedState=Pa,s);if(!(e.mode&1))return Es(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(E(419)),r=bl(s,r,void 0),Es(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ae||l){if(r=ge,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,Rt(t,i),ct(r,t,i,-1))}return nc(),r=bl(Error(E(421))),Es(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=R_.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,$e=qt(i.nextSibling),Ve=e,X=!0,ot=null,t!==null&&(Ke[qe++]=wt,Ke[qe++]=Ct,Ke[qe++]=Rn,wt=t.id,Ct=t.overflow,Rn=e),e=Yu(e,r.children),e.flags|=4096,e)}function Kd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Sa(t.return,e,n)}function Ol(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function nm(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Ie(t,e,r.children,n),r=Z.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Kd(t,n,e);else if(t.tag===19)Kd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(K(Z,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&io(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ol(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&io(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ol(e,!0,n,null,s);break;case"together":Ol(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Ms(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Pt(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),jn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(E(153));if(e.child!==null){for(t=e.child,n=Zt(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Zt(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function v_(t,e,n){switch(e.tag){case 3:em(e),gr();break;case 5:Tp(e);break;case 1:Fe(e.type)&&Js(e);break;case 4:Wu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;K(to,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(K(Z,Z.current&1),e.flags|=128,null):n&e.child.childLanes?tm(t,e,n):(K(Z,Z.current&1),t=Pt(t,e,n),t!==null?t.sibling:null);K(Z,Z.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return nm(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),K(Z,Z.current),r)break;return null;case 22:case 23:return e.lanes=0,Jp(t,e,n)}return Pt(t,e,n)}var rm,ba,im,sm;rm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};ba=function(){};im=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Sn(vt.current);var s=null;switch(n){case"input":i=ea(t,i),r=ea(t,r),s=[];break;case"select":i=te({},i,{value:void 0}),r=te({},r,{value:void 0}),s=[];break;case"textarea":i=ra(t,i),r=ra(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Ys)}sa(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(pi.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(pi.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&q("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};sm=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vr(t,e){if(!X)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Se(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function y_(t,e,n){var r=e.pendingProps;switch(Au(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Se(e),null;case 1:return Fe(e.type)&&Xs(),Se(e),null;case 3:return r=e.stateNode,yr(),Y(Me),Y(ke),Vu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ws(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ot!==null&&(Ua(ot),ot=null))),ba(t,e),Se(e),null;case 5:$u(e);var i=Sn(ki.current);if(n=e.type,t!==null&&e.stateNode!=null)im(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(E(166));return Se(e),null}if(t=Sn(vt.current),ws(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[mt]=e,r[Si]=s,t=(e.mode&1)!==0,n){case"dialog":q("cancel",r),q("close",r);break;case"iframe":case"object":case"embed":q("load",r);break;case"video":case"audio":for(i=0;i<Zr.length;i++)q(Zr[i],r);break;case"source":q("error",r);break;case"img":case"image":case"link":q("error",r),q("load",r);break;case"details":q("toggle",r);break;case"input":rd(r,s),q("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},q("invalid",r);break;case"textarea":sd(r,s),q("invalid",r)}sa(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&xs(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&xs(r.textContent,l,t),i=["children",""+l]):pi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&q("scroll",r)}switch(n){case"input":hs(r),id(r,s,!0);break;case"textarea":hs(r),od(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Ys)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Of(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[mt]=e,t[Si]=r,rm(t,e,!1,!1),e.stateNode=t;e:{switch(o=oa(n,r),n){case"dialog":q("cancel",t),q("close",t),i=r;break;case"iframe":case"object":case"embed":q("load",t),i=r;break;case"video":case"audio":for(i=0;i<Zr.length;i++)q(Zr[i],t);i=r;break;case"source":q("error",t),i=r;break;case"img":case"image":case"link":q("error",t),q("load",t),i=r;break;case"details":q("toggle",t),i=r;break;case"input":rd(t,r),i=ea(t,r),q("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=te({},r,{value:void 0}),q("invalid",t);break;case"textarea":sd(t,r),i=ra(t,r),q("invalid",t);break;default:i=r}sa(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Lf(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Df(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&mi(t,a):typeof a=="number"&&mi(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(pi.hasOwnProperty(s)?a!=null&&s==="onScroll"&&q("scroll",t):a!=null&&xu(t,s,a,o))}switch(n){case"input":hs(t),id(t,r,!1);break;case"textarea":hs(t),od(t);break;case"option":r.value!=null&&t.setAttribute("value",""+on(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?sr(t,!!r.multiple,s,!1):r.defaultValue!=null&&sr(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Ys)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Se(e),null;case 6:if(t&&e.stateNode!=null)sm(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(E(166));if(n=Sn(ki.current),Sn(vt.current),ws(e)){if(r=e.stateNode,n=e.memoizedProps,r[mt]=e,(s=r.nodeValue!==n)&&(t=Ve,t!==null))switch(t.tag){case 3:xs(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&xs(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[mt]=e,e.stateNode=r}return Se(e),null;case 13:if(Y(Z),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(X&&$e!==null&&e.mode&1&&!(e.flags&128))Ep(),gr(),e.flags|=98560,s=!1;else if(s=ws(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(E(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(E(317));s[mt]=e}else gr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Se(e),s=!1}else ot!==null&&(Ua(ot),ot=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||Z.current&1?he===0&&(he=3):nc())),e.updateQueue!==null&&(e.flags|=4),Se(e),null);case 4:return yr(),ba(t,e),t===null&&Ci(e.stateNode.containerInfo),Se(e),null;case 10:return zu(e.type._context),Se(e),null;case 17:return Fe(e.type)&&Xs(),Se(e),null;case 19:if(Y(Z),s=e.memoizedState,s===null)return Se(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Vr(s,!1);else{if(he!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=io(t),o!==null){for(e.flags|=128,Vr(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return K(Z,Z.current&1|2),e.child}t=t.sibling}s.tail!==null&&se()>xr&&(e.flags|=128,r=!0,Vr(s,!1),e.lanes=4194304)}else{if(!r)if(t=io(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!X)return Se(e),null}else 2*se()-s.renderingStartTime>xr&&n!==1073741824&&(e.flags|=128,r=!0,Vr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=se(),e.sibling=null,n=Z.current,K(Z,r?n&1|2:n&1),e):(Se(e),null);case 22:case 23:return tc(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?We&1073741824&&(Se(e),e.subtreeFlags&6&&(e.flags|=8192)):Se(e),null;case 24:return null;case 25:return null}throw Error(E(156,e.tag))}function __(t,e){switch(Au(e),e.tag){case 1:return Fe(e.type)&&Xs(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return yr(),Y(Me),Y(ke),Vu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return $u(e),null;case 13:if(Y(Z),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(E(340));gr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Y(Z),null;case 4:return yr(),null;case 10:return zu(e.type._context),null;case 22:case 23:return tc(),null;case 24:return null;default:return null}}var Ss=!1,Ne=!1,x_=typeof WeakSet=="function"?WeakSet:Set,R=null;function nr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ne(t,e,r)}else n.current=null}function Oa(t,e,n){try{n()}catch(r){ne(t,e,r)}}var qd=!1;function w_(t,e){if(ga=Gs,t=cp(),Ou(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var y;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(y=d.firstChild)!==null;)f=d,d=y;for(;;){if(d===t)break t;if(f===n&&++u===i&&(l=o),f===s&&++h===r&&(a=o),(y=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=y}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(va={focusedElem:t,selectionRange:n},Gs=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var g=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(g!==null){var x=g.memoizedProps,S=g.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?x:it(e.type,x),S);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var v=e.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(E(163))}}catch(C){ne(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return g=qd,qd=!1,g}function oi(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&Oa(e,n,s)}i=i.next}while(i!==r)}}function Uo(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Da(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function om(t){var e=t.alternate;e!==null&&(t.alternate=null,om(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[mt],delete e[Si],delete e[xa],delete e[r_],delete e[i_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function lm(t){return t.tag===5||t.tag===3||t.tag===4}function Yd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||lm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Aa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Ys));else if(r!==4&&(t=t.child,t!==null))for(Aa(t,e,n),t=t.sibling;t!==null;)Aa(t,e,n),t=t.sibling}function La(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(La(t,e,n),t=t.sibling;t!==null;)La(t,e,n),t=t.sibling}var ye=null,st=!1;function Lt(t,e,n){for(n=n.child;n!==null;)am(t,e,n),n=n.sibling}function am(t,e,n){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(bo,n)}catch{}switch(n.tag){case 5:Ne||nr(n,e);case 6:var r=ye,i=st;ye=null,Lt(t,e,n),ye=r,st=i,ye!==null&&(st?(t=ye,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ye.removeChild(n.stateNode));break;case 18:ye!==null&&(st?(t=ye,n=n.stateNode,t.nodeType===8?kl(t.parentNode,n):t.nodeType===1&&kl(t,n),_i(t)):kl(ye,n.stateNode));break;case 4:r=ye,i=st,ye=n.stateNode.containerInfo,st=!0,Lt(t,e,n),ye=r,st=i;break;case 0:case 11:case 14:case 15:if(!Ne&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Oa(n,e,o),i=i.next}while(i!==r)}Lt(t,e,n);break;case 1:if(!Ne&&(nr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ne(n,e,l)}Lt(t,e,n);break;case 21:Lt(t,e,n);break;case 22:n.mode&1?(Ne=(r=Ne)||n.memoizedState!==null,Lt(t,e,n),Ne=r):Lt(t,e,n);break;default:Lt(t,e,n)}}function Xd(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new x_),e.forEach(function(r){var i=P_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function rt(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ye=l.stateNode,st=!1;break e;case 3:ye=l.stateNode.containerInfo,st=!0;break e;case 4:ye=l.stateNode.containerInfo,st=!0;break e}l=l.return}if(ye===null)throw Error(E(160));am(s,o,i),ye=null,st=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){ne(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)um(e,t),e=e.sibling}function um(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(rt(e,t),ft(t),r&4){try{oi(3,t,t.return),Uo(3,t)}catch(x){ne(t,t.return,x)}try{oi(5,t,t.return)}catch(x){ne(t,t.return,x)}}break;case 1:rt(e,t),ft(t),r&512&&n!==null&&nr(n,n.return);break;case 5:if(rt(e,t),ft(t),r&512&&n!==null&&nr(n,n.return),t.flags&32){var i=t.stateNode;try{mi(i,"")}catch(x){ne(t,t.return,x)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&jf(i,s),oa(l,o);var u=oa(l,s);for(o=0;o<a.length;o+=2){var h=a[o],d=a[o+1];h==="style"?Lf(i,d):h==="dangerouslySetInnerHTML"?Df(i,d):h==="children"?mi(i,d):xu(i,h,d,u)}switch(l){case"input":ta(i,s);break;case"textarea":bf(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var y=s.value;y!=null?sr(i,!!s.multiple,y,!1):f!==!!s.multiple&&(s.defaultValue!=null?sr(i,!!s.multiple,s.defaultValue,!0):sr(i,!!s.multiple,s.multiple?[]:"",!1))}i[Si]=s}catch(x){ne(t,t.return,x)}}break;case 6:if(rt(e,t),ft(t),r&4){if(t.stateNode===null)throw Error(E(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(x){ne(t,t.return,x)}}break;case 3:if(rt(e,t),ft(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{_i(e.containerInfo)}catch(x){ne(t,t.return,x)}break;case 4:rt(e,t),ft(t);break;case 13:rt(e,t),ft(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Zu=se())),r&4&&Xd(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ne=(u=Ne)||h,rt(e,t),Ne=u):rt(e,t),ft(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(R=t,h=t.child;h!==null;){for(d=R=h;R!==null;){switch(f=R,y=f.child,f.tag){case 0:case 11:case 14:case 15:oi(4,f,f.return);break;case 1:nr(f,f.return);var g=f.stateNode;if(typeof g.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,g.props=e.memoizedProps,g.state=e.memoizedState,g.componentWillUnmount()}catch(x){ne(r,n,x)}}break;case 5:nr(f,f.return);break;case 22:if(f.memoizedState!==null){Zd(d);continue}}y!==null?(y.return=f,R=y):Zd(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=Af("display",o))}catch(x){ne(t,t.return,x)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(x){ne(t,t.return,x)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:rt(e,t),ft(t),r&4&&Xd(t);break;case 21:break;default:rt(e,t),ft(t)}}function ft(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(lm(n)){var r=n;break e}n=n.return}throw Error(E(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(mi(i,""),r.flags&=-33);var s=Yd(t);La(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Yd(t);Aa(t,l,o);break;default:throw Error(E(161))}}catch(a){ne(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function C_(t,e,n){R=t,cm(t)}function cm(t,e,n){for(var r=(t.mode&1)!==0;R!==null;){var i=R,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Ss;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Ne;l=Ss;var u=Ne;if(Ss=o,(Ne=a)&&!u)for(R=i;R!==null;)o=R,a=o.child,o.tag===22&&o.memoizedState!==null?eh(i):a!==null?(a.return=o,R=a):eh(i);for(;s!==null;)R=s,cm(s),s=s.sibling;R=i,Ss=l,Ne=u}Jd(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,R=s):Jd(t)}}function Jd(t){for(;R!==null;){var e=R;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ne||Uo(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ne)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:it(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Ld(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ld(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&_i(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(E(163))}Ne||e.flags&512&&Da(e)}catch(f){ne(e,e.return,f)}}if(e===t){R=null;break}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}}function Zd(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var n=e.sibling;if(n!==null){n.return=e.return,R=n;break}R=e.return}}function eh(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{Uo(4,e)}catch(a){ne(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ne(e,i,a)}}var s=e.return;try{Da(e)}catch(a){ne(e,s,a)}break;case 5:var o=e.return;try{Da(e)}catch(a){ne(e,o,a)}}}catch(a){ne(e,e.return,a)}if(e===t){R=null;break}var l=e.sibling;if(l!==null){l.return=e.return,R=l;break}R=e.return}}var E_=Math.ceil,lo=Ot.ReactCurrentDispatcher,Xu=Ot.ReactCurrentOwner,Ze=Ot.ReactCurrentBatchConfig,B=0,ge=null,le=null,xe=0,We=0,rr=hn(0),he=0,Pi=null,jn=0,Bo=0,Ju=0,li=null,De=null,Zu=0,xr=1/0,_t=null,ao=!1,Ma=null,Xt=null,Ns=!1,$t=null,uo=0,ai=0,Fa=null,Fs=-1,zs=0;function Re(){return B&6?se():Fs!==-1?Fs:Fs=se()}function Jt(t){return t.mode&1?B&2&&xe!==0?xe&-xe:o_.transition!==null?(zs===0&&(zs=Kf()),zs):(t=$,t!==0||(t=window.event,t=t===void 0?16:tp(t.type)),t):1}function ct(t,e,n,r){if(50<ai)throw ai=0,Fa=null,Error(E(185));Gi(t,n,r),(!(B&2)||t!==ge)&&(t===ge&&(!(B&2)&&(Bo|=n),he===4&&Bt(t,xe)),ze(t,r),n===1&&B===0&&!(e.mode&1)&&(xr=se()+500,Mo&&fn()))}function ze(t,e){var n=t.callbackNode;oy(t,e);var r=Qs(t,t===ge?xe:0);if(r===0)n!==null&&ud(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&ud(n),e===1)t.tag===0?s_(th.bind(null,t)):xp(th.bind(null,t)),t_(function(){!(B&6)&&fn()}),n=null;else{switch(qf(r)){case 1:n=Nu;break;case 4:n=Qf;break;case 16:n=Hs;break;case 536870912:n=Gf;break;default:n=Hs}n=ym(n,dm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function dm(t,e){if(Fs=-1,zs=0,B&6)throw Error(E(327));var n=t.callbackNode;if(cr()&&t.callbackNode!==n)return null;var r=Qs(t,t===ge?xe:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=co(t,r);else{e=r;var i=B;B|=2;var s=fm();(ge!==t||xe!==e)&&(_t=null,xr=se()+500,kn(t,e));do try{k_();break}catch(l){hm(t,l)}while(!0);Fu(),lo.current=s,B=i,le!==null?e=0:(ge=null,xe=0,e=he)}if(e!==0){if(e===2&&(i=da(t),i!==0&&(r=i,e=za(t,i))),e===1)throw n=Pi,kn(t,0),Bt(t,r),ze(t,se()),n;if(e===6)Bt(t,r);else{if(i=t.current.alternate,!(r&30)&&!S_(i)&&(e=co(t,r),e===2&&(s=da(t),s!==0&&(r=s,e=za(t,s))),e===1))throw n=Pi,kn(t,0),Bt(t,r),ze(t,se()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(E(345));case 2:_n(t,De,_t);break;case 3:if(Bt(t,r),(r&130023424)===r&&(e=Zu+500-se(),10<e)){if(Qs(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Re(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=_a(_n.bind(null,t,De,_t),e);break}_n(t,De,_t);break;case 4:if(Bt(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ut(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=se()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*E_(r/1960))-r,10<r){t.timeoutHandle=_a(_n.bind(null,t,De,_t),r);break}_n(t,De,_t);break;case 5:_n(t,De,_t);break;default:throw Error(E(329))}}}return ze(t,se()),t.callbackNode===n?dm.bind(null,t):null}function za(t,e){var n=li;return t.current.memoizedState.isDehydrated&&(kn(t,e).flags|=256),t=co(t,e),t!==2&&(e=De,De=n,e!==null&&Ua(e)),t}function Ua(t){De===null?De=t:De.push.apply(De,t)}function S_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!ht(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Bt(t,e){for(e&=~Ju,e&=~Bo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ut(e),r=1<<n;t[n]=-1,e&=~r}}function th(t){if(B&6)throw Error(E(327));cr();var e=Qs(t,0);if(!(e&1))return ze(t,se()),null;var n=co(t,e);if(t.tag!==0&&n===2){var r=da(t);r!==0&&(e=r,n=za(t,r))}if(n===1)throw n=Pi,kn(t,0),Bt(t,e),ze(t,se()),n;if(n===6)throw Error(E(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,_n(t,De,_t),ze(t,se()),null}function ec(t,e){var n=B;B|=1;try{return t(e)}finally{B=n,B===0&&(xr=se()+500,Mo&&fn())}}function bn(t){$t!==null&&$t.tag===0&&!(B&6)&&cr();var e=B;B|=1;var n=Ze.transition,r=$;try{if(Ze.transition=null,$=1,t)return t()}finally{$=r,Ze.transition=n,B=e,!(B&6)&&fn()}}function tc(){We=rr.current,Y(rr)}function kn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,e_(n)),le!==null)for(n=le.return;n!==null;){var r=n;switch(Au(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&Xs();break;case 3:yr(),Y(Me),Y(ke),Vu();break;case 5:$u(r);break;case 4:yr();break;case 13:Y(Z);break;case 19:Y(Z);break;case 10:zu(r.type._context);break;case 22:case 23:tc()}n=n.return}if(ge=t,le=t=Zt(t.current,null),xe=We=e,he=0,Pi=null,Ju=Bo=jn=0,De=li=null,En!==null){for(e=0;e<En.length;e++)if(n=En[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}En=null}return t}function hm(t,e){do{var n=le;try{if(Fu(),As.current=oo,so){for(var r=ee.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}so=!1}if(Pn=0,pe=ue=ee=null,si=!1,Ii=0,Xu.current=null,n===null||n.return===null){he=1,Pi=e,le=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=xe,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var y=Wd(o);if(y!==null){y.flags&=-257,$d(y,o,l,s,e),y.mode&1&&Bd(s,u,e),e=y,a=u;var g=e.updateQueue;if(g===null){var x=new Set;x.add(a),e.updateQueue=x}else g.add(a);break e}else{if(!(e&1)){Bd(s,u,e),nc();break e}a=Error(E(426))}}else if(X&&l.mode&1){var S=Wd(o);if(S!==null){!(S.flags&65536)&&(S.flags|=256),$d(S,o,l,s,e),Lu(_r(a,l));break e}}s=a=_r(a,l),he!==4&&(he=2),li===null?li=[s]:li.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=qp(s,a,e);Ad(s,m);break e;case 1:l=a;var p=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(Xt===null||!Xt.has(v)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=Yp(s,l,e);Ad(s,C);break e}}s=s.return}while(s!==null)}mm(n)}catch(I){e=I,le===n&&n!==null&&(le=n=n.return);continue}break}while(!0)}function fm(){var t=lo.current;return lo.current=oo,t===null?oo:t}function nc(){(he===0||he===3||he===2)&&(he=4),ge===null||!(jn&268435455)&&!(Bo&268435455)||Bt(ge,xe)}function co(t,e){var n=B;B|=2;var r=fm();(ge!==t||xe!==e)&&(_t=null,kn(t,e));do try{N_();break}catch(i){hm(t,i)}while(!0);if(Fu(),B=n,lo.current=r,le!==null)throw Error(E(261));return ge=null,xe=0,he}function N_(){for(;le!==null;)pm(le)}function k_(){for(;le!==null&&!Xv();)pm(le)}function pm(t){var e=vm(t.alternate,t,We);t.memoizedProps=t.pendingProps,e===null?mm(t):le=e,Xu.current=null}function mm(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=__(n,e),n!==null){n.flags&=32767,le=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{he=6,le=null;return}}else if(n=y_(n,e,We),n!==null){le=n;return}if(e=e.sibling,e!==null){le=e;return}le=e=t}while(e!==null);he===0&&(he=5)}function _n(t,e,n){var r=$,i=Ze.transition;try{Ze.transition=null,$=1,I_(t,e,n,r)}finally{Ze.transition=i,$=r}return null}function I_(t,e,n,r){do cr();while($t!==null);if(B&6)throw Error(E(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(E(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(ly(t,s),t===ge&&(le=ge=null,xe=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ns||(Ns=!0,ym(Hs,function(){return cr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=Ze.transition,Ze.transition=null;var o=$;$=1;var l=B;B|=4,Xu.current=null,w_(t,n),um(n,t),Gy(va),Gs=!!ga,va=ga=null,t.current=n,C_(n),Jv(),B=l,$=o,Ze.transition=s}else t.current=n;if(Ns&&(Ns=!1,$t=t,uo=i),s=t.pendingLanes,s===0&&(Xt=null),ty(n.stateNode),ze(t,se()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ao)throw ao=!1,t=Ma,Ma=null,t;return uo&1&&t.tag!==0&&cr(),s=t.pendingLanes,s&1?t===Fa?ai++:(ai=0,Fa=t):ai=0,fn(),null}function cr(){if($t!==null){var t=qf(uo),e=Ze.transition,n=$;try{if(Ze.transition=null,$=16>t?16:t,$t===null)var r=!1;else{if(t=$t,$t=null,uo=0,B&6)throw Error(E(331));var i=B;for(B|=4,R=t.current;R!==null;){var s=R,o=s.child;if(R.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(R=u;R!==null;){var h=R;switch(h.tag){case 0:case 11:case 15:oi(8,h,s)}var d=h.child;if(d!==null)d.return=h,R=d;else for(;R!==null;){h=R;var f=h.sibling,y=h.return;if(om(h),h===u){R=null;break}if(f!==null){f.return=y,R=f;break}R=y}}}var g=s.alternate;if(g!==null){var x=g.child;if(x!==null){g.child=null;do{var S=x.sibling;x.sibling=null,x=S}while(x!==null)}}R=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,R=o;else e:for(;R!==null;){if(s=R,s.flags&2048)switch(s.tag){case 0:case 11:case 15:oi(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,R=m;break e}R=s.return}}var p=t.current;for(R=p;R!==null;){o=R;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,R=v;else e:for(o=p;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Uo(9,l)}}catch(I){ne(l,l.return,I)}if(l===o){R=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,R=C;break e}R=l.return}}if(B=i,fn(),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(bo,t)}catch{}r=!0}return r}finally{$=n,Ze.transition=e}}return!1}function nh(t,e,n){e=_r(n,e),e=qp(t,e,1),t=Yt(t,e,1),e=Re(),t!==null&&(Gi(t,1,e),ze(t,e))}function ne(t,e,n){if(t.tag===3)nh(t,t,n);else for(;e!==null;){if(e.tag===3){nh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(Xt===null||!Xt.has(r))){t=_r(n,t),t=Yp(e,t,1),e=Yt(e,t,1),t=Re(),e!==null&&(Gi(e,1,t),ze(e,t));break}}e=e.return}}function T_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Re(),t.pingedLanes|=t.suspendedLanes&n,ge===t&&(xe&n)===n&&(he===4||he===3&&(xe&130023424)===xe&&500>se()-Zu?kn(t,0):Ju|=n),ze(t,e)}function gm(t,e){e===0&&(t.mode&1?(e=ms,ms<<=1,!(ms&130023424)&&(ms=4194304)):e=1);var n=Re();t=Rt(t,e),t!==null&&(Gi(t,e,n),ze(t,n))}function R_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),gm(t,n)}function P_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(E(314))}r!==null&&r.delete(e),gm(t,n)}var vm;vm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Me.current)Ae=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ae=!1,v_(t,e,n);Ae=!!(t.flags&131072)}else Ae=!1,X&&e.flags&1048576&&wp(e,eo,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Ms(t,e),t=e.pendingProps;var i=mr(e,ke.current);ur(e,n),i=Qu(null,e,r,t,i,n);var s=Gu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Fe(r)?(s=!0,Js(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Bu(e),i.updater=zo,e.stateNode=i,i._reactInternals=e,ka(e,r,t,n),e=Ra(null,e,r,!0,s,n)):(e.tag=0,X&&s&&Du(e),Ie(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Ms(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=b_(r),t=it(r,t),i){case 0:e=Ta(null,e,r,t,n);break e;case 1:e=Qd(null,e,r,t,n);break e;case 11:e=Vd(null,e,r,t,n);break e;case 14:e=Hd(null,e,r,it(r.type,t),n);break e}throw Error(E(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:it(r,i),Ta(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:it(r,i),Qd(t,e,r,i,n);case 3:e:{if(em(e),t===null)throw Error(E(387));r=e.pendingProps,s=e.memoizedState,i=s.element,Ip(t,e),ro(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=_r(Error(E(423)),e),e=Gd(t,e,r,n,i);break e}else if(r!==i){i=_r(Error(E(424)),e),e=Gd(t,e,r,n,i);break e}else for($e=qt(e.stateNode.containerInfo.firstChild),Ve=e,X=!0,ot=null,n=Np(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(gr(),r===i){e=Pt(t,e,n);break e}Ie(t,e,r,n)}e=e.child}return e;case 5:return Tp(e),t===null&&Ea(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,ya(r,i)?o=null:s!==null&&ya(r,s)&&(e.flags|=32),Zp(t,e),Ie(t,e,o,n),e.child;case 6:return t===null&&Ea(e),null;case 13:return tm(t,e,n);case 4:return Wu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vr(e,null,r,n):Ie(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:it(r,i),Vd(t,e,r,i,n);case 7:return Ie(t,e,e.pendingProps,n),e.child;case 8:return Ie(t,e,e.pendingProps.children,n),e.child;case 12:return Ie(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,K(to,r._currentValue),r._currentValue=o,s!==null)if(ht(s.value,o)){if(s.children===i.children&&!Me.current){e=Pt(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=St(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?a.next=a:(a.next=h.next,h.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Sa(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(E(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Sa(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Ie(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,ur(e,n),i=et(i),r=r(i),e.flags|=1,Ie(t,e,r,n),e.child;case 14:return r=e.type,i=it(r,e.pendingProps),i=it(r.type,i),Hd(t,e,r,i,n);case 15:return Xp(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:it(r,i),Ms(t,e),e.tag=1,Fe(r)?(t=!0,Js(e)):t=!1,ur(e,n),Kp(e,r,i),ka(e,r,i,n),Ra(null,e,r,!0,t,n);case 19:return nm(t,e,n);case 22:return Jp(t,e,n)}throw Error(E(156,e.tag))};function ym(t,e){return Hf(t,e)}function j_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ye(t,e,n,r){return new j_(t,e,n,r)}function rc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function b_(t){if(typeof t=="function")return rc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Cu)return 11;if(t===Eu)return 14}return 2}function Zt(t,e){var n=t.alternate;return n===null?(n=Ye(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Us(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")rc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Gn:return In(n.children,i,s,e);case wu:o=8,i|=8;break;case Yl:return t=Ye(12,n,e,i|2),t.elementType=Yl,t.lanes=s,t;case Xl:return t=Ye(13,n,e,i),t.elementType=Xl,t.lanes=s,t;case Jl:return t=Ye(19,n,e,i),t.elementType=Jl,t.lanes=s,t;case Tf:return Wo(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case kf:o=10;break e;case If:o=9;break e;case Cu:o=11;break e;case Eu:o=14;break e;case Ft:o=16,r=null;break e}throw Error(E(130,t==null?t:typeof t,""))}return e=Ye(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function In(t,e,n,r){return t=Ye(7,t,r,e),t.lanes=n,t}function Wo(t,e,n,r){return t=Ye(22,t,r,e),t.elementType=Tf,t.lanes=n,t.stateNode={isHidden:!1},t}function Dl(t,e,n){return t=Ye(6,t,null,e),t.lanes=n,t}function Al(t,e,n){return e=Ye(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function O_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ml(0),this.expirationTimes=ml(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ml(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function ic(t,e,n,r,i,s,o,l,a){return t=new O_(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Ye(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Bu(s),t}function D_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Qn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function _m(t){if(!t)return ln;t=t._reactInternals;e:{if(Mn(t)!==t||t.tag!==1)throw Error(E(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Fe(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(E(171))}if(t.tag===1){var n=t.type;if(Fe(n))return _p(t,n,e)}return e}function xm(t,e,n,r,i,s,o,l,a){return t=ic(n,r,!0,t,i,s,o,l,a),t.context=_m(null),n=t.current,r=Re(),i=Jt(n),s=St(r,i),s.callback=e??null,Yt(n,s,i),t.current.lanes=i,Gi(t,i,r),ze(t,r),t}function $o(t,e,n,r){var i=e.current,s=Re(),o=Jt(i);return n=_m(n),e.context===null?e.context=n:e.pendingContext=n,e=St(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Yt(i,e,o),t!==null&&(ct(t,i,o,s),Ds(t,i,o)),o}function ho(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function rh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function sc(t,e){rh(t,e),(t=t.alternate)&&rh(t,e)}function A_(){return null}var wm=typeof reportError=="function"?reportError:function(t){console.error(t)};function oc(t){this._internalRoot=t}Vo.prototype.render=oc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(E(409));$o(t,e,null,null)};Vo.prototype.unmount=oc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;bn(function(){$o(null,t,null,null)}),e[Tt]=null}};function Vo(t){this._internalRoot=t}Vo.prototype.unstable_scheduleHydration=function(t){if(t){var e=Jf();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Ut.length&&e!==0&&e<Ut[n].priority;n++);Ut.splice(n,0,t),n===0&&ep(t)}};function lc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ho(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function ih(){}function L_(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=ho(o);s.call(u)}}var o=xm(e,r,t,0,null,!1,!1,"",ih);return t._reactRootContainer=o,t[Tt]=o.current,Ci(t.nodeType===8?t.parentNode:t),bn(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=ho(a);l.call(u)}}var a=ic(t,0,!1,null,null,!1,!1,"",ih);return t._reactRootContainer=a,t[Tt]=a.current,Ci(t.nodeType===8?t.parentNode:t),bn(function(){$o(e,a,n,r)}),a}function Qo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=ho(o);l.call(a)}}$o(e,o,t,i)}else o=L_(n,e,t,i,r);return ho(o)}Yf=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Jr(e.pendingLanes);n!==0&&(ku(e,n|1),ze(e,se()),!(B&6)&&(xr=se()+500,fn()))}break;case 13:bn(function(){var r=Rt(t,1);if(r!==null){var i=Re();ct(r,t,1,i)}}),sc(t,1)}};Iu=function(t){if(t.tag===13){var e=Rt(t,134217728);if(e!==null){var n=Re();ct(e,t,134217728,n)}sc(t,134217728)}};Xf=function(t){if(t.tag===13){var e=Jt(t),n=Rt(t,e);if(n!==null){var r=Re();ct(n,t,e,r)}sc(t,e)}};Jf=function(){return $};Zf=function(t,e){var n=$;try{return $=t,e()}finally{$=n}};aa=function(t,e,n){switch(e){case"input":if(ta(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Lo(r);if(!i)throw Error(E(90));Pf(r),ta(r,i)}}}break;case"textarea":bf(t,n);break;case"select":e=n.value,e!=null&&sr(t,!!n.multiple,e,!1)}};zf=ec;Uf=bn;var M_={usingClientEntryPoint:!1,Events:[qi,Xn,Lo,Mf,Ff,ec]},Hr={findFiberByHostInstance:Cn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},F_={bundleType:Hr.bundleType,version:Hr.version,rendererPackageName:Hr.rendererPackageName,rendererConfig:Hr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ot.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=$f(t),t===null?null:t.stateNode},findFiberByHostInstance:Hr.findFiberByHostInstance||A_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ks=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ks.isDisabled&&ks.supportsFiber)try{bo=ks.inject(F_),gt=ks}catch{}}Qe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=M_;Qe.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lc(e))throw Error(E(200));return D_(t,e,null,n)};Qe.createRoot=function(t,e){if(!lc(t))throw Error(E(299));var n=!1,r="",i=wm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=ic(t,1,!1,null,null,n,!1,r,i),t[Tt]=e.current,Ci(t.nodeType===8?t.parentNode:t),new oc(e)};Qe.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(E(188)):(t=Object.keys(t).join(","),Error(E(268,t)));return t=$f(e),t=t===null?null:t.stateNode,t};Qe.flushSync=function(t){return bn(t)};Qe.hydrate=function(t,e,n){if(!Ho(e))throw Error(E(200));return Qo(null,t,e,!0,n)};Qe.hydrateRoot=function(t,e,n){if(!lc(t))throw Error(E(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=wm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=xm(e,null,t,1,n??null,i,!1,s,o),t[Tt]=e.current,Ci(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Vo(e)};Qe.render=function(t,e,n){if(!Ho(e))throw Error(E(200));return Qo(null,t,e,!1,n)};Qe.unmountComponentAtNode=function(t){if(!Ho(t))throw Error(E(40));return t._reactRootContainer?(bn(function(){Qo(null,null,t,!1,function(){t._reactRootContainer=null,t[Tt]=null})}),!0):!1};Qe.unstable_batchedUpdates=ec;Qe.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ho(n))throw Error(E(200));if(t==null||t._reactInternals===void 0)throw Error(E(38));return Qo(t,e,n,!1,r)};Qe.version="18.3.1-next-f1338f8080-20240426";function Cm(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Cm)}catch(t){console.error(t)}}Cm(),Cf.exports=Qe;var z_=Cf.exports,sh=z_;Kl.createRoot=sh.createRoot,Kl.hydrateRoot=sh.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ji(){return ji=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},ji.apply(this,arguments)}var Vt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Vt||(Vt={}));const oh="popstate";function U_(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:l="",hash:a=""}=Fn(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Ba("",{pathname:o,search:l,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let a=i.location.href,u=a.indexOf("#");l=u===-1?a:a.slice(0,u)}return l+"#"+(typeof s=="string"?s:fo(s))}function r(i,s){ac(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return W_(e,n,r,t)}function oe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ac(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function B_(){return Math.random().toString(36).substr(2,8)}function lh(t,e){return{usr:t.state,key:t.key,idx:e}}function Ba(t,e,n,r){return n===void 0&&(n=null),ji({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Fn(e):e,{state:n,key:e&&e.key||r||B_()})}function fo(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Fn(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function W_(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Vt.Pop,a=null,u=h();u==null&&(u=0,o.replaceState(ji({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){l=Vt.Pop;let S=h(),m=S==null?null:S-u;u=S,a&&a({action:l,location:x.location,delta:m})}function f(S,m){l=Vt.Push;let p=Ba(x.location,S,m);n&&n(p,S),u=h()+1;let v=lh(p,u),C=x.createHref(p);try{o.pushState(v,"",C)}catch(I){if(I instanceof DOMException&&I.name==="DataCloneError")throw I;i.location.assign(C)}s&&a&&a({action:l,location:x.location,delta:1})}function y(S,m){l=Vt.Replace;let p=Ba(x.location,S,m);n&&n(p,S),u=h();let v=lh(p,u),C=x.createHref(p);o.replaceState(v,"",C),s&&a&&a({action:l,location:x.location,delta:0})}function g(S){let m=i.location.origin!=="null"?i.location.origin:i.location.href,p=typeof S=="string"?S:fo(S);return p=p.replace(/ $/,"%20"),oe(m,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,m)}let x={get action(){return l},get location(){return t(i,o)},listen(S){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(oh,d),a=S,()=>{i.removeEventListener(oh,d),a=null}},createHref(S){return e(i,S)},createURL:g,encodeLocation(S){let m=g(S);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:y,go(S){return o.go(S)}};return x}var ah;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ah||(ah={}));function $_(t,e,n){return n===void 0&&(n="/"),V_(t,e,n)}function V_(t,e,n,r){let i=typeof e=="string"?Fn(e):e,s=uc(i.pathname||"/",n);if(s==null)return null;let o=Em(t);H_(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let u=r0(s);l=e0(o[a],u)}return l}function Em(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let a={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};a.relativePath.startsWith("/")&&(oe(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let u=en([r,a.relativePath]),h=n.concat(a);s.children&&s.children.length>0&&(oe(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Em(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:J_(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let a of Sm(s.path))i(s,o,a)}),e}function Sm(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Sm(r.join("/")),l=[];return l.push(...o.map(a=>a===""?s:[s,a].join("/"))),i&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function H_(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:Z_(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Q_=/^:[\w-]+$/,G_=3,K_=2,q_=1,Y_=10,X_=-2,uh=t=>t==="*";function J_(t,e){let n=t.split("/"),r=n.length;return n.some(uh)&&(r+=X_),e&&(r+=K_),n.filter(i=>!uh(i)).reduce((i,s)=>i+(Q_.test(s)?G_:s===""?q_:Y_),r)}function Z_(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function e0(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let a=r[l],u=l===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=t0({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},h),f=a.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:en([s,d.pathname]),pathnameBase:l0(en([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=en([s,d.pathnameBase]))}return o}function t0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=n0(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,h,d)=>{let{paramName:f,isOptional:y}=h;if(f==="*"){let x=l[d]||"";o=s.slice(0,s.length-x.length).replace(/(.)\/+$/,"$1")}const g=l[d];return y&&!g?u[f]=void 0:u[f]=(g||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function n0(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ac(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function r0(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ac(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function uc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function i0(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Fn(t):t;return{pathname:n?n.startsWith("/")?n:s0(n,e):e,search:a0(r),hash:u0(i)}}function s0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ll(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function o0(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function cc(t,e){let n=o0(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function dc(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Fn(t):(i=ji({},t),oe(!i.pathname||!i.pathname.includes("?"),Ll("?","pathname","search",i)),oe(!i.pathname||!i.pathname.includes("#"),Ll("#","pathname","hash",i)),oe(!i.search||!i.search.includes("#"),Ll("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}l=d>=0?e[d]:"/"}let a=i0(i,l),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||h)&&(a.pathname+="/"),a}const en=t=>t.join("/").replace(/\/\/+/g,"/"),l0=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),a0=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,u0=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function c0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Nm=["post","put","patch","delete"];new Set(Nm);const d0=["get",...Nm];new Set(d0);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bi(){return bi=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},bi.apply(this,arguments)}const hc=w.createContext(null),h0=w.createContext(null),pn=w.createContext(null),Go=w.createContext(null),mn=w.createContext({outlet:null,matches:[],isDataRoute:!1}),km=w.createContext(null);function f0(t,e){let{relative:n}=e===void 0?{}:e;Pr()||oe(!1);let{basename:r,navigator:i}=w.useContext(pn),{hash:s,pathname:o,search:l}=Tm(t,{relative:n}),a=o;return r!=="/"&&(a=o==="/"?r:en([r,o])),i.createHref({pathname:a,search:l,hash:s})}function Pr(){return w.useContext(Go)!=null}function zn(){return Pr()||oe(!1),w.useContext(Go).location}function Im(t){w.useContext(pn).static||w.useLayoutEffect(t)}function Xi(){let{isDataRoute:t}=w.useContext(mn);return t?k0():p0()}function p0(){Pr()||oe(!1);let t=w.useContext(hc),{basename:e,future:n,navigator:r}=w.useContext(pn),{matches:i}=w.useContext(mn),{pathname:s}=zn(),o=JSON.stringify(cc(i,n.v7_relativeSplatPath)),l=w.useRef(!1);return Im(()=>{l.current=!0}),w.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let d=dc(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:en([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function Tm(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=w.useContext(pn),{matches:i}=w.useContext(mn),{pathname:s}=zn(),o=JSON.stringify(cc(i,r.v7_relativeSplatPath));return w.useMemo(()=>dc(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function m0(t,e){return g0(t,e)}function g0(t,e,n,r){Pr()||oe(!1);let{navigator:i,static:s}=w.useContext(pn),{matches:o}=w.useContext(mn),l=o[o.length-1],a=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let h=zn(),d;if(e){var f;let m=typeof e=="string"?Fn(e):e;u==="/"||(f=m.pathname)!=null&&f.startsWith(u)||oe(!1),d=m}else d=h;let y=d.pathname||"/",g=y;if(u!=="/"){let m=u.replace(/^\//,"").split("/");g="/"+y.replace(/^\//,"").split("/").slice(m.length).join("/")}let x=$_(t,{pathname:g}),S=w0(x&&x.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:en([u,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?u:en([u,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),o,n,r);return e&&S?w.createElement(Go.Provider,{value:{location:bi({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Vt.Pop}},S):S}function v0(){let t=N0(),e=c0(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),n?w.createElement("pre",{style:i},n):null,null)}const y0=w.createElement(v0,null);class _0 extends w.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?w.createElement(mn.Provider,{value:this.props.routeContext},w.createElement(km.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function x0(t){let{routeContext:e,match:n,children:r}=t,i=w.useContext(hc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),w.createElement(mn.Provider,{value:e},r)}function w0(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);h>=0||oe(!1),o=o.slice(0,Math.min(o.length,h+1))}let a=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:y}=n,g=d.route.loader&&f[d.route.id]===void 0&&(!y||y[d.route.id]===void 0);if(d.route.lazy||g){a=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let y,g=!1,x=null,S=null;n&&(y=l&&d.route.id?l[d.route.id]:void 0,x=d.route.errorElement||y0,a&&(u<0&&f===0?(I0("route-fallback"),g=!0,S=null):u===f&&(g=!0,S=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),p=()=>{let v;return y?v=x:g?v=S:d.route.Component?v=w.createElement(d.route.Component,null):d.route.element?v=d.route.element:v=h,w.createElement(x0,{match:d,routeContext:{outlet:h,matches:m,isDataRoute:n!=null},children:v})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?w.createElement(_0,{location:n.location,revalidation:n.revalidation,component:x,error:y,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var Rm=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Rm||{}),Pm=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Pm||{});function C0(t){let e=w.useContext(hc);return e||oe(!1),e}function E0(t){let e=w.useContext(h0);return e||oe(!1),e}function S0(t){let e=w.useContext(mn);return e||oe(!1),e}function jm(t){let e=S0(),n=e.matches[e.matches.length-1];return n.route.id||oe(!1),n.route.id}function N0(){var t;let e=w.useContext(km),n=E0(),r=jm();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function k0(){let{router:t}=C0(Rm.UseNavigateStable),e=jm(Pm.UseNavigateStable),n=w.useRef(!1);return Im(()=>{n.current=!0}),w.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,bi({fromRouteId:e},s)))},[t,e])}const ch={};function I0(t,e,n){ch[t]||(ch[t]=!0)}function T0(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function R0(t){let{to:e,replace:n,state:r,relative:i}=t;Pr()||oe(!1);let{future:s,static:o}=w.useContext(pn),{matches:l}=w.useContext(mn),{pathname:a}=zn(),u=Xi(),h=dc(e,cc(l,s.v7_relativeSplatPath),a,i==="path"),d=JSON.stringify(h);return w.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:i}),[u,d,i,n,r]),null}function Mt(t){oe(!1)}function P0(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Vt.Pop,navigator:s,static:o=!1,future:l}=t;Pr()&&oe(!1);let a=e.replace(/^\/*/,"/"),u=w.useMemo(()=>({basename:a,navigator:s,static:o,future:bi({v7_relativeSplatPath:!1},l)}),[a,l,s,o]);typeof r=="string"&&(r=Fn(r));let{pathname:h="/",search:d="",hash:f="",state:y=null,key:g="default"}=r,x=w.useMemo(()=>{let S=uc(h,a);return S==null?null:{location:{pathname:S,search:d,hash:f,state:y,key:g},navigationType:i}},[a,h,d,f,y,g,i]);return x==null?null:w.createElement(pn.Provider,{value:u},w.createElement(Go.Provider,{children:n,value:x}))}function j0(t){let{children:e,location:n}=t;return m0(Wa(e),n)}new Promise(()=>{});function Wa(t,e){e===void 0&&(e=[]);let n=[];return w.Children.forEach(t,(r,i)=>{if(!w.isValidElement(r))return;let s=[...e,i];if(r.type===w.Fragment){n.push.apply(n,Wa(r.props.children,s));return}r.type!==Mt&&oe(!1),!r.props.index||!r.props.children||oe(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Wa(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function $a(){return $a=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},$a.apply(this,arguments)}function b0(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function O0(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function D0(t,e){return t.button===0&&(!e||e==="_self")&&!O0(t)}function Va(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function A0(t,e){let n=Va(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const L0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],M0="6";try{window.__reactRouterVersion=M0}catch{}const F0="startTransition",dh=Tv[F0];function z0(t){let{basename:e,children:n,future:r,window:i}=t,s=w.useRef();s.current==null&&(s.current=U_({window:i,v5Compat:!0}));let o=s.current,[l,a]=w.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=w.useCallback(d=>{u&&dh?dh(()=>a(d)):a(d)},[a,u]);return w.useLayoutEffect(()=>o.listen(h),[o,h]),w.useEffect(()=>T0(r),[r]),w.createElement(P0,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const U0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",B0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Xe=w.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:a,to:u,preventScrollReset:h,viewTransition:d}=e,f=b0(e,L0),{basename:y}=w.useContext(pn),g,x=!1;if(typeof u=="string"&&B0.test(u)&&(g=u,U0))try{let v=new URL(window.location.href),C=u.startsWith("//")?new URL(v.protocol+u):new URL(u),I=uc(C.pathname,y);C.origin===v.origin&&I!=null?u=I+C.search+C.hash:x=!0}catch{}let S=f0(u,{relative:i}),m=W0(u,{replace:o,state:l,target:a,preventScrollReset:h,relative:i,viewTransition:d});function p(v){r&&r(v),v.defaultPrevented||m(v)}return w.createElement("a",$a({},f,{href:g||S,onClick:x||s?r:p,ref:n,target:a}))});var hh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(hh||(hh={}));var fh;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(fh||(fh={}));function W0(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,a=Xi(),u=zn(),h=Tm(t,{relative:o});return w.useCallback(d=>{if(D0(d,n)){d.preventDefault();let f=r!==void 0?r:fo(u)===fo(h);a(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[u,a,h,r,i,n,t,s,o,l])}function $0(t){let e=w.useRef(Va(t)),n=w.useRef(!1),r=zn(),i=w.useMemo(()=>A0(r.search,n.current?null:e.current),[r.search]),s=Xi(),o=w.useCallback((l,a)=>{const u=Va(typeof l=="function"?l(i):l);n.current=!0,s("?"+u,a)},[s,i]);return[i,o]}function V0({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const H0=w.forwardRef(V0);function Q0({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const G0=w.forwardRef(Q0);function K0({title:t,titleId:e,...n},r){return w.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?w.createElement("title",{id:e},t):null,w.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const q0=w.forwardRef(K0),Dt={PRODUCTS:"store_products",CATEGORIES:"store_categories",CART:"store_cart",ORDERS:"store_orders"},Ko=()=>{const t=localStorage.getItem(Dt.PRODUCTS);return t?JSON.parse(t):[]},Ha=t=>{localStorage.setItem(Dt.PRODUCTS,JSON.stringify(t))},qo=()=>{const t=localStorage.getItem(Dt.CATEGORIES);return t?JSON.parse(t):[]},Qa=t=>{localStorage.setItem(Dt.CATEGORIES,JSON.stringify(t))},Nt=()=>{const t=localStorage.getItem(Dt.CART);return t?JSON.parse(t):[]},fc=t=>{localStorage.setItem(Dt.CART,JSON.stringify(t)),window.dispatchEvent(new CustomEvent("cartUpdated"))},ph=()=>{const t=localStorage.getItem(Dt.ORDERS);return t?JSON.parse(t):[]},Hn=t=>{localStorage.setItem(Dt.ORDERS,JSON.stringify(t))},bm=t=>{const e=Nt(),n=e.find(r=>r.id===t.id);n?n.quantity+=1:e.push({...t,quantity:1}),fc(e)},Y0=t=>{const n=Nt().filter(r=>r.id!==t);fc(n)},X0=(t,e)=>{const r=Nt().map(i=>i.id===t?{...i,quantity:e}:i);fc(r)},J0=()=>{localStorage.removeItem(Dt.CART),window.dispatchEvent(new CustomEvent("cartUpdated"))};function Z0({isAdmin:t,setIsAdmin:e}){const[n,r]=w.useState(0),[i,s]=w.useState(!1),[o,l]=w.useState(""),[a,u]=w.useState(!1),[h,d]=w.useState(!1);w.useEffect(()=>(y(),window.addEventListener("storage",f),window.addEventListener("cartUpdated",y),()=>{window.removeEventListener("storage",f),window.removeEventListener("cartUpdated",y)}),[]);const f=S=>{S.key==="store_cart"&&y()},y=()=>{const m=Nt().reduce((p,v)=>p+v.quantity,0);r(m)},g=()=>{t?e(!1):(s(!0),l(""),u(!1))},x=()=>{o==="admin123"?(e(!0),s(!1),u(!1)):u(!0)};return c.jsxs("nav",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg",children:[c.jsx("div",{className:"container mx-auto px-6",children:c.jsxs("div",{className:"flex justify-between items-center h-20",children:[c.jsxs("div",{className:"flex items-center space-x-6 space-x-reverse",children:[c.jsx(Xe,{to:"/",className:"text-2xl font-bold text-white transition-transform hover:scale-105",children:"חנות אונליין"}),c.jsx("div",{className:"h-6 w-px bg-blue-300 mx-2"}),c.jsx(Xe,{to:"/products",className:"text-white hover:text-blue-100 font-medium transition-colors duration-200 px-3 py-2 rounded-md hover:bg-white/10",children:"מוצרים"}),c.jsxs(Xe,{to:"/cart",className:"text-white hover:text-blue-100 relative group",children:[c.jsx("div",{className:"p-2 rounded-full hover:bg-white/10 transition-colors duration-200",children:c.jsx(q0,{className:"h-6 w-6"})}),n>0&&c.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold shadow-md",children:n})]})]}),c.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[c.jsx("button",{onClick:g,className:"text-sm text-white hover:text-blue-100 font-medium px-3 py-2 rounded-md hover:bg-white/10 transition-colors duration-200",children:t?"יציאה ממצב מנהל":"מצב מנהל"}),t&&c.jsx(Xe,{to:"/admin",className:"text-sm bg-white/20 text-white px-4 py-2 rounded-md hover:bg-white/30 transition-colors duration-200 font-medium",children:"לוח בקרה"})]})]})}),i&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-80 max-w-md text-right border border-gray-200",children:[c.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"כניסה למצב מנהל"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"adminPassword",className:"block text-gray-700 mb-2 font-medium",children:"סיסמת מנהל:"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:h?"text":"password",id:"adminPassword",value:o,onChange:S=>l(S.target.value),className:`w-full p-2 border rounded-md ${a?"border-red-500 ring-1 ring-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-gray-900 pr-10`,placeholder:"הזן סיסמת מנהל",onKeyDown:S=>S.key==="Enter"&&x()}),c.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 transition-colors",onClick:()=>d(!h),"aria-label":h?"הסתר סיסמה":"הצג סיסמה",children:h?c.jsx(H0,{className:"h-5 w-5"}):c.jsx(G0,{className:"h-5 w-5"})})]}),a&&c.jsx("p",{className:"text-red-500 text-sm mt-1",children:"סיסמה שגויה, נסה שוב"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("button",{onClick:()=>s(!1),className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors font-medium",children:"ביטול"}),c.jsx("button",{onClick:x,className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-4 py-2 rounded-md hover:from-blue-600 hover:to-indigo-700 transition-colors font-medium",children:"כניסה"})]})]})})]})}function ex({message:t,isVisible:e,onClose:n,type:r="success"}){if(w.useEffect(()=>{if(e){const s=setTimeout(()=>{n()},3e3);return()=>clearTimeout(s)}},[e,n]),!e)return null;const i=r==="success"?"bg-green-500":"bg-red-500";return c.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 animate-bounce-in",children:c.jsxs("div",{className:`${i} text-white px-6 py-3 rounded-lg shadow-lg flex items-center`,children:[r==="success"&&c.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),c.jsx("span",{children:t})]})})}const Om=w.createContext();function pc(){return w.useContext(Om)}function tx({children:t}){const[e,n]=w.useState({message:"",isVisible:!1,type:"success"}),r=(s,o="success")=>{n({message:s,isVisible:!0,type:o})},i=()=>{n(s=>({...s,isVisible:!1}))};return c.jsxs(Om.Provider,{value:{showToast:r},children:[t,c.jsx(ex,{message:e.message,isVisible:e.isVisible,onClose:i,type:e.type})]})}function mh(){const t=Ko(),e=qo(),n=t.slice(0,4),{showToast:r}=pc(),i=s=>{bm(s),r(`${s.name} נוסף לסל הקניות`,"success")};return c.jsxs("div",{className:"space-y-12",children:[c.jsxs("section",{className:"text-center py-16 bg-blue-50 rounded-lg",children:[c.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"ברוכים הבאים לחנות האונליין שלנו"}),c.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"מצאו את המוצרים הטובים ביותר במחירים הטובים ביותר"}),c.jsx(Xe,{to:"/products",className:"btn-primary",children:"צפה במוצרים"})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold mb-6",children:"קטגוריות"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:e.map(s=>c.jsxs(Xe,{to:`/products?category=${s.id}`,className:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[c.jsx("h3",{className:"font-semibold text-lg",children:s.name}),c.jsx("p",{className:"text-gray-600 text-sm",children:s.description})]},s.id))})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold mb-6",children:"מוצרים מומלצים"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(s=>c.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[c.jsx("img",{src:s.image,alt:s.name,className:"w-full h-48 object-cover"}),c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"font-semibold text-lg mb-2",children:s.name}),c.jsx("p",{className:"text-gray-600 mb-4",children:s.description}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"text-xl font-bold",children:["₪",s.price]}),c.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>i(s),className:"btn-primary",children:"הוסף לסל"}),c.jsx(Xe,{to:`/products?category=${s.categoryId}`,className:"btn-secondary",children:"צפה בפרטים"})]})]})]})]},s.id))})]})]})}function nx(){const[t]=$0(),[e,n]=w.useState([]),[r]=w.useState(qo()),[i,s]=w.useState(t.get("category")||""),[o,l]=w.useState(""),{showToast:a}=pc();w.useEffect(()=>{let h=Ko();i&&(h=h.filter(d=>d.categoryId===i)),o&&(h=h.filter(d=>d.name.includes(o)||d.description.includes(o))),n(h)},[i,o]);const u=h=>{bm(h),a(`${h.name} נוסף לסל הקניות`,"success")};return c.jsxs("div",{className:"space-y-8",children:[c.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"קטגוריה"}),c.jsxs("select",{value:i,onChange:h=>s(h.target.value),className:"input-field",children:[c.jsx("option",{value:"",children:"הכל"}),r.map(h=>c.jsx("option",{value:h.id,children:h.name},h.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"חיפוש"}),c.jsx("input",{type:"text",value:o,onChange:h=>l(h.target.value),placeholder:"חפש מוצרים...",className:"input-field"})]})]})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map(h=>c.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[c.jsx("img",{src:h.image,alt:h.name,className:"w-full h-48 object-cover"}),c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"font-semibold text-lg mb-2",children:h.name}),c.jsx("p",{className:"text-gray-600 mb-4",children:h.description}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"text-xl font-bold",children:["₪",h.price]}),c.jsx("button",{onClick:()=>u(h),className:"btn-primary",children:"הוסף לסל"})]})]})]},h.id))}),e.length===0&&c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-600",children:"לא נמצאו מוצרים"})})]})}function rx(){const[t,e]=w.useState([]),[n,r]=w.useState(0);w.useEffect(()=>{const l=Nt();e(l),i(l)},[]);const i=l=>{const a=l.reduce((u,h)=>u+h.price*h.quantity,0);r(Math.round(a))},s=(l,a)=>{if(a<1)return;X0(l,a);const u=Nt();e(u),i(u)},o=l=>{Y0(l);const a=Nt();e(a),i(a)};return t.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"הסל שלך ריק"}),c.jsx(Xe,{to:"/products",className:"btn-primary",children:"המשך לקנייה"})]}):c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"סל הקניות"}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[c.jsx("div",{className:"divide-y",children:t.map(l=>c.jsxs("div",{className:"p-4 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[c.jsx("img",{src:l.image,alt:l.name,className:"w-20 h-20 object-cover rounded"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold",children:l.name}),c.jsxs("p",{className:"text-gray-600",children:["₪",l.price]})]})]}),c.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[c.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>s(l.id,l.quantity-1),className:"btn-secondary",children:"-"}),c.jsx("span",{className:"w-8 text-center",children:l.quantity}),c.jsx("button",{onClick:()=>s(l.id,l.quantity+1),className:"btn-secondary",children:"+"})]}),c.jsx("button",{onClick:()=>o(l.id),className:"text-red-600 hover:text-red-800",children:"הסר"})]})]},l.id))}),c.jsxs("div",{className:"p-4 bg-gray-50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"font-semibold",children:'סה"כ:'}),c.jsxs("span",{className:"text-xl font-bold",children:["₪",n]})]}),c.jsxs("div",{className:"flex justify-end space-x-4 space-x-reverse",children:[c.jsx(Xe,{to:"/products",className:"btn-secondary",children:"המשך לקנייה"}),c.jsx(Xe,{to:"/checkout",className:"btn-primary",children:"המשך לתשלום"})]})]})]})]})}var gh={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dm={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k=function(t,e){if(!t)throw jr(e)},jr=function(t){return new Error("Firebase Database ("+Dm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Am=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ix=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},mc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,h=s>>2,d=(s&3)<<4|l>>4;let f=(l&15)<<2|u>>6,y=u&63;a||(y=64,o||(f=64)),r.push(n[h],n[d],n[f],n[y])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(Am(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ix(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||d==null)throw new sx;const f=s<<2|l>>4;if(r.push(f),u!==64){const y=l<<4&240|u>>2;if(r.push(y),d!==64){const g=u<<6&192|d;r.push(g)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class sx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Lm=function(t){const e=Am(t);return mc.encodeByteArray(e,!0)},po=function(t){return Lm(t).replace(/\./g,"")},Ga=function(t){try{return mc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ox(t){return Mm(void 0,t)}function Mm(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!lx(n)||(t[n]=Mm(t[n],e[n]));return t}function lx(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ax(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ux=()=>ax().__FIREBASE_DEFAULTS__,cx=()=>{if(typeof process>"u"||typeof gh>"u")return;const t=gh.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},dx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ga(t[1]);return e&&JSON.parse(e)},Fm=()=>{try{return ux()||cx()||dx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},hx=t=>{var e,n;return(n=(e=Fm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},fx=t=>{const e=hx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},zm=()=>{var t;return(t=Fm())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ji{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function px(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[po(JSON.stringify(n)),po(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function mx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Um(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(mx())}function gx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function vx(){return Dm.NODE_ADMIN===!0}function yx(){try{return typeof indexedDB=="object"}catch{return!1}}function _x(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xx="FirebaseError";class Zi extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=xx,Object.setPrototypeOf(this,Zi.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Bm.prototype.create)}}class Bm{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?wx(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new Zi(i,l,r)}}function wx(t,e){return t.replace(Cx,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Cx=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oi(t){return JSON.parse(t)}function de(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wm=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Oi(Ga(s[0])||""),n=Oi(Ga(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},Ex=function(t){const e=Wm(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Sx=function(t){const e=Wm(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function wr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function vh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function mo(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Ka(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(yh(s)&&yh(o)){if(!Ka(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function yh(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nx(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kx{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=l^s&(o^l),h=1518500249):(u=s^o^l,h=1859775393):d<60?(u=s&o|l&(s|o),h=2400959708):(u=s^o^l,h=3395469782);const f=(i<<5|i>>>27)+u+a+h+r[d]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Yo(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ix=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,k(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},Xo=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(t){return t&&t._delegate?t._delegate:t}class Di{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tx{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Ji;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Px(e))try{this.getOrInitializeService({instanceIdentifier:xn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=xn){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=xn){return this.instances.has(e)}getOptions(e=xn){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Rx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=xn){return this.component?this.component.multipleInstances?e:xn:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Rx(t){return t===xn?void 0:t}function Px(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Tx(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Q;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(Q||(Q={}));const bx={debug:Q.DEBUG,verbose:Q.VERBOSE,info:Q.INFO,warn:Q.WARN,error:Q.ERROR,silent:Q.SILENT},Ox=Q.INFO,Dx={[Q.DEBUG]:"log",[Q.VERBOSE]:"log",[Q.INFO]:"info",[Q.WARN]:"warn",[Q.ERROR]:"error"},Ax=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Dx[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class $m{constructor(e){this.name=e,this._logLevel=Ox,this._logHandler=Ax,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in Q))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?bx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,Q.DEBUG,...e),this._logHandler(this,Q.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,Q.VERBOSE,...e),this._logHandler(this,Q.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,Q.INFO,...e),this._logHandler(this,Q.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,Q.WARN,...e),this._logHandler(this,Q.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,Q.ERROR,...e),this._logHandler(this,Q.ERROR,...e)}}const Lx=(t,e)=>e.some(n=>t instanceof n);let _h,xh;function Mx(){return _h||(_h=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Fx(){return xh||(xh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Vm=new WeakMap,qa=new WeakMap,Hm=new WeakMap,Ml=new WeakMap,gc=new WeakMap;function zx(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(tn(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Vm.set(n,t)}).catch(()=>{}),gc.set(e,t),e}function Ux(t){if(qa.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});qa.set(t,e)}let Ya={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return qa.get(t);if(e==="objectStoreNames")return t.objectStoreNames||Hm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return tn(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Bx(t){Ya=t(Ya)}function Wx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Fl(this),e,...n);return Hm.set(r,e.sort?e.sort():[e]),tn(r)}:Fx().includes(t)?function(...e){return t.apply(Fl(this),e),tn(Vm.get(this))}:function(...e){return tn(t.apply(Fl(this),e))}}function $x(t){return typeof t=="function"?Wx(t):(t instanceof IDBTransaction&&Ux(t),Lx(t,Mx())?new Proxy(t,Ya):t)}function tn(t){if(t instanceof IDBRequest)return zx(t);if(Ml.has(t))return Ml.get(t);const e=$x(t);return e!==t&&(Ml.set(t,e),gc.set(e,t)),e}const Fl=t=>gc.get(t);function Vx(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=tn(o);return r&&o.addEventListener("upgradeneeded",a=>{r(tn(o.result),a.oldVersion,a.newVersion,tn(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Hx=["get","getKey","getAll","getAllKeys","count"],Qx=["put","add","delete","clear"],zl=new Map;function wh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(zl.get(e))return zl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Qx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Hx.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return zl.set(e,s),s}Bx(t=>({...t,get:(e,n,r)=>wh(e,n)||t.get(e,n,r),has:(e,n)=>!!wh(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Kx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Kx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const Xa="@firebase/app",Ch="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jt=new $m("@firebase/app"),qx="@firebase/app-compat",Yx="@firebase/analytics-compat",Xx="@firebase/analytics",Jx="@firebase/app-check-compat",Zx="@firebase/app-check",ew="@firebase/auth",tw="@firebase/auth-compat",nw="@firebase/database",rw="@firebase/data-connect",iw="@firebase/database-compat",sw="@firebase/functions",ow="@firebase/functions-compat",lw="@firebase/installations",aw="@firebase/installations-compat",uw="@firebase/messaging",cw="@firebase/messaging-compat",dw="@firebase/performance",hw="@firebase/performance-compat",fw="@firebase/remote-config",pw="@firebase/remote-config-compat",mw="@firebase/storage",gw="@firebase/storage-compat",vw="@firebase/firestore",yw="@firebase/vertexai-preview",_w="@firebase/firestore-compat",xw="firebase",ww="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ja="[DEFAULT]",Cw={[Xa]:"fire-core",[qx]:"fire-core-compat",[Xx]:"fire-analytics",[Yx]:"fire-analytics-compat",[Zx]:"fire-app-check",[Jx]:"fire-app-check-compat",[ew]:"fire-auth",[tw]:"fire-auth-compat",[nw]:"fire-rtdb",[rw]:"fire-data-connect",[iw]:"fire-rtdb-compat",[sw]:"fire-fn",[ow]:"fire-fn-compat",[lw]:"fire-iid",[aw]:"fire-iid-compat",[uw]:"fire-fcm",[cw]:"fire-fcm-compat",[dw]:"fire-perf",[hw]:"fire-perf-compat",[fw]:"fire-rc",[pw]:"fire-rc-compat",[mw]:"fire-gcs",[gw]:"fire-gcs-compat",[vw]:"fire-fst",[_w]:"fire-fst-compat",[yw]:"fire-vertex","fire-js":"fire-js",[xw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const go=new Map,Ew=new Map,Za=new Map;function Eh(t,e){try{t.container.addComponent(e)}catch(n){jt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function vo(t){const e=t.name;if(Za.has(e))return jt.debug(`There were multiple attempts to register component ${e}.`),!1;Za.set(e,t);for(const n of go.values())Eh(n,t);for(const n of Ew.values())Eh(n,t);return!0}function Sw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},nn=new Bm("app","Firebase",Nw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kw{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Di("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw nn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Iw=ww;function Qm(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:Ja,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw nn.create("bad-app-name",{appName:String(i)});if(n||(n=zm()),!n)throw nn.create("no-options");const s=go.get(i);if(s){if(Ka(n,s.options)&&Ka(r,s.config))return s;throw nn.create("duplicate-app",{appName:i})}const o=new jx(i);for(const a of Za.values())o.addComponent(a);const l=new kw(n,r,o);return go.set(i,l),l}function Tw(t=Ja){const e=go.get(t);if(!e&&t===Ja&&zm())return Qm();if(!e)throw nn.create("no-app",{appName:t});return e}function dr(t,e,n){var r;let i=(r=Cw[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),jt.warn(l.join(" "));return}vo(new Di(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw="firebase-heartbeat-database",Pw=1,Ai="firebase-heartbeat-store";let Ul=null;function Gm(){return Ul||(Ul=Vx(Rw,Pw,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Ai)}catch(n){console.warn(n)}}}}).catch(t=>{throw nn.create("idb-open",{originalErrorMessage:t.message})})),Ul}async function jw(t){try{const n=(await Gm()).transaction(Ai),r=await n.objectStore(Ai).get(Km(t));return await n.done,r}catch(e){if(e instanceof Zi)jt.warn(e.message);else{const n=nn.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});jt.warn(n.message)}}}async function Sh(t,e){try{const r=(await Gm()).transaction(Ai,"readwrite");await r.objectStore(Ai).put(e,Km(t)),await r.done}catch(n){if(n instanceof Zi)jt.warn(n.message);else{const r=nn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});jt.warn(r.message)}}}function Km(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=1024,Ow=30*24*60*60*1e3;class Dw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Lw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Nh();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Ow}),this._storage.overwrite(this._heartbeatsCache))}catch(r){jt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Nh(),{heartbeatsToSend:r,unsentEntries:i}=Aw(this._heartbeatsCache.heartbeats),s=po(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return jt.warn(n),""}}}function Nh(){return new Date().toISOString().substring(0,10)}function Aw(t,e=bw){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),kh(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),kh(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Lw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return yx()?_x().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await jw(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Sh(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function kh(t){return po(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mw(t){vo(new Di("platform-logger",e=>new Gx(e),"PRIVATE")),vo(new Di("heartbeat",e=>new Dw(e),"PRIVATE")),dr(Xa,Ch,t),dr(Xa,Ch,"esm2017"),dr("fire-js","")}Mw("");var Fw="firebase",zw="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */dr(Fw,zw,"app");var Ih={};const Th="@firebase/database",Rh="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let qm="";function Uw(t){qm=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bw{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),de(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Oi(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ww{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return yt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ym=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Bw(e)}}catch{}return new Ww},Nn=Ym("localStorage"),$w=Ym("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hr=new $m("@firebase/database"),Vw=function(){let t=1;return function(){return t++}}(),Xm=function(t){const e=Ix(t),n=new kx;n.update(e);const r=n.digest();return mc.encodeByteArray(r)},es=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=es.apply(null,r):typeof r=="object"?e+=de(r):e+=r,e+=" "}return e};let ui=null,Ph=!0;const Hw=function(t,e){k(!0,"Can't turn on custom loggers persistently."),hr.logLevel=Q.VERBOSE,ui=hr.log.bind(hr)},_e=function(...t){if(Ph===!0&&(Ph=!1,ui===null&&$w.get("logging_enabled")===!0&&Hw()),ui){const e=es.apply(null,t);ui(e)}},ts=function(t){return function(...e){_e(t,...e)}},eu=function(...t){const e="FIREBASE INTERNAL ERROR: "+es(...t);hr.error(e)},bt=function(...t){const e=`FIREBASE FATAL ERROR: ${es(...t)}`;throw hr.error(e),new Error(e)},Pe=function(...t){const e="FIREBASE WARNING: "+es(...t);hr.warn(e)},Qw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&Pe("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},vc=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Gw=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Cr="[MIN_NAME]",On="[MAX_NAME]",Bn=function(t,e){if(t===e)return 0;if(t===Cr||e===On)return-1;if(e===Cr||t===On)return 1;{const n=jh(t),r=jh(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Kw=function(t,e){return t===e?0:t<e?-1:1},Qr=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+de(e))},yc=function(t){if(typeof t!="object"||t===null)return de(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=de(e[r]),n+=":",n+=yc(t[e[r]]);return n+="}",n},Jm=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Ce(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const Zm=function(t){k(!vc(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const h=u.join("");let d="";for(a=0;a<64;a+=8){let f=parseInt(h.substr(a,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},qw=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},Yw=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function Xw(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const Jw=new RegExp("^-?(0*)\\d{1,10}$"),Zw=-2147483648,eC=2147483647,jh=function(t){if(Jw.test(t)){const e=Number(t);if(e>=Zw&&e<=eC)return e}return null},br=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw Pe("Exception was thrown by user callback.",n),e},Math.floor(0))}},tC=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},ci=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nC{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){Pe(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rC{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(_e("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',Pe(e)}}class Bs{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Bs.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c="5",eg="v",tg="s",ng="r",rg="f",ig=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,sg="ls",og="p",tu="ac",lg="websocket",ag="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(e,n,r,i,s=!1,o="",l=!1,a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Nn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Nn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function iC(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function cg(t,e,n){k(typeof e=="string","typeof type must == string"),k(typeof n=="object","typeof params must == object");let r;if(e===lg)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===ag)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);iC(t)&&(n.ns=t.namespace);const i=[];return Ce(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sC{constructor(){this.counters_={}}incrementCounter(e,n=1){yt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return ox(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bl={},Wl={};function xc(t){const e=t.toString();return Bl[e]||(Bl[e]=new sC),Bl[e]}function oC(t,e){const n=t.toString();return Wl[n]||(Wl[n]=e()),Wl[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&br(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bh="start",aC="close",uC="pLPCommand",cC="pRTLPCB",dg="id",hg="pw",fg="ser",dC="cb",hC="seg",fC="ts",pC="d",mC="dframe",pg=1870,mg=30,gC=pg-mg,vC=25e3,yC=3e4;class ir{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=ts(e),this.stats_=xc(n),this.urlFn=a=>(this.appCheckToken&&(a[tu]=this.appCheckToken),cg(n,ag,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new lC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(yC)),Gw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new wc((...s)=>{const[o,l,a,u,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===bh)this.id=l,this.password=a;else if(o===aC)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[bh]="t",r[fg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[dC]=this.scriptTagHolder.uniqueCallbackIdentifier),r[eg]=_c,this.transportSessionId&&(r[tg]=this.transportSessionId),this.lastSessionId&&(r[sg]=this.lastSessionId),this.applicationId&&(r[og]=this.applicationId),this.appCheckToken&&(r[tu]=this.appCheckToken),typeof location<"u"&&location.hostname&&ig.test(location.hostname)&&(r[ng]=rg);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){ir.forceAllow_=!0}static forceDisallow(){ir.forceDisallow_=!0}static isAvailable(){return ir.forceAllow_?!0:!ir.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!qw()&&!Yw()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=de(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Lm(n),i=Jm(r,gC);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[mC]="t",r[dg]=e,r[hg]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=de(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class wc{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=Vw(),window[uC+this.uniqueCallbackIdentifier]=e,window[cC+this.uniqueCallbackIdentifier]=n,this.myIFrame=wc.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){_e("frame writing exception"),l.stack&&_e(l.stack),_e(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||_e("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[dg]=this.myID,e[hg]=this.myPW,e[fg]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+mg+r.length<=pg;){const o=this.pendingSegs.shift();r=r+"&"+hC+i+"="+o.seg+"&"+fC+i+"="+o.ts+"&"+pC+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(vC)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{_e("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _C=16384,xC=45e3;let yo=null;typeof MozWebSocket<"u"?yo=MozWebSocket:typeof WebSocket<"u"&&(yo=WebSocket);class lt{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=ts(this.connId),this.stats_=xc(n),this.connURL=lt.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[eg]=_c,typeof location<"u"&&location.hostname&&ig.test(location.hostname)&&(o[ng]=rg),n&&(o[tg]=n),r&&(o[sg]=r),i&&(o[tu]=i),s&&(o[og]=s),cg(e,lg,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Nn.set("previous_websocket_failure",!0);try{let r;vx(),this.mySock=new yo(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){lt.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&yo!==null&&!lt.forceDisallow_}static previouslyFailed(){return Nn.isInMemoryStorage||Nn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Nn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Oi(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(k(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=de(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Jm(n,_C);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(xC))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}lt.responsesRequiredToBeHealthy=2;lt.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Li{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[ir,lt]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=lt&&lt.isAvailable();let r=n&&!lt.previouslyFailed();if(e.webSocketOnly&&(n||Pe("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[lt];else{const i=this.transports_=[];for(const s of Li.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);Li.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}Li.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wC=6e4,CC=5e3,EC=10*1024,SC=100*1024,$l="t",Oh="d",NC="s",Dh="r",kC="e",Ah="o",Lh="a",Mh="n",Fh="p",IC="h";class TC{constructor(e,n,r,i,s,o,l,a,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=ts("c:"+this.id+":"),this.transportManager_=new Li(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=ci(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>SC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>EC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if($l in e){const n=e[$l];n===Lh?this.upgradeIfSecondaryHealthy_():n===Dh?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Ah&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=Qr("t",e),r=Qr("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Fh,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:Lh,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Mh,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=Qr("t",e),r=Qr("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=Qr($l,e);if(Oh in e){const r=e[Oh];if(n===IC){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Mh){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===NC?this.onConnectionShutdown_(r):n===Dh?this.onReset_(r):n===kC?eu("Server Error: "+r):n===Ah?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):eu("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),_c!==r&&Pe("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),ci(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(wC))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):ci(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(CC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Fh,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Nn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gg{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vg{constructor(e){this.allowedEvents_=e,this.listeners_={},k(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){k(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _o extends vg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Um()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new _o}getInitialEvent(e){return k(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zh=32,Uh=768;class V{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function W(){return new V("")}function M(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function an(t){return t.pieces_.length-t.pieceNum_}function G(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new V(t.pieces_,e)}function Cc(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function RC(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Mi(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function yg(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new V(e,0)}function re(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof V)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new V(n,0)}function z(t){return t.pieceNum_>=t.pieces_.length}function Te(t,e){const n=M(t),r=M(e);if(n===null)return e;if(n===r)return Te(G(t),G(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function PC(t,e){const n=Mi(t,0),r=Mi(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Bn(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function Ec(t,e){if(an(t)!==an(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function Je(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(an(t)>an(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class jC{constructor(e,n){this.errorPrefix_=n,this.parts_=Mi(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=Xo(this.parts_[r]);_g(this)}}function bC(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=Xo(e),_g(t)}function OC(t){const e=t.parts_.pop();t.byteLength_-=Xo(e),t.parts_.length>0&&(t.byteLength_-=1)}function _g(t){if(t.byteLength_>Uh)throw new Error(t.errorPrefix_+"has a key path longer than "+Uh+" bytes ("+t.byteLength_+").");if(t.parts_.length>zh)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+zh+") or object contains a cycle "+wn(t))}function wn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sc extends vg{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Sc}getInitialEvent(e){return k(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gr=1e3,DC=60*5*1e3,Bh=30*1e3,AC=1.3,LC=3e4,MC="server_kill",Wh=3;class kt extends gg{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=kt.nextPersistentConnectionId_++,this.log_=ts("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Gr,this.maxReconnectDelay_=DC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Sc.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&_o.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(de(s)),k(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new Ji,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),k(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),k(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;kt.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&yt(e,"w")){const r=wr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();Pe(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Sx(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Bh)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Ex(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),k(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+de(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):eu("Unrecognized action received from server: "+de(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){k(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Gr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Gr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>LC&&(this.reconnectDelay_=Gr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*AC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+kt.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(d){k(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?_e("getToken() completed but was canceled"):(_e("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,l=new TC(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,y=>{Pe(y+" ("+this.repoInfo_.toString()+")"),this.interrupt(MC)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&Pe(d),a())}}}interrupt(e){_e("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){_e("Resuming connection for reason: "+e),delete this.interruptReasons_[e],vh(this.interruptReasons_)&&(this.reconnectDelay_=Gr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>yc(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new V(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){_e("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Wh&&(this.reconnectDelay_=Bh,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){_e("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Wh&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+qm.replace(/\./g,"-")]=1,Um()?e["framework.cordova"]=1:gx()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=_o.getInstance().currentlyOnline();return vh(this.interruptReasons_)&&e}}kt.nextPersistentConnectionId_=0;kt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new F(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jo{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new F(Cr,e),i=new F(Cr,n);return this.compare(r,i)!==0}minPost(){return F.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Is;class xg extends Jo{static get __EMPTY_NODE(){return Is}static set __EMPTY_NODE(e){Is=e}compare(e,n){return Bn(e.name,n.name)}isDefinedOn(e){throw jr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return F.MIN}maxPost(){return new F(On,Is)}makePost(e,n){return k(typeof e=="string","KeyIndex indexValue must always be a string."),new F(e,Is)}toString(){return".key"}}const fr=new xg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ts{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class me{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??me.RED,this.left=i??Le.EMPTY_NODE,this.right=s??Le.EMPTY_NODE}copy(e,n,r,i,s){return new me(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Le.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Le.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,me.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,me.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}me.RED=!0;me.BLACK=!1;class FC{copy(e,n,r,i,s){return this}insert(e,n,r){return new me(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Le{constructor(e,n=Le.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Le(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,me.BLACK,null,null))}remove(e){return new Le(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,me.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new Ts(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new Ts(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new Ts(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new Ts(this.root_,null,this.comparator_,!0,e)}}Le.EMPTY_NODE=new FC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zC(t,e){return Bn(t.name,e.name)}function Nc(t,e){return Bn(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let nu;function UC(t){nu=t}const wg=function(t){return typeof t=="number"?"number:"+Zm(t):"string:"+t},Cg=function(t){if(t.isLeafNode()){const e=t.val();k(typeof e=="string"||typeof e=="number"||typeof e=="object"&&yt(e,".sv"),"Priority must be a string or number.")}else k(t===nu||t.isEmpty(),"priority of unexpected type.");k(t===nu||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let $h;class fe{constructor(e,n=fe.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,k(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),Cg(this.priorityNode_)}static set __childrenNodeConstructor(e){$h=e}static get __childrenNodeConstructor(){return $h}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new fe(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:fe.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return z(e)?this:M(e)===".priority"?this.priorityNode_:fe.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:fe.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=M(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(k(r!==".priority"||an(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,fe.__childrenNodeConstructor.EMPTY_NODE.updateChild(G(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+wg(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=Zm(this.value_):e+=this.value_,this.lazyHash_=Xm(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===fe.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof fe.__childrenNodeConstructor?-1:(k(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=fe.VALUE_TYPE_ORDER.indexOf(n),s=fe.VALUE_TYPE_ORDER.indexOf(r);return k(i>=0,"Unknown leaf type: "+n),k(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}fe.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Eg,Sg;function BC(t){Eg=t}function WC(t){Sg=t}class $C extends Jo{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Bn(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return F.MIN}maxPost(){return new F(On,new fe("[PRIORITY-POST]",Sg))}makePost(e,n){const r=Eg(e);return new F(n,new fe("[PRIORITY-POST]",r))}toString(){return".priority"}}const ie=new $C;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VC=Math.log(2);class HC{constructor(e){const n=s=>parseInt(Math.log(s)/VC,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const xo=function(t,e,n,r){t.sort(e);const i=function(a,u){const h=u-a;let d,f;if(h===0)return null;if(h===1)return d=t[a],f=n?n(d):d,new me(f,d.node,me.BLACK,null,null);{const y=parseInt(h/2,10)+a,g=i(a,y),x=i(y+1,u);return d=t[y],f=n?n(d):d,new me(f,d.node,me.BLACK,g,x)}},s=function(a){let u=null,h=null,d=t.length;const f=function(g,x){const S=d-g,m=d;d-=g;const p=i(S+1,m),v=t[S],C=n?n(v):v;y(new me(C,v.node,x,null,p))},y=function(g){u?(u.left=g,u=g):(h=g,u=g)};for(let g=0;g<a.count;++g){const x=a.nextBitIsOne(),S=Math.pow(2,a.count-(g+1));x?f(S,me.BLACK):(f(S,me.BLACK),f(S,me.RED))}return h},o=new HC(t.length),l=s(o);return new Le(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Vl;const Vn={};class Et{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return k(Vn&&ie,"ChildrenNode.ts has not been loaded"),Vl=Vl||new Et({".priority":Vn},{".priority":ie}),Vl}get(e){const n=wr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Le?n:null}hasIndex(e){return yt(this.indexSet_,e.toString())}addIndex(e,n){k(e!==fr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(F.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=xo(r,e.getCompare()):l=Vn;const a=e.toString(),u=Object.assign({},this.indexSet_);u[a]=e;const h=Object.assign({},this.indexes_);return h[a]=l,new Et(h,u)}addToIndexes(e,n){const r=mo(this.indexes_,(i,s)=>{const o=wr(this.indexSet_,s);if(k(o,"Missing index implementation for "+s),i===Vn)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(F.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),xo(l,o.getCompare())}else return Vn;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new F(e.name,l))),a.insert(e,e.node)}});return new Et(r,this.indexSet_)}removeFromIndexes(e,n){const r=mo(this.indexes_,i=>{if(i===Vn)return i;{const s=n.get(e.name);return s?i.remove(new F(e.name,s)):i}});return new Et(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kr;class O{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&Cg(this.priorityNode_),this.children_.isEmpty()&&k(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Kr||(Kr=new O(new Le(Nc),null,Et.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Kr}updatePriority(e){return this.children_.isEmpty()?this:new O(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Kr:n}}getChild(e){const n=M(e);return n===null?this:this.getImmediateChild(n).getChild(G(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(k(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new F(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Kr:this.priorityNode_;return new O(i,o,s)}}updateChild(e,n){const r=M(e);if(r===null)return n;{k(M(e)!==".priority"||an(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(G(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ie,(o,l)=>{n[o]=l.val(e),r++,s&&O.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+wg(this.getPriority().val())+":"),this.forEachChild(ie,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":Xm(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new F(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new F(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new F(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,F.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,F.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ns?-1:0}withIndex(e){if(e===fr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new O(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===fr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ie),i=n.getIterator(ie);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===fr?null:this.indexMap_.get(e.toString())}}O.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class QC extends O{constructor(){super(new Le(Nc),O.EMPTY_NODE,Et.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return O.EMPTY_NODE}isEmpty(){return!1}}const ns=new QC;Object.defineProperties(F,{MIN:{value:new F(Cr,O.EMPTY_NODE)},MAX:{value:new F(On,ns)}});xg.__EMPTY_NODE=O.EMPTY_NODE;fe.__childrenNodeConstructor=O;UC(ns);WC(ns);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const GC=!0;function ce(t,e=null){if(t===null)return O.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),k(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new fe(n,ce(e))}if(!(t instanceof Array)&&GC){const n=[];let r=!1;if(Ce(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=ce(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new F(o,a)))}}),n.length===0)return O.EMPTY_NODE;const s=xo(n,zC,o=>o.name,Nc);if(r){const o=xo(n,ie.getCompare());return new O(s,ce(e),new Et({".priority":o},{".priority":ie}))}else return new O(s,ce(e),Et.Default)}else{let n=O.EMPTY_NODE;return Ce(t,(r,i)=>{if(yt(t,r)&&r.substring(0,1)!=="."){const s=ce(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(ce(e))}}BC(ce);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KC extends Jo{constructor(e){super(),this.indexPath_=e,k(!z(e)&&M(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Bn(e.name,n.name):s}makePost(e,n){const r=ce(e),i=O.EMPTY_NODE.updateChild(this.indexPath_,r);return new F(n,i)}maxPost(){const e=O.EMPTY_NODE.updateChild(this.indexPath_,ns);return new F(On,e)}toString(){return Mi(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qC extends Jo{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Bn(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return F.MIN}maxPost(){return F.MAX}makePost(e,n){const r=ce(e);return new F(n,r)}toString(){return".value"}}const YC=new qC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ng(t){return{type:"value",snapshotNode:t}}function Er(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Fi(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function zi(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function XC(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kc{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){k(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Fi(n,l)):k(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(Er(n,r)):o.trackChildChange(zi(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ie,(i,s)=>{n.hasChild(i)||r.trackChildChange(Fi(i,s))}),n.isLeafNode()||n.forEachChild(ie,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(zi(i,s,o))}else r.trackChildChange(Er(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?O.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ui{constructor(e){this.indexedFilter_=new kc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=Ui.getStartPost_(e),this.endPost_=Ui.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new F(n,r))||(r=O.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=O.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(O.EMPTY_NODE);const s=this;return n.forEachChild(ie,(o,l)=>{s.matches(new F(o,l))||(i=i.updateImmediateChild(o,O.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JC{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new Ui(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new F(n,r))||(r=O.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=O.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=O.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(O.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,O.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,y)=>d(y,f)}else o=this.index_.getCompare();const l=e;k(l.numChildren()===this.limit_,"");const a=new F(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(a);if(l.hasChild(n)){const d=l.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const y=f==null?1:o(f,a);if(h&&!r.isEmpty()&&y>=0)return s!=null&&s.trackChildChange(zi(n,r,d)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Fi(n,d));const x=l.updateImmediateChild(n,O.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(Er(f.name,f.node)),x.updateImmediateChild(f.name,f.node)):x}}else return r.isEmpty()?e:h&&o(u,a)>=0?(s!=null&&(s.trackChildChange(Fi(u.name,u.node)),s.trackChildChange(Er(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,O.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ie}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return k(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return k(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Cr}hasEnd(){return this.endSet_}getIndexEndValue(){return k(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return k(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:On}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return k(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ie}copy(){const e=new Ic;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function ZC(t){return t.loadsAllData()?new kc(t.getIndex()):t.hasLimit()?new JC(t):new Ui(t)}function Vh(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ie?n="$priority":t.index_===YC?n="$value":t.index_===fr?n="$key":(k(t.index_ instanceof KC,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=de(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=de(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+de(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=de(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+de(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Hh(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ie&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wo extends gg{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=ts("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(k(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=wo.getListenId_(e,r),l={};this.listens_[o]=l;const a=Vh(e._queryParams);this.restRequest_(s+".json",a,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),wr(this.listens_,o)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",i(f,null)}})}unlisten(e,n){const r=wo.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Vh(e._queryParams),r=e._path.toString(),i=new Ji;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Nx(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Oi(l.responseText)}catch{Pe("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&Pe("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1{constructor(){this.rootNode_=O.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Co(){return{value:null,children:new Map}}function kg(t,e,n){if(z(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=M(e);t.children.has(r)||t.children.set(r,Co());const i=t.children.get(r);e=G(e),kg(i,e,n)}}function ru(t,e,n){t.value!==null?n(e,t.value):t1(t,(r,i)=>{const s=new V(e.toString()+"/"+r);ru(i,s,n)})}function t1(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n1{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Ce(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qh=10*1e3,r1=30*1e3,i1=5*60*1e3;class s1{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new n1(e);const r=Qh+(r1-Qh)*Math.random();ci(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Ce(e,(i,s)=>{s>0&&yt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),ci(this.reportStats_.bind(this),Math.floor(Math.random()*2*i1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var at;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(at||(at={}));function Tc(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function Rc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Pc(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eo{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=at.ACK_USER_WRITE,this.source=Tc()}operationForChild(e){if(z(this.path)){if(this.affectedTree.value!=null)return k(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new V(e));return new Eo(W(),n,this.revert)}}else return k(M(this.path)===e,"operationForChild called for unrelated child."),new Eo(G(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bi{constructor(e,n){this.source=e,this.path=n,this.type=at.LISTEN_COMPLETE}operationForChild(e){return z(this.path)?new Bi(this.source,W()):new Bi(this.source,G(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=at.OVERWRITE}operationForChild(e){return z(this.path)?new Dn(this.source,W(),this.snap.getImmediateChild(e)):new Dn(this.source,G(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sr{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=at.MERGE}operationForChild(e){if(z(this.path)){const n=this.children.subtree(new V(e));return n.isEmpty()?null:n.value?new Dn(this.source,W(),n.value):new Sr(this.source,W(),n)}else return k(M(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Sr(this.source,G(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class un{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(z(e))return this.isFullyInitialized()&&!this.filtered_;const n=M(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class o1{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function l1(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(XC(o.childName,o.snapshotNode))}),qr(t,i,"child_removed",e,r,n),qr(t,i,"child_added",e,r,n),qr(t,i,"child_moved",s,r,n),qr(t,i,"child_changed",e,r,n),qr(t,i,"value",e,r,n),i}function qr(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>u1(t,l,a)),o.forEach(l=>{const a=a1(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function a1(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function u1(t,e,n){if(e.childName==null||n.childName==null)throw jr("Should only compare child_ events.");const r=new F(e.childName,e.snapshotNode),i=new F(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zo(t,e){return{eventCache:t,serverCache:e}}function di(t,e,n,r){return Zo(new un(e,n,r),t.serverCache)}function Ig(t,e,n,r){return Zo(t.eventCache,new un(e,n,r))}function So(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function An(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Hl;const c1=()=>(Hl||(Hl=new Le(Kw)),Hl);class H{constructor(e,n=c1()){this.value=e,this.children=n}static fromObject(e){let n=new H(null);return Ce(e,(r,i)=>{n=n.set(new V(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:W(),value:this.value};if(z(e))return null;{const r=M(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(G(e),n);return s!=null?{path:re(new V(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(z(e))return this;{const n=M(e),r=this.children.get(n);return r!==null?r.subtree(G(e)):new H(null)}}set(e,n){if(z(e))return new H(n,this.children);{const r=M(e),s=(this.children.get(r)||new H(null)).set(G(e),n),o=this.children.insert(r,s);return new H(this.value,o)}}remove(e){if(z(e))return this.children.isEmpty()?new H(null):new H(null,this.children);{const n=M(e),r=this.children.get(n);if(r){const i=r.remove(G(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new H(null):new H(this.value,s)}else return this}}get(e){if(z(e))return this.value;{const n=M(e),r=this.children.get(n);return r?r.get(G(e)):null}}setTree(e,n){if(z(e))return n;{const r=M(e),s=(this.children.get(r)||new H(null)).setTree(G(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new H(this.value,o)}}fold(e){return this.fold_(W(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(re(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,W(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(z(e))return null;{const s=M(e),o=this.children.get(s);return o?o.findOnPath_(G(e),re(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,W(),n)}foreachOnPath_(e,n,r){if(z(e))return this;{this.value&&r(n,this.value);const i=M(e),s=this.children.get(i);return s?s.foreachOnPath_(G(e),re(n,i),r):new H(null)}}foreach(e){this.foreach_(W(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(re(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dt{constructor(e){this.writeTree_=e}static empty(){return new dt(new H(null))}}function hi(t,e,n){if(z(e))return new dt(new H(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Te(i,e);return s=s.updateChild(o,n),new dt(t.writeTree_.set(i,s))}else{const i=new H(n),s=t.writeTree_.setTree(e,i);return new dt(s)}}}function iu(t,e,n){let r=t;return Ce(n,(i,s)=>{r=hi(r,re(e,i),s)}),r}function Gh(t,e){if(z(e))return dt.empty();{const n=t.writeTree_.setTree(e,new H(null));return new dt(n)}}function su(t,e){return Wn(t,e)!=null}function Wn(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Te(n.path,e)):null}function Kh(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ie,(r,i)=>{e.push(new F(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new F(r,i.value))}),e}function rn(t,e){if(z(e))return t;{const n=Wn(t,e);return n!=null?new dt(new H(n)):new dt(t.writeTree_.subtree(e))}}function ou(t){return t.writeTree_.isEmpty()}function Nr(t,e){return Tg(W(),t.writeTree_,e)}function Tg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(k(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=Tg(re(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(re(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(t,e){return bg(e,t)}function d1(t,e,n,r,i){k(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=hi(t.visibleWrites,e,n)),t.lastWriteId=r}function h1(t,e,n,r){k(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=iu(t.visibleWrites,e,n),t.lastWriteId=r}function f1(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function p1(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);k(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&m1(l,r.path)?i=!1:Je(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return g1(t),!0;if(r.snap)t.visibleWrites=Gh(t.visibleWrites,r.path);else{const l=r.children;Ce(l,a=>{t.visibleWrites=Gh(t.visibleWrites,re(r.path,a))})}return!0}else return!1}function m1(t,e){if(t.snap)return Je(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&Je(re(t.path,n),e))return!0;return!1}function g1(t){t.visibleWrites=Rg(t.allWrites,v1,W()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function v1(t){return t.visible}function Rg(t,e,n){let r=dt.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)Je(n,o)?(l=Te(n,o),r=hi(r,l,s.snap)):Je(o,n)&&(l=Te(o,n),r=hi(r,W(),s.snap.getChild(l)));else if(s.children){if(Je(n,o))l=Te(n,o),r=iu(r,l,s.children);else if(Je(o,n))if(l=Te(o,n),z(l))r=iu(r,W(),s.children);else{const a=wr(s.children,M(l));if(a){const u=a.getChild(G(l));r=hi(r,W(),u)}}}else throw jr("WriteRecord should have .snap or .children")}}return r}function Pg(t,e,n,r,i){if(!r&&!i){const s=Wn(t.visibleWrites,e);if(s!=null)return s;{const o=rn(t.visibleWrites,e);if(ou(o))return n;if(n==null&&!su(o,W()))return null;{const l=n||O.EMPTY_NODE;return Nr(o,l)}}}else{const s=rn(t.visibleWrites,e);if(!i&&ou(s))return n;if(!i&&n==null&&!su(s,W()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(Je(u.path,e)||Je(e,u.path))},l=Rg(t.allWrites,o,e),a=n||O.EMPTY_NODE;return Nr(l,a)}}}function y1(t,e,n){let r=O.EMPTY_NODE;const i=Wn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ie,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=rn(t.visibleWrites,e);return n.forEachChild(ie,(o,l)=>{const a=Nr(rn(s,new V(o)),l);r=r.updateImmediateChild(o,a)}),Kh(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=rn(t.visibleWrites,e);return Kh(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function _1(t,e,n,r,i){k(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=re(e,n);if(su(t.visibleWrites,s))return null;{const o=rn(t.visibleWrites,s);return ou(o)?i.getChild(n):Nr(o,i.getChild(n))}}function x1(t,e,n,r){const i=re(e,n),s=Wn(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=rn(t.visibleWrites,i);return Nr(o,r.getNode().getImmediateChild(n))}else return null}function w1(t,e){return Wn(t.visibleWrites,e)}function C1(t,e,n,r,i,s,o){let l;const a=rn(t.visibleWrites,e),u=Wn(a,W());if(u!=null)l=u;else if(n!=null)l=Nr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const h=[],d=o.getCompare(),f=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let y=f.getNext();for(;y&&h.length<i;)d(y,r)!==0&&h.push(y),y=f.getNext();return h}else return[]}function E1(){return{visibleWrites:dt.empty(),allWrites:[],lastWriteId:-1}}function No(t,e,n,r){return Pg(t.writeTree,t.treePath,e,n,r)}function jc(t,e){return y1(t.writeTree,t.treePath,e)}function qh(t,e,n,r){return _1(t.writeTree,t.treePath,e,n,r)}function ko(t,e){return w1(t.writeTree,re(t.treePath,e))}function S1(t,e,n,r,i,s){return C1(t.writeTree,t.treePath,e,n,r,i,s)}function bc(t,e,n){return x1(t.writeTree,t.treePath,e,n)}function jg(t,e){return bg(re(t.treePath,e),t.writeTree)}function bg(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class N1{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;k(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),k(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,zi(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Fi(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,Er(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,zi(r,e.snapshotNode,i.oldSnap));else throw jr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class k1{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Og=new k1;class Oc{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new un(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return bc(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:An(this.viewCache_),s=S1(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I1(t){return{filter:t}}function T1(t,e){k(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),k(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function R1(t,e,n,r,i){const s=new N1;let o,l;if(n.type===at.OVERWRITE){const u=n;u.source.fromUser?o=lu(t,e,u.path,u.snap,r,i,s):(k(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!z(u.path),o=Io(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===at.MERGE){const u=n;u.source.fromUser?o=j1(t,e,u.path,u.children,r,i,s):(k(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=au(t,e,u.path,u.children,r,i,l,s))}else if(n.type===at.ACK_USER_WRITE){const u=n;u.revert?o=D1(t,e,u.path,r,i,s):o=b1(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===at.LISTEN_COMPLETE)o=O1(t,e,n.path,r,s);else throw jr("Unknown operation type: "+n.type);const a=s.getChanges();return P1(e,o,a),{viewCache:o,changes:a}}function P1(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=So(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Ng(So(e)))}}function Dg(t,e,n,r,i,s){const o=e.eventCache;if(ko(r,n)!=null)return e;{let l,a;if(z(n))if(k(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=An(e),h=u instanceof O?u:O.EMPTY_NODE,d=jc(r,h);l=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=No(r,An(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=M(n);if(u===".priority"){k(an(n)===1,"Can't have a priority with additional path components");const h=o.getNode();a=e.serverCache.getNode();const d=qh(r,n,h,a);d!=null?l=t.filter.updatePriority(h,d):l=o.getNode()}else{const h=G(n);let d;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const f=qh(r,n,o.getNode(),a);f!=null?d=o.getNode().getImmediateChild(u).updateChild(h,f):d=o.getNode().getImmediateChild(u)}else d=bc(r,u,e.serverCache);d!=null?l=t.filter.updateChild(o.getNode(),u,d,h,i,s):l=o.getNode()}}return di(e,l,o.isFullyInitialized()||z(n),t.filter.filtersNodes())}}function Io(t,e,n,r,i,s,o,l){const a=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(z(n))u=h.updateFullNode(a.getNode(),r,null);else if(h.filtersNodes()&&!a.isFiltered()){const y=a.getNode().updateChild(n,r);u=h.updateFullNode(a.getNode(),y,null)}else{const y=M(n);if(!a.isCompleteForPath(n)&&an(n)>1)return e;const g=G(n),S=a.getNode().getImmediateChild(y).updateChild(g,r);y===".priority"?u=h.updatePriority(a.getNode(),S):u=h.updateChild(a.getNode(),y,S,g,Og,null)}const d=Ig(e,u,a.isFullyInitialized()||z(n),h.filtersNodes()),f=new Oc(i,d,s);return Dg(t,d,n,i,f,l)}function lu(t,e,n,r,i,s,o){const l=e.eventCache;let a,u;const h=new Oc(i,e,s);if(z(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=di(e,u,!0,t.filter.filtersNodes());else{const d=M(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=di(e,u,l.isFullyInitialized(),l.isFiltered());else{const f=G(n),y=l.getNode().getImmediateChild(d);let g;if(z(f))g=r;else{const x=h.getCompleteChild(d);x!=null?Cc(f)===".priority"&&x.getChild(yg(f)).isEmpty()?g=x:g=x.updateChild(f,r):g=O.EMPTY_NODE}if(y.equals(g))a=e;else{const x=t.filter.updateChild(l.getNode(),d,g,f,h,o);a=di(e,x,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function Yh(t,e){return t.eventCache.isCompleteForChild(e)}function j1(t,e,n,r,i,s,o){let l=e;return r.foreach((a,u)=>{const h=re(n,a);Yh(e,M(h))&&(l=lu(t,l,h,u,i,s,o))}),r.foreach((a,u)=>{const h=re(n,a);Yh(e,M(h))||(l=lu(t,l,h,u,i,s,o))}),l}function Xh(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function au(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;z(n)?u=r:u=new H(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(h.hasChild(d)){const y=e.serverCache.getNode().getImmediateChild(d),g=Xh(t,y,f);a=Io(t,a,new V(d),g,i,s,o,l)}}),u.children.inorderTraversal((d,f)=>{const y=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!h.hasChild(d)&&!y){const g=e.serverCache.getNode().getImmediateChild(d),x=Xh(t,g,f);a=Io(t,a,new V(d),x,i,s,o,l)}}),a}function b1(t,e,n,r,i,s,o){if(ko(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(z(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return Io(t,e,n,a.getNode().getChild(n),i,s,l,o);if(z(n)){let u=new H(null);return a.getNode().forEachChild(fr,(h,d)=>{u=u.set(new V(h),d)}),au(t,e,n,u,i,s,l,o)}else return e}else{let u=new H(null);return r.foreach((h,d)=>{const f=re(n,h);a.isCompleteForPath(f)&&(u=u.set(h,a.getNode().getChild(f)))}),au(t,e,n,u,i,s,l,o)}}function O1(t,e,n,r,i){const s=e.serverCache,o=Ig(e,s.getNode(),s.isFullyInitialized()||z(n),s.isFiltered());return Dg(t,o,n,r,Og,i)}function D1(t,e,n,r,i,s){let o;if(ko(r,n)!=null)return e;{const l=new Oc(r,e,i),a=e.eventCache.getNode();let u;if(z(n)||M(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=No(r,An(e));else{const d=e.serverCache.getNode();k(d instanceof O,"serverChildren would be complete if leaf node"),h=jc(r,d)}h=h,u=t.filter.updateFullNode(a,h,s)}else{const h=M(n);let d=bc(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=a.getImmediateChild(h)),d!=null?u=t.filter.updateChild(a,h,d,G(n),l,s):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(a,h,O.EMPTY_NODE,G(n),l,s):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=No(r,An(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||ko(r,W())!=null,di(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A1{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new kc(r.getIndex()),s=ZC(r);this.processor_=I1(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(O.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(O.EMPTY_NODE,l.getNode(),null),h=new un(a,o.isFullyInitialized(),i.filtersNodes()),d=new un(u,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=Zo(d,h),this.eventGenerator_=new o1(this.query_)}get query(){return this.query_}}function L1(t){return t.viewCache_.serverCache.getNode()}function M1(t){return So(t.viewCache_)}function F1(t,e){const n=An(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!z(e)&&!n.getImmediateChild(M(e)).isEmpty())?n.getChild(e):null}function Jh(t){return t.eventRegistrations_.length===0}function z1(t,e){t.eventRegistrations_.push(e)}function Zh(t,e,n){const r=[];if(n){k(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function ef(t,e,n,r){e.type===at.MERGE&&e.source.queryId!==null&&(k(An(t.viewCache_),"We should always have a full cache before handling merges"),k(So(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=R1(t.processor_,i,e,n,r);return T1(t.processor_,s.viewCache),k(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,Ag(t,s.changes,s.viewCache.eventCache.getNode(),null)}function U1(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ie,(s,o)=>{r.push(Er(s,o))}),n.isFullyInitialized()&&r.push(Ng(n.getNode())),Ag(t,r,n.getNode(),e)}function Ag(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return l1(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let To;class Lg{constructor(){this.views=new Map}}function B1(t){k(!To,"__referenceConstructor has already been defined"),To=t}function W1(){return k(To,"Reference.ts has not been loaded"),To}function $1(t){return t.views.size===0}function Dc(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return k(s!=null,"SyncTree gave us an op for an invalid query."),ef(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(ef(o,e,n,r));return s}}function Mg(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=No(n,i?r:null),a=!1;l?a=!0:r instanceof O?(l=jc(n,r),a=!1):(l=O.EMPTY_NODE,a=!1);const u=Zo(new un(l,a,!1),new un(r,i,!1));return new A1(e,u)}return o}function V1(t,e,n,r,i,s){const o=Mg(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),z1(o,n),U1(o,n)}function H1(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=cn(t);if(i==="default")for(const[a,u]of t.views.entries())o=o.concat(Zh(u,n,r)),Jh(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||s.push(u.query));else{const a=t.views.get(i);a&&(o=o.concat(Zh(a,n,r)),Jh(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!cn(t)&&s.push(new(W1())(e._repo,e._path)),{removed:s,events:o}}function Fg(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function sn(t,e){let n=null;for(const r of t.views.values())n=n||F1(r,e);return n}function zg(t,e){if(e._queryParams.loadsAllData())return tl(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Ug(t,e){return zg(t,e)!=null}function cn(t){return tl(t)!=null}function tl(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ro;function Q1(t){k(!Ro,"__referenceConstructor has already been defined"),Ro=t}function G1(){return k(Ro,"Reference.ts has not been loaded"),Ro}let K1=1;class tf{constructor(e){this.listenProvider_=e,this.syncPointTree_=new H(null),this.pendingWriteTree_=E1(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Bg(t,e,n,r,i){return d1(t.pendingWriteTree_,e,n,r,i),i?Or(t,new Dn(Tc(),e,n)):[]}function q1(t,e,n,r){h1(t.pendingWriteTree_,e,n,r);const i=H.fromObject(n);return Or(t,new Sr(Tc(),e,i))}function Ht(t,e,n=!1){const r=f1(t.pendingWriteTree_,e);if(p1(t.pendingWriteTree_,e)){let s=new H(null);return r.snap!=null?s=s.set(W(),!0):Ce(r.children,o=>{s=s.set(new V(o),!0)}),Or(t,new Eo(r.path,s,n))}else return[]}function rs(t,e,n){return Or(t,new Dn(Rc(),e,n))}function Y1(t,e,n){const r=H.fromObject(n);return Or(t,new Sr(Rc(),e,r))}function X1(t,e){return Or(t,new Bi(Rc(),e))}function J1(t,e,n){const r=Lc(t,n);if(r){const i=Mc(r),s=i.path,o=i.queryId,l=Te(s,e),a=new Bi(Pc(o),l);return Fc(t,s,a)}else return[]}function Po(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||Ug(o,e))){const a=H1(o,e,n,r);$1(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=a.removed;if(l=a.events,!i){const h=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,y)=>cn(y));if(h&&!d){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const y=tE(f);for(let g=0;g<y.length;++g){const x=y[g],S=x.query,m=Hg(t,x);t.listenProvider_.startListening(fi(S),Wi(t,S),m.hashFn,m.onComplete)}}}!d&&u.length>0&&!r&&(h?t.listenProvider_.stopListening(fi(e),null):u.forEach(f=>{const y=t.queryToTagMap.get(nl(f));t.listenProvider_.stopListening(fi(f),y)}))}nE(t,u)}return l}function Wg(t,e,n,r){const i=Lc(t,r);if(i!=null){const s=Mc(i),o=s.path,l=s.queryId,a=Te(o,e),u=new Dn(Pc(l),a,n);return Fc(t,o,u)}else return[]}function Z1(t,e,n,r){const i=Lc(t,r);if(i){const s=Mc(i),o=s.path,l=s.queryId,a=Te(o,e),u=H.fromObject(n),h=new Sr(Pc(l),a,u);return Fc(t,o,h)}else return[]}function uu(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,y)=>{const g=Te(f,i);s=s||sn(y,g),o=o||cn(y)});let l=t.syncPointTree_.get(i);l?(o=o||cn(l),s=s||sn(l,W())):(l=new Lg,t.syncPointTree_=t.syncPointTree_.set(i,l));let a;s!=null?a=!0:(a=!1,s=O.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((y,g)=>{const x=sn(g,W());x&&(s=s.updateImmediateChild(y,x))}));const u=Ug(l,e);if(!u&&!e._queryParams.loadsAllData()){const f=nl(e);k(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const y=rE();t.queryToTagMap.set(f,y),t.tagToQueryMap.set(y,f)}const h=el(t.pendingWriteTree_,i);let d=V1(l,e,n,h,s,a);if(!u&&!o&&!r){const f=zg(l,e);d=d.concat(iE(t,e,f))}return d}function Ac(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=Te(o,e),u=sn(l,a);if(u)return u});return Pg(i,e,s,n,!0)}function eE(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=Te(u,n);r=r||sn(h,d)});let i=t.syncPointTree_.get(n);i?r=r||sn(i,W()):(i=new Lg,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new un(r,!0,!1):null,l=el(t.pendingWriteTree_,e._path),a=Mg(i,e,l,s?o.getNode():O.EMPTY_NODE,s);return M1(a)}function Or(t,e){return $g(e,t.syncPointTree_,null,el(t.pendingWriteTree_,W()))}function $g(t,e,n,r){if(z(t.path))return Vg(t,e,n,r);{const i=e.get(W());n==null&&i!=null&&(n=sn(i,W()));let s=[];const o=M(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,h=jg(r,o);s=s.concat($g(l,a,u,h))}return i&&(s=s.concat(Dc(i,t,r,n))),s}}function Vg(t,e,n,r){const i=e.get(W());n==null&&i!=null&&(n=sn(i,W()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=jg(r,o),h=t.operationForChild(o);h&&(s=s.concat(Vg(h,l,a,u)))}),i&&(s=s.concat(Dc(i,t,r,n))),s}function Hg(t,e){const n=e.query,r=Wi(t,n);return{hashFn:()=>(L1(e)||O.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?J1(t,n._path,r):X1(t,n._path);{const s=Xw(i,n);return Po(t,n,null,s)}}}}function Wi(t,e){const n=nl(e);return t.queryToTagMap.get(n)}function nl(t){return t._path.toString()+"$"+t._queryIdentifier}function Lc(t,e){return t.tagToQueryMap.get(e)}function Mc(t){const e=t.indexOf("$");return k(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new V(t.substr(0,e))}}function Fc(t,e,n){const r=t.syncPointTree_.get(e);k(r,"Missing sync point for query tag that we're tracking");const i=el(t.pendingWriteTree_,e);return Dc(r,n,i,null)}function tE(t){return t.fold((e,n,r)=>{if(n&&cn(n))return[tl(n)];{let i=[];return n&&(i=Fg(n)),Ce(r,(s,o)=>{i=i.concat(o)}),i}})}function fi(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(G1())(t._repo,t._path):t}function nE(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=nl(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function rE(){return K1++}function iE(t,e,n){const r=e._path,i=Wi(t,e),s=Hg(t,n),o=t.listenProvider_.startListening(fi(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)k(!cn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,h,d)=>{if(!z(u)&&h&&cn(h))return[tl(h).query];{let f=[];return h&&(f=f.concat(Fg(h).map(y=>y.query))),Ce(d,(y,g)=>{f=f.concat(g)}),f}});for(let u=0;u<a.length;++u){const h=a[u];t.listenProvider_.stopListening(fi(h),Wi(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new zc(n)}node(){return this.node_}}class Uc{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=re(this.path_,e);return new Uc(this.syncTree_,n)}node(){return Ac(this.syncTree_,this.path_)}}const sE=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},nf=function(t,e,n){if(!t||typeof t!="object")return t;if(k(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return oE(t[".sv"],e,n);if(typeof t[".sv"]=="object")return lE(t[".sv"],e);k(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},oE=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:k(!1,"Unexpected server value: "+t)}},lE=function(t,e,n){t.hasOwnProperty("increment")||k(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&k(!1,"Unexpected increment value: "+r);const i=e.node();if(k(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},Qg=function(t,e,n,r){return Bc(e,new Uc(n,t),r)},Gg=function(t,e,n){return Bc(t,new zc(e),n)};function Bc(t,e,n){const r=t.getPriority().val(),i=nf(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=nf(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new fe(l,ce(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new fe(i))),o.forEachChild(ie,(l,a)=>{const u=Bc(a,e.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function $c(t,e){let n=e instanceof V?e:new V(e),r=t,i=M(n);for(;i!==null;){const s=wr(r.node.children,i)||{children:{},childCount:0};r=new Wc(i,r,s),n=G(n),i=M(n)}return r}function Dr(t){return t.node.value}function Kg(t,e){t.node.value=e,cu(t)}function qg(t){return t.node.childCount>0}function aE(t){return Dr(t)===void 0&&!qg(t)}function rl(t,e){Ce(t.node.children,(n,r)=>{e(new Wc(n,t,r))})}function Yg(t,e,n,r){n&&e(t),rl(t,i=>{Yg(i,e,!0)})}function uE(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function is(t){return new V(t.parent===null?t.name:is(t.parent)+"/"+t.name)}function cu(t){t.parent!==null&&cE(t.parent,t.name,t)}function cE(t,e,n){const r=aE(n),i=yt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,cu(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,cu(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dE=/[\[\].#$\/\u0000-\u001F\u007F]/,hE=/[\[\].#$\u0000-\u001F\u007F]/,Ql=10*1024*1024,Vc=function(t){return typeof t=="string"&&t.length!==0&&!dE.test(t)},Xg=function(t){return typeof t=="string"&&t.length!==0&&!hE.test(t)},fE=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),Xg(t)},pE=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!vc(t)||t&&typeof t=="object"&&yt(t,".sv")},Jg=function(t,e,n,r){r&&e===void 0||il(Yo(t,"value"),e,n)},il=function(t,e,n){const r=n instanceof V?new jC(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+wn(r));if(typeof e=="function")throw new Error(t+"contains a function "+wn(r)+" with contents = "+e.toString());if(vc(e))throw new Error(t+"contains "+e.toString()+" "+wn(r));if(typeof e=="string"&&e.length>Ql/3&&Xo(e)>Ql)throw new Error(t+"contains a string greater than "+Ql+" utf8 bytes "+wn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Ce(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Vc(o)))throw new Error(t+" contains an invalid key ("+o+") "+wn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);bC(r,o),il(t,l,r),OC(r)}),i&&s)throw new Error(t+' contains ".value" child '+wn(r)+" in addition to actual children.")}},mE=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Mi(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Vc(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(PC);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&Je(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},gE=function(t,e,n,r){const i=Yo(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Ce(e,(o,l)=>{const a=new V(o);if(il(i,l,re(n,a)),Cc(a)===".priority"&&!pE(l))throw new Error(i+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(a)}),mE(i,s)},Zg=function(t,e,n,r){if(!Xg(n))throw new Error(Yo(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},vE=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),Zg(t,e,n)},Hc=function(t,e){if(M(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},yE=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Vc(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!fE(n))throw new Error(Yo(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _E{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function sl(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!Ec(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function ev(t,e,n){sl(t,n),tv(t,r=>Ec(r,e))}function nt(t,e,n){sl(t,n),tv(t,r=>Je(r,e)||Je(e,r))}function tv(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(xE(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function xE(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();ui&&_e("event: "+n.toString()),br(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wE="repo_interrupt",CE=25;class EE{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new _E,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=Co(),this.transactionQueueTree_=new Wc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function SE(t,e,n){if(t.stats_=xc(t.repoInfo_),t.forceRestClient_||tC())t.server_=new wo(t.repoInfo_,(r,i,s,o)=>{rf(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>sf(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{de(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new kt(t.repoInfo_,e,(r,i,s,o)=>{rf(t,r,i,s,o)},r=>{sf(t,r)},r=>{NE(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=oC(t.repoInfo_,()=>new s1(t.stats_,t.server_)),t.infoData_=new e1,t.infoSyncTree_=new tf({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=rs(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),Qc(t,"connected",!1),t.serverSyncTree_=new tf({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);nt(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function nv(t){const n=t.infoData_.getNode(new V(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ol(t){return sE({timestamp:nv(t)})}function rf(t,e,n,r,i){t.dataUpdateCount++;const s=new V(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=mo(n,u=>ce(u));o=Z1(t.serverSyncTree_,s,a,i)}else{const a=ce(n);o=Wg(t.serverSyncTree_,s,a,i)}else if(r){const a=mo(n,u=>ce(u));o=Y1(t.serverSyncTree_,s,a)}else{const a=ce(n);o=rs(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=kr(t,s)),nt(t.eventQueue_,l,o)}function sf(t,e){Qc(t,"connected",e),e===!1&&RE(t)}function NE(t,e){Ce(e,(n,r)=>{Qc(t,n,r)})}function Qc(t,e,n){const r=new V("/.info/"+e),i=ce(n);t.infoData_.updateSnapshot(r,i);const s=rs(t.infoSyncTree_,r,i);nt(t.eventQueue_,r,s)}function Gc(t){return t.nextWriteId_++}function kE(t,e,n){const r=eE(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=ce(i).withIndex(e._queryParams.getIndex());uu(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=rs(t.serverSyncTree_,e._path,s);else{const l=Wi(t.serverSyncTree_,e);o=Wg(t.serverSyncTree_,e._path,s,l)}return nt(t.eventQueue_,e._path,o),Po(t.serverSyncTree_,e,n,null,!0),s},i=>(ss(t,"get for query "+de(e)+" failed: "+i),Promise.reject(new Error(i))))}function IE(t,e,n,r,i){ss(t,"set",{path:e.toString(),value:n,priority:r});const s=ol(t),o=ce(n,r),l=Ac(t.serverSyncTree_,e),a=Gg(o,l,s),u=Gc(t),h=Bg(t.serverSyncTree_,e,a,u,!0);sl(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(f,y)=>{const g=f==="ok";g||Pe("set at "+e+" failed: "+f);const x=Ht(t.serverSyncTree_,u,!g);nt(t.eventQueue_,e,x),du(t,i,f,y)});const d=qc(t,e);kr(t,d),nt(t.eventQueue_,d,[])}function TE(t,e,n,r){ss(t,"update",{path:e.toString(),value:n});let i=!0;const s=ol(t),o={};if(Ce(n,(l,a)=>{i=!1,o[l]=Qg(re(e,l),ce(a),t.serverSyncTree_,s)}),i)_e("update() called with empty data.  Don't do anything."),du(t,r,"ok",void 0);else{const l=Gc(t),a=q1(t.serverSyncTree_,e,o,l);sl(t.eventQueue_,a),t.server_.merge(e.toString(),n,(u,h)=>{const d=u==="ok";d||Pe("update at "+e+" failed: "+u);const f=Ht(t.serverSyncTree_,l,!d),y=f.length>0?kr(t,e):e;nt(t.eventQueue_,y,f),du(t,r,u,h)}),Ce(n,u=>{const h=qc(t,re(e,u));kr(t,h)}),nt(t.eventQueue_,e,[])}}function RE(t){ss(t,"onDisconnectEvents");const e=ol(t),n=Co();ru(t.onDisconnect_,W(),(i,s)=>{const o=Qg(i,s,t.serverSyncTree_,e);kg(n,i,o)});let r=[];ru(n,W(),(i,s)=>{r=r.concat(rs(t.serverSyncTree_,i,s));const o=qc(t,i);kr(t,o)}),t.onDisconnect_=Co(),nt(t.eventQueue_,W(),r)}function PE(t,e,n){let r;M(e._path)===".info"?r=uu(t.infoSyncTree_,e,n):r=uu(t.serverSyncTree_,e,n),ev(t.eventQueue_,e._path,r)}function of(t,e,n){let r;M(e._path)===".info"?r=Po(t.infoSyncTree_,e,n):r=Po(t.serverSyncTree_,e,n),ev(t.eventQueue_,e._path,r)}function jE(t){t.persistentConnection_&&t.persistentConnection_.interrupt(wE)}function ss(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),_e(n,...e)}function du(t,e,n,r){e&&br(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function rv(t,e,n){return Ac(t.serverSyncTree_,e,n)||O.EMPTY_NODE}function Kc(t,e=t.transactionQueueTree_){if(e||ll(t,e),Dr(e)){const n=sv(t,e);k(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&bE(t,is(e),n)}else qg(e)&&rl(e,n=>{Kc(t,n)})}function bE(t,e,n){const r=n.map(u=>u.currentWriteId),i=rv(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const h=n[u];k(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Te(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,u=>{ss(t,"transaction put response",{path:a.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,h=h.concat(Ht(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();ll(t,$c(t.transactionQueueTree_,e)),Kc(t,t.transactionQueueTree_),nt(t.eventQueue_,e,h);for(let f=0;f<d.length;f++)br(d[f])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{Pe("transaction at "+a.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}kr(t,e)}},o)}function kr(t,e){const n=iv(t,e),r=is(n),i=sv(t,n);return OE(t,i,r),r}function OE(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=Te(n,a.path);let h=!1,d;if(k(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)h=!0,d=a.abortReason,i=i.concat(Ht(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=CE)h=!0,d="maxretry",i=i.concat(Ht(t.serverSyncTree_,a.currentWriteId,!0));else{const f=rv(t,a.path,o);a.currentInputSnapshot=f;const y=e[l].update(f.val());if(y!==void 0){il("transaction failed: Data returned ",y,a.path);let g=ce(y);typeof y=="object"&&y!=null&&yt(y,".priority")||(g=g.updatePriority(f.getPriority()));const S=a.currentWriteId,m=ol(t),p=Gg(g,f,m);a.currentOutputSnapshotRaw=g,a.currentOutputSnapshotResolved=p,a.currentWriteId=Gc(t),o.splice(o.indexOf(S),1),i=i.concat(Bg(t.serverSyncTree_,a.path,p,a.currentWriteId,a.applyLocally)),i=i.concat(Ht(t.serverSyncTree_,S,!0))}else h=!0,d="nodata",i=i.concat(Ht(t.serverSyncTree_,a.currentWriteId,!0))}nt(t.eventQueue_,n,i),i=[],h&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(d),!1,null))))}ll(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)br(r[l]);Kc(t,t.transactionQueueTree_)}function iv(t,e){let n,r=t.transactionQueueTree_;for(n=M(e);n!==null&&Dr(r)===void 0;)r=$c(r,n),e=G(e),n=M(e);return r}function sv(t,e){const n=[];return ov(t,e,n),n.sort((r,i)=>r.order-i.order),n}function ov(t,e,n){const r=Dr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);rl(e,i=>{ov(t,i,n)})}function ll(t,e){const n=Dr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Kg(e,n.length>0?n:void 0)}rl(e,r=>{ll(t,r)})}function qc(t,e){const n=is(iv(t,e)),r=$c(t.transactionQueueTree_,e);return uE(r,i=>{Gl(t,i)}),Gl(t,r),Yg(r,i=>{Gl(t,i)}),n}function Gl(t,e){const n=Dr(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(k(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(k(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(Ht(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Kg(e,void 0):n.length=s+1,nt(t.eventQueue_,is(e),i);for(let o=0;o<r.length;o++)br(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function DE(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function AE(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):Pe(`Invalid query segment '${n}' in query '${t}'`)}return e}const lf=function(t,e){const n=LE(t),r=n.namespace;n.domain==="firebase.com"&&bt(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&bt("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Qw();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new ug(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new V(n.pathString)}},LE=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=DE(t.substring(h,d)));const f=AE(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const y=e.slice(0,u);if(y.toLowerCase()==="localhost")n="localhost";else if(y.split(".").length<=2)n=y;else{const g=e.indexOf(".");r=e.substring(0,g).toLowerCase(),n=e.substring(g+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const af="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",ME=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=af.charAt(n%64),n=Math.floor(n/64);k(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=af.charAt(e[i]);return k(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FE{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+de(this.snapshot.exportVal())}}class zE{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lv{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return k(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yc{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return z(this._path)?null:Cc(this._path)}get ref(){return new At(this._repo,this._path)}get _queryIdentifier(){const e=Hh(this._queryParams),n=yc(e);return n==="{}"?"default":n}get _queryObject(){return Hh(this._queryParams)}isEqual(e){if(e=Un(e),!(e instanceof Yc))return!1;const n=this._repo===e._repo,r=Ec(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+RC(this._path)}}class At extends Yc{constructor(e,n){super(e,n,new Ic,!1)}get parent(){const e=yg(this._path);return e===null?null:new At(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class $i{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new V(e),r=Vi(this.ref,e);return new $i(this._node.getChild(n),r,ie)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new $i(i,Vi(this.ref,r),ie)))}hasChild(e){const n=new V(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function os(t,e){return t=Un(t),t._checkNotDeleted("ref"),e!==void 0?Vi(t._root,e):t._root}function Vi(t,e){return t=Un(t),M(t._path)===null?vE("child","path",e):Zg("child","path",e),new At(t._repo,re(t._path,e))}function UE(t,e){t=Un(t),Hc("push",t._path),Jg("push",e,t._path,!0);const n=nv(t._repo),r=ME(n),i=Vi(t,r),s=Vi(t,r);let o;return o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function BE(t){return Hc("remove",t._path),av(t,null)}function av(t,e){t=Un(t),Hc("set",t._path),Jg("set",e,t._path,!1);const n=new Ji;return IE(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function WE(t,e){gE("update",e,t._path);const n=new Ji;return TE(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function $E(t){t=Un(t);const e=new lv(()=>{}),n=new al(e);return kE(t._repo,t,n).then(r=>new $i(r,new At(t._repo,t._path),t._queryParams.getIndex()))}class al{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new FE("value",this,new $i(e.snapshotNode,new At(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new zE(this,e,n):null}matches(e){return e instanceof al?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function VE(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const a=n,u=(h,d)=>{of(t._repo,t,l),a(h,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new lv(n,s||void 0),l=new al(o);return PE(t._repo,t,l),()=>of(t._repo,t,l)}function HE(t,e,n,r){return VE(t,"value",e,n,r)}B1(At);Q1(At);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QE="FIREBASE_DATABASE_EMULATOR_HOST",hu={};let GE=!1;function KE(t,e,n,r){t.repoInfo_=new ug(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function qE(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||bt("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),_e("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=lf(s,i),l=o.repoInfo,a;typeof process<"u"&&Ih&&(a=Ih[QE]),a?(s=`http://${a}?ns=${l.namespace}`,o=lf(s,i),l=o.repoInfo):o.repoInfo.secure;const u=new rC(t.name,t.options,e);yE("Invalid Firebase Database URL",o),z(o.path)||bt("Database URL must point to the root of a Firebase Database (not including a child path).");const h=XE(l,t,u,new nC(t.name,n));return new JE(h,t)}function YE(t,e){const n=hu[e];(!n||n[t.key]!==t)&&bt(`Database ${e}(${t.repoInfo_}) has already been deleted.`),jE(t),delete n[t.key]}function XE(t,e,n,r){let i=hu[e.name];i||(i={},hu[e.name]=i);let s=i[t.toURLString()];return s&&bt("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new EE(t,GE,n,r),i[t.toURLString()]=s,s}class JE{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(SE(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new At(this._repo,W())),this._rootInternal}_delete(){return this._rootInternal!==null&&(YE(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&bt("Cannot call "+e+" on a deleted database.")}}function ZE(t=Tw(),e){const n=Sw(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=fx("database");r&&eS(n,...r)}return n}function eS(t,e,n,r={}){t=Un(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&bt("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&bt('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Bs(Bs.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:px(r.mockUserToken,t.app.options.projectId);s=new Bs(o)}KE(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tS(t){Uw(Iw),vo(new Di("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return qE(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),dr(Th,Rh,t),dr(Th,Rh,"esm2017")}kt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};kt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};tS();const nS={apiKey:"AIzaSyAhuOO-9ifGREkqMF6JNQcl5LPjHvVwRyc",authDomain:"online-shop-21f83.firebaseapp.com",databaseURL:"https://online-shop-21f83-default-rtdb.firebaseio.com",projectId:"online-shop-21f83",storageBucket:"online-shop-21f83.appspot.com",messagingSenderId:"1043265038518",appId:"1:1043265038518:web:ee3ef45664e4e4c5895e17"},rS=Qm(nS),ls=ZE(rS),as=(t,e,n)=>(console.error(`Firebase error during ${n}:`,t),t.message&&t.message.includes("Permission denied")&&(console.warn(`Firebase permission denied during ${n}. Please check your Firebase security rules.`),console.warn("You may need to update your Firebase security rules to allow read/write access."),console.warn('Example rules for development: { "rules": { ".read": true, ".write": true } }')),e),iS=async t=>{console.log("Saving order to Firebase:",t);try{const e=os(ls,"orders"),n=UE(e);return await av(n,{...t,firebaseId:n.key,timestamp:Date.now()}),console.log("Order saved to Firebase successfully with ID:",t.id),t.id}catch(e){throw as(e,null,"saveOrder"),e}},sS=async()=>{console.log("Getting orders from Firebase");try{const t=os(ls,"orders"),e=await $E(t);if(e.exists()){const n=e.val(),r=Object.keys(n).map(i=>({...n[i],firebaseKey:i}));return console.log(`Retrieved ${r.length} orders from Firebase`),r}return console.log("No orders found in Firebase"),[]}catch(t){return as(t,[],"getOrdersOnce")}},oS=t=>{console.log("Setting up real-time listener for orders");try{const e=os(ls,"orders");return HE(e,r=>{if(console.log("Received order update from Firebase"),r.exists()){const i=r.val(),s=Object.keys(i).map(o=>({...i[o],firebaseKey:o}));console.log(`Real-time update: ${s.length} orders from Firebase`),t(s)}else console.log("No orders found in Firebase (real-time update)"),t([])},r=>{console.error("Error in Firebase real-time listener:",r),t([])})}catch(e){return as(e,null,"listenToOrders"),()=>{}}},lS=async(t,e,n)=>{console.log(`Updating order ${t} status to ${e}`);try{const r=os(ls,`orders/${n}`);return await WE(r,{status:e}),console.log(`Order ${t} status updated successfully`),!0}catch(r){throw as(r,!1,"updateOrderStatus"),r}},aS=async t=>{console.log(`Deleting order with Firebase key: ${t}`);try{const e=os(ls,`orders/${t}`);return await BE(e),console.log("Order deleted successfully"),!0}catch(e){throw as(e,!1,"deleteOrder"),e}},Hi={_origin:"https://api.emailjs.com"},uS=(t,e="https://api.emailjs.com")=>{Hi._userID=t,Hi._origin=e},uv=(t,e,n)=>{if(!t)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class uf{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}const cv=(t,e,n={})=>new Promise((r,i)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:o})=>{const l=new uf(o);l.status===200||l.text==="OK"?r(l):i(l)}),s.addEventListener("error",({target:o})=>{i(new uf(o))}),s.open("POST",Hi._origin+t,!0),Object.keys(n).forEach(o=>{s.setRequestHeader(o,n[o])}),s.send(e)}),cS=(t,e,n,r)=>{const i=r||Hi._userID;return uv(i,t,e),cv("/api/v1.0/email/send",JSON.stringify({lib_version:"3.12.1",user_id:i,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"})},dS=t=>{let e;if(typeof t=="string"?e=document.querySelector(t):e=t,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},hS=(t,e,n,r)=>{const i=r||Hi._userID,s=dS(n);uv(i,t,e);const o=new FormData(s);return o.append("lib_version","3.12.1"),o.append("service_id",t),o.append("template_id",e),o.append("user_id",i),cv("/api/v1.0/email/send-form",o)},fu={init:uS,send:cS,sendForm:hS},fS=()=>{const t=JSON.parse(localStorage.getItem("store_orders")||"[]");let e=0;return t.forEach(n=>{const r=n.id&&n.id.match(/ORDER-(\d+)/);if(r&&r[1]){const i=parseInt(r[1],10);i>e&&(e=i)}}),e+1};function pS(){const t=Xi(),[e,n]=w.useState([]),[r,i]=w.useState(0),{showToast:s}=pc(),[o,l]=w.useState(!1),[a,u]=w.useState({name:"",email:"",phone:"",address:"",city:"",deliveryDate:"",deliveryTime:"",notes:""});w.useEffect(()=>{const f=Nt();if(f.length===0){t("/cart");return}n(f),i(f.reduce((y,g)=>y+g.price*g.quantity,0))},[t]);const h=f=>{const{name:y,value:g}=f.target;u(x=>({...x,[y]:g}))},d=async f=>{f.preventDefault(),l(!0);const y=fS();console.log("Generated order number:",y);const g={id:`ORDER-${y}`,items:e,total:r,...a,status:"חדש",createdAt:new Date().toISOString()};console.log("Created order with ID:",g.id);try{console.log("Submitting order:",g),console.log("Saving order to Firebase..."),await iS(g),console.log("Order saved to Firebase successfully"),console.log("Saving order to localStorage...");const x=JSON.parse(localStorage.getItem("store_orders")||"[]");x.push(g),Hn(x),console.log("Order saved to localStorage successfully");const S=g.items.map(C=>`${C.name} x${C.quantity} - ₪${C.price*C.quantity}`).join(`
`),m=Math.round(g.total),p={order_id:g.id,customer_name:g.name,customer_email:g.email,customer_phone:g.phone,delivery_address:`${g.address}, ${g.city}`,delivery_date:new Date(g.deliveryDate).toLocaleDateString("he-IL"),delivery_time:g.deliveryTime,items:S,total:`₪${m}`,notes:g.notes||"אין הערות"};console.log("Sending email to store owner..."),await fu.send("service_scvfp6q","template_jqnqrmr",{to_email:"netamal3134@gmail.com",subject:`הזמנה חדשה ${g.id}`,...p},"wdkhxkDvY1CBqWjhm"),console.log("Email sent to store owner successfully"),console.log("Sending confirmation email to customer...");const v={to_name:a.name,to_email:a.email,reply_to:"netamal3134@gmail.com",from_name:"החנות האונליין",customer_email:a.email,customer_name:a.name,subject:`אישור הזמנה ${g.id}`,order_id:g.id,delivery_date:new Date(g.deliveryDate).toLocaleDateString("he-IL"),delivery_time:g.deliveryTime,delivery_address:`${g.address}, ${g.city}`,items:S,total:`₪${m}`,notes:g.notes||"אין הערות"};await fu.send("service_scvfp6q","template_9gyc9gb",v,"wdkhxkDvY1CBqWjhm"),console.log("Confirmation email sent to customer successfully"),console.log("Clearing cart and redirecting to success page..."),J0(),t("/order-success",{state:{orderId:g.id}})}catch(x){console.error("Error processing order:",x),s("אירעה שגיאה בעיבוד ההזמנה. אנא נסה שוב מאוחר יותר.","error")}finally{l(!1)}};return c.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"השלמת הזמנה"}),c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"פרטים אישיים"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"שם מלא"}),c.jsx("input",{type:"text",name:"name",value:a.name,onChange:h,required:!0,className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"אימייל"}),c.jsx("input",{type:"email",name:"email",value:a.email,onChange:h,required:!0,className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"טלפון"}),c.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:h,required:!0,className:"input-field"})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"פרטי משלוח"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"כתובת מלאה"}),c.jsx("input",{type:"text",name:"address",value:a.address,onChange:h,required:!0,className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"עיר"}),c.jsx("input",{type:"text",name:"city",value:a.city,onChange:h,required:!0,className:"input-field"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"תאריך משלוח"}),c.jsx("input",{type:"date",name:"deliveryDate",value:a.deliveryDate,onChange:h,required:!0,min:new Date().toISOString().split("T")[0],className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"שעת משלוח"}),c.jsxs("select",{name:"deliveryTime",value:a.deliveryTime,onChange:h,required:!0,className:"input-field",children:[c.jsx("option",{value:"",children:"בחר שעה"}),c.jsx("option",{value:"09:00-12:00",children:"09:00-12:00"}),c.jsx("option",{value:"12:00-15:00",children:"12:00-15:00"}),c.jsx("option",{value:"15:00-18:00",children:"15:00-18:00"}),c.jsx("option",{value:"18:00-21:00",children:"18:00-21:00"})]})]})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"סיכום הזמנה"}),c.jsxs("div",{className:"space-y-4",children:[e.map(f=>c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{children:[f.name," x",f.quantity]}),c.jsxs("span",{children:["₪",Math.round(f.price*f.quantity)]})]},f.id)),c.jsx("div",{className:"border-t pt-4",children:c.jsxs("div",{className:"flex justify-between font-bold",children:[c.jsx("span",{children:'סה"כ לתשלום'}),c.jsxs("span",{children:["₪",Math.round(r)]})]})})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"הערות נוספות"}),c.jsx("textarea",{name:"notes",value:a.notes,onChange:h,rows:"4",className:"input-field",placeholder:"הוסף הערות או הנחיות מיוחדות למשלוח..."})]}),c.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:o,children:o?"מעבד הזמנה...":"אשר הזמנה"})]})]})}function mS(){var r;const t=Xi(),n=(r=zn().state)==null?void 0:r.orderId;return w.useEffect(()=>{Nt().length>0&&t("/cart")},[t]),c.jsx("div",{className:"text-center py-16",children:c.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md mx-auto",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:c.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"תודה על ההזמנה!"}),n&&c.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:c.jsxs("p",{className:"text-blue-800 font-medium",children:["מספר הזמנה: ",n]})}),c.jsx("p",{className:"text-gray-600 mb-8",children:"ההזמנה שלך התקבלה בהצלחה. נשלח לך אימייל עם פרטי ההזמנה. המשלוח יגיע בתאריך ובשעה שבחרת. התשלום יתבצע במזומן בעת המסירה."}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(Xe,{to:"/products",className:"btn-primary block",children:"המשך לקנייה"}),c.jsx(Xe,{to:"/",className:"btn-secondary block",children:"חזרה לדף הבית"})]})]})})}function gS(){const[t,e]=w.useState("products"),[n,r]=w.useState([]),[i,s]=w.useState([]),[o,l]=w.useState([]),[a,u]=w.useState(null),[h,d]=w.useState(null),[f,y]=w.useState({name:"",description:"",price:"",image:"",categoryId:""}),[g,x]=w.useState({field:"id",direction:"desc"}),[S,m]=w.useState("all"),[p,v]=w.useState(""),[C,I]=w.useState(null);w.useEffect(()=>{P(),console.log("Setting up Firebase listener in Admin component");let _=null;try{_=oS(N=>{console.log("Received orders update in Admin component:",N),N&&N.length>0&&(l(N),Hn(N),I(null))})}catch(N){console.error("Error setting up Firebase listener:",N),I("Failed to connect to the orders database. Please check your internet connection and Firebase configuration.")}return()=>{console.log("Cleaning up Firebase listener"),_&&_()}},[]);const P=async()=>{r(Ko()),s(qo());try{console.log("Attempting to load orders from Firebase");const _=await sS();if(console.log("Orders from Firebase:",_),_&&_.length>0)l(_),Hn(_),I(null);else{console.log("No orders in Firebase, falling back to localStorage");const N=ph();l(N)}}catch(_){console.error("Error loading orders from Firebase:",_),I("Failed to load orders from the database. Please check your internet connection and Firebase configuration.");const N=ph();l(N)}},j=(_,N,D)=>{console.log(`Changing order ${_} status to ${N}`),lS(_,N,D).then(()=>{console.log(`Order ${_} status updated to ${N} in Firebase`),I(null)}).catch(Oe=>{console.error("Error updating order status in Firebase:",Oe),I("Failed to update order status in the database. The change was applied locally only.")});const A=o.map(Oe=>Oe.id===_?{...Oe,status:N}:Oe);l(A),Hn(A)},b=_=>{const N=g.field===_&&g.direction==="asc"?"desc":"asc";x({field:_,direction:N})},J=async(_,N)=>{if(window.confirm("האם אתה בטוח שברצונך למחוק הזמנה זו?"))try{await aS(N);const D=o.filter(A=>A.id!==_);l(D),Hn(D),I(null)}catch(D){console.error("Error deleting order:",D),I("שגיאה במחיקת ההזמנה. ההזמנה נמחקה מהתצוגה המקומית בלבד.");const A=o.filter(Oe=>Oe.id!==_);l(A),Hn(A)}},L=()=>{let _=o;return p.trim()&&(_=o.filter(N=>N.id.toString().includes(p.trim()))),S!=="all"&&(_=_.filter(N=>N.status===S)),[..._].sort((N,D)=>{let A=0;return g.field==="id"?A=parseInt(N.id)-parseInt(D.id):g.field==="date"?A=new Date(N.deliveryDate)-new Date(D.deliveryDate):g.field==="total"?A=parseFloat(N.total)-parseFloat(D.total):g.field==="name"&&(A=N.name.localeCompare(D.name)),g.direction==="asc"?A:-A})},Ue=()=>{const _=o.length,N=o.reduce((ae,ve)=>ae+parseFloat(ve.total),0),D=o.filter(ae=>ae.status==="הושלם").length,A=o.filter(ae=>ae.status==="בתהליך").length,Oe=o.filter(ae=>ae.status==="חדש").length,Be={};o.forEach(ae=>{ae.items.forEach(ve=>{Be[ve.id]||(Be[ve.id]={name:ve.name,quantity:0,total:0}),Be[ve.id].quantity+=ve.quantity,Be[ve.id].total+=Math.round(ve.price*ve.quantity)})});const Mr=Object.values(Be).sort((ae,ve)=>ve.quantity-ae.quantity).slice(0,5);return{totalOrders:_,totalIncome:N,completedOrders:D,inProcessOrders:A,newOrders:Oe,topProducts:Mr}},gn=_=>{_.preventDefault();const N={id:(a==null?void 0:a.id)||Date.now().toString(),...f,price:parseFloat(f.price)},D=a?n.map(A=>A.id===a.id?N:A):[...n,N];Ha(D),r(D),u(null),y({name:"",description:"",price:"",image:"",categoryId:""})},vn=_=>{_.preventDefault();const N={id:(h==null?void 0:h.id)||Date.now().toString(),name:f.name,description:f.description},D=h?i.map(A=>A.id===h.id?N:A):[...i,N];Qa(D),s(D),d(null),y({name:"",description:"",price:"",image:"",categoryId:""})},us=_=>{if(window.confirm("האם אתה בטוח שברצונך למחוק מוצר זה?")){const N=n.filter(D=>D.id!==_);Ha(N),r(N)}},ul=_=>{if(window.confirm("האם אתה בטוח שברצונך למחוק קטגוריה זו?")){const N=i.filter(D=>D.id!==_);Qa(N),s(N)}},Ar=_=>{u(_),y({name:_.name,description:_.description,price:_.price,image:_.image,categoryId:_.categoryId})},Lr=_=>{d(_),y({name:_.name,description:_.description,price:"",image:"",categoryId:""})},T=Ue();return c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 bg-gray-50 min-h-screen",children:[c.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 mb-8",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-3xl font-bold text-white",children:"לוח בקרה"}),c.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg px-4 py-2 text-white",children:[c.jsx("div",{className:"text-sm opacity-80",children:"היום"}),c.jsx("div",{className:"font-medium",children:new Date().toLocaleDateString("he-IL",{day:"numeric",month:"long",year:"numeric"})})]})]})}),C&&c.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative mb-6",role:"alert",children:[c.jsx("strong",{className:"font-bold",children:"שגיאת התחברות: "}),c.jsx("span",{className:"block sm:inline",children:C}),c.jsx("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>I(null),children:c.jsx("span",{className:"text-xl",children:"×"})})]}),c.jsx("div",{className:"mb-8",children:c.jsxs("nav",{className:"flex flex-wrap gap-2",children:[c.jsxs("button",{onClick:()=>e("products"),className:`px-5 py-3 rounded-lg font-medium transition-all duration-200 flex items-center ${t==="products"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"מוצרים"]}),c.jsxs("button",{onClick:()=>e("categories"),className:`px-5 py-3 rounded-lg font-medium transition-all duration-200 flex items-center ${t==="categories"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"קטגוריות"]}),c.jsxs("button",{onClick:()=>e("orders"),className:`px-5 py-3 rounded-lg font-medium transition-all duration-200 flex items-center ${t==="orders"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"הזמנות"]}),c.jsxs("button",{onClick:()=>e("summary"),className:`px-5 py-3 rounded-lg font-medium transition-all duration-200 flex items-center ${t==="summary"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"סיכום"]})]})}),t==="products"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("form",{onSubmit:gn,className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:a?"עריכת מוצר":"הוספת מוצר חדש"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"שם המוצר"}),c.jsx("input",{type:"text",value:f.name,onChange:_=>y({...f,name:_.target.value}),required:!0,className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"מחיר"}),c.jsx("input",{type:"number",value:f.price,onChange:_=>y({...f,price:_.target.value}),required:!0,className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"תמונה"}),c.jsx("input",{type:"url",value:f.image,onChange:_=>y({...f,image:_.target.value}),required:!0,className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"קטגוריה"}),c.jsxs("select",{value:f.categoryId,onChange:_=>y({...f,categoryId:_.target.value}),required:!0,className:"input-field",children:[c.jsx("option",{value:"",children:"בחר קטגוריה"}),i.map(_=>c.jsx("option",{value:_.id,children:_.name},_.id))]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"תיאור"}),c.jsx("textarea",{value:f.description,onChange:_=>y({...f,description:_.target.value}),required:!0,rows:"3",className:"input-field"})]})]}),c.jsxs("div",{className:"mt-4 flex justify-end space-x-4 space-x-reverse",children:[a&&c.jsx("button",{type:"button",onClick:()=>{u(null),y({name:"",description:"",price:"",image:"",categoryId:""})},className:"btn-secondary",children:"ביטול"}),c.jsx("button",{type:"submit",className:"btn-primary",children:a?"עדכן מוצר":"הוסף מוצר"})]})]}),c.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"שם"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"מחיר"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"קטגוריה"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"פעולות"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(_=>{var N;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("img",{src:_.image,alt:_.name,className:"h-10 w-10 rounded-full object-cover"}),c.jsxs("div",{className:"mr-4",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.name}),c.jsx("div",{className:"text-sm text-gray-500",children:_.description})]})]})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["₪",_.price]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(N=i.find(D=>D.id===_.categoryId))==null?void 0:N.name}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[c.jsx("button",{onClick:()=>Ar(_),className:"text-blue-600 hover:text-blue-900 ml-4",children:"ערוך"}),c.jsx("button",{onClick:()=>us(_.id),className:"text-red-600 hover:text-red-900",children:"מחק"})]})]},_.id)})})]})})]}),t==="categories"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("form",{onSubmit:vn,className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:h?"עריכת קטגוריה":"הוספת קטגוריה חדשה"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"שם הקטגוריה"}),c.jsx("input",{type:"text",value:f.name,onChange:_=>y({...f,name:_.target.value}),required:!0,className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"תיאור"}),c.jsx("input",{type:"text",value:f.description,onChange:_=>y({...f,description:_.target.value}),required:!0,className:"input-field"})]})]}),c.jsxs("div",{className:"mt-4 flex justify-end space-x-4 space-x-reverse",children:[h&&c.jsx("button",{type:"button",onClick:()=>{d(null),y({name:"",description:"",price:"",image:"",categoryId:""})},className:"btn-secondary",children:"ביטול"}),c.jsx("button",{type:"submit",className:"btn-primary",children:h?"עדכן קטגוריה":"הוסף קטגוריה"})]})]}),c.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"שם"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"תיאור"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"פעולות"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(_=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.name})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm text-gray-500",children:_.description})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[c.jsx("button",{onClick:()=>Lr(_),className:"text-blue-600 hover:text-blue-900 ml-4",children:"ערוך"}),c.jsx("button",{onClick:()=>ul(_.id),className:"text-red-600 hover:text-red-900",children:"מחק"})]})]},_.id))})]})})]}),t==="orders"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-3",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"חיפוש לפי מספר הזמנה",value:p,onChange:_=>v(_.target.value),className:"border rounded-md px-4 py-2 text-sm w-48 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),p&&c.jsx("button",{onClick:()=>v(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"✕"})]}),c.jsxs("select",{value:S,onChange:_=>m(_.target.value),className:"border rounded-md px-3 py-2 text-sm",children:[c.jsx("option",{value:"all",children:"כל הסטטוסים"}),c.jsx("option",{value:"חדש",children:"חדש"}),c.jsx("option",{value:"בתהליך",children:"בתהליך"}),c.jsx("option",{value:"הושלם",children:"הושלם"})]})]}),c.jsxs("button",{onClick:()=>P(),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md text-sm flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"רענן נתונים"]})]}),c.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>b("id"),children:["מספר הזמנה",g.field==="id"&&c.jsx("span",{className:"mr-1",children:g.direction==="asc"?"↑":"↓"})]}),c.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>b("name"),children:["לקוח",g.field==="name"&&c.jsx("span",{className:"mr-1",children:g.direction==="asc"?"↑":"↓"})]}),c.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>b("date"),children:["תאריך משלוח",g.field==="date"&&c.jsx("span",{className:"mr-1",children:g.direction==="asc"?"↑":"↓"})]}),c.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>b("total"),children:["סכום",g.field==="total"&&c.jsx("span",{className:"mr-1",children:g.direction==="asc"?"↑":"↓"})]}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"סטטוס"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"פעולות"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:L().length>0?L().map(_=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:_.id}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"text-sm text-gray-900",children:_.name}),c.jsx("div",{className:"text-sm text-gray-500",children:_.email})]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[new Date(_.deliveryDate).toLocaleDateString("he-IL"),c.jsx("br",{}),_.deliveryTime]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["₪",Math.round(_.total)]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("select",{value:_.status,onChange:N=>j(_.id,N.target.value,_.firebaseKey),className:`px-2 py-1 text-xs leading-5 font-semibold rounded-full ${_.status==="חדש"?"bg-yellow-100 text-yellow-800":_.status==="בתהליך"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:[c.jsx("option",{value:"חדש",children:"חדש"}),c.jsx("option",{value:"בתהליך",children:"בתהליך"}),c.jsx("option",{value:"הושלם",children:"הושלם"})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:c.jsx("button",{onClick:()=>J(_.id,_.firebaseKey),className:"text-red-600 hover:text-red-900 transition-colors duration-200",title:"מחק הזמנה",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},_.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-sm text-gray-500",children:p?"לא נמצאו הזמנות התואמות את החיפוש":"אין הזמנות להצגה"})})})]})})]}),t==="summary"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 p-6 rounded-xl shadow-lg border border-blue-100 transform transition-all duration-300 hover:scale-105",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-indigo-800",children:"סיכום הזמנות"}),c.jsx("div",{className:"p-2 bg-white bg-opacity-80 rounded-full",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:'סה"כ הזמנות:'}),c.jsx("span",{className:"text-xl font-bold text-indigo-800",children:T.totalOrders})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:"הזמנות חדשות:"}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"text-lg font-bold text-green-600",children:T.newOrders}),T.newOrders>0&&c.jsx("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"חדש"})]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:"הזמנות בתהליך:"}),c.jsx("span",{className:"text-lg font-bold text-yellow-600",children:T.inProcessOrders})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:"הזמנות שהושלמו:"}),c.jsx("span",{className:"text-lg font-bold text-blue-600",children:T.completedOrders})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-100 p-6 rounded-xl shadow-lg border border-emerald-100 transform transition-all duration-300 hover:scale-105",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-teal-800",children:"סיכום כספי"}),c.jsx("div",{className:"p-2 bg-white bg-opacity-80 rounded-full",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-teal-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:'סה"כ הכנסות:'}),c.jsxs("span",{className:"text-xl font-bold text-teal-800",children:["₪",Math.round(T.totalIncome)]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:"ממוצע להזמנה:"}),c.jsxs("span",{className:"text-lg font-bold text-teal-700",children:["₪",T.totalOrders>0?Math.round(T.totalIncome/T.totalOrders):"0"]})]}),c.jsx("div",{className:"mt-4 pt-4 border-t border-teal-200",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-sm text-teal-700",children:"הכנסה חודשית משוערת"}),c.jsxs("div",{className:"text-2xl font-bold text-teal-800 mt-1",children:["₪",Math.round(T.totalIncome/(T.totalOrders?T.totalOrders:1)*30)]})]})})]})]}),c.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-100 p-6 rounded-xl shadow-lg border border-purple-100 transform transition-all duration-300 hover:scale-105",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-purple-800",children:"סטטיסטיקה"}),c.jsx("div",{className:"p-2 bg-white bg-opacity-80 rounded-full",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:"מספר מוצרים:"}),c.jsx("span",{className:"text-xl font-bold text-purple-800",children:n.length})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:"מספר קטגוריות:"}),c.jsx("span",{className:"text-xl font-bold text-purple-800",children:i.length})]}),c.jsx("div",{className:"mt-4 pt-4 border-t border-purple-200",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:"יחס מוצרים לקטגוריה:"}),c.jsx("span",{className:"text-lg font-bold text-purple-700",children:i.length>0?(n.length/i.length).toFixed(1):"0"})]})})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"מוצרים מובילים"}),c.jsx("div",{className:"text-sm text-gray-500",children:"5 המוצרים הנמכרים ביותר"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50",children:[c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider rounded-tr-lg",children:"שם המוצר"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"כמות שנמכרה"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider rounded-tl-lg",children:'סה"כ הכנסות'})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:T.topProducts.map((_,N)=>c.jsxs("tr",{className:N%2===0?"bg-gray-50":"bg-white",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-indigo-600 font-bold",children:N+1})}),c.jsx("div",{className:"mr-4",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:_.name})})]})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"text-sm text-gray-900 font-semibold",children:_.quantity}),c.jsx("div",{className:"text-xs text-gray-500",children:"יחידות"})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"text-sm font-bold text-emerald-600",children:["₪",_.total]})})]},N))})]})})]})]})]})}function vS(){const[t,e]=w.useState(!1);return c.jsx(tx,{children:c.jsxs("div",{className:"min-h-screen flex flex-col",children:[c.jsx(Z0,{isAdmin:t,setIsAdmin:e}),c.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:c.jsxs(j0,{children:[c.jsx(Mt,{path:"/",element:c.jsx(mh,{})}),c.jsx(Mt,{path:"/products",element:c.jsx(nx,{})}),c.jsx(Mt,{path:"/cart",element:c.jsx(rx,{})}),c.jsx(Mt,{path:"/checkout",element:c.jsx(pS,{})}),c.jsx(Mt,{path:"/order-success",element:c.jsx(mS,{})}),c.jsx(Mt,{path:"/admin",element:t?c.jsx(gS,{}):c.jsx(mh,{})}),c.jsx(Mt,{path:"*",element:c.jsx(R0,{to:"/",replace:!0})})]})})]})})}fu.init("wdkhxkDvY1CBqWjhm");const yS=()=>{qo().length===0&&Qa([{id:"1",name:"פירות וירקות",description:"פירות וירקות טריים"},{id:"2",name:"מוצרי חלב",description:"חלב, גבינות ומוצרי חלב"},{id:"3",name:"לחם ומאפים",description:"לחם טרי ומאפים"},{id:"4",name:"משקאות",description:"מים, מיצים ומשקאות קלים"}]),Ko().length===0&&Ha([{id:"1",name:"תפוחים",description:"תפוחים טריים מהמטע",price:5.9,image:"https://images.unsplash.com/photo-1570913149827-d2ac84ab3f9a?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"1"},{id:"2",name:"בננות",description:"בננות טריות",price:4.9,image:"https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"1"},{id:"3",name:"חלב טרי",description:"חלב טרי 3% שומן",price:6.5,image:"https://images.unsplash.com/photo-1563636619-e9143da7973b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"2"},{id:"4",name:"גבינה צהובה",description:"גבינה צהובה 28% שומן",price:12.9,image:"https://images.unsplash.com/photo-1486297678162-eb2a19b0a32d?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"2"},{id:"5",name:"לחם אחיד",description:"לחם אחיד פרוס",price:7.9,image:"https://images.unsplash.com/photo-1549931319-a545dcf3bc7c?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"3"},{id:"6",name:"לחמניות",description:"לחמניות טריות",price:9.9,image:"https://images.unsplash.com/photo-1589367920969-ab8e050bbb04?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"3"},{id:"7",name:"מים מינרלים",description:"מים מינרלים טבעיים",price:8.9,image:"https://images.unsplash.com/photo-1564419320461-6870880221ad?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"4"},{id:"8",name:"מיץ תפוזים",description:"מיץ תפוזים טבעי",price:10.9,image:"https://images.unsplash.com/photo-1600271886742-f049cd451bba?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"4"}])};yS();Kl.createRoot(document.getElementById("root")).render(c.jsx(xf.StrictMode,{children:c.jsx(z0,{children:c.jsx(vS,{})})}));
