function gv(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(t,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function vv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var pf={exports:{}},Do={},mf={exports:{}},U={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qi=Symbol.for("react.element"),yv=Symbol.for("react.portal"),_v=Symbol.for("react.fragment"),xv=Symbol.for("react.strict_mode"),wv=Symbol.for("react.profiler"),Cv=Symbol.for("react.provider"),Ev=Symbol.for("react.context"),Sv=Symbol.for("react.forward_ref"),Nv=Symbol.for("react.suspense"),kv=Symbol.for("react.memo"),Iv=Symbol.for("react.lazy"),ed=Symbol.iterator;function Tv(t){return t===null||typeof t!="object"?null:(t=ed&&t[ed]||t["@@iterator"],typeof t=="function"?t:null)}var gf={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},vf=Object.assign,yf={};function Rr(t,e,n){this.props=t,this.context=e,this.refs=yf,this.updater=n||gf}Rr.prototype.isReactComponent={};Rr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Rr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function _f(){}_f.prototype=Rr.prototype;function vu(t,e,n){this.props=t,this.context=e,this.refs=yf,this.updater=n||gf}var yu=vu.prototype=new _f;yu.constructor=vu;vf(yu,Rr.prototype);yu.isPureReactComponent=!0;var td=Array.isArray,xf=Object.prototype.hasOwnProperty,_u={current:null},wf={key:!0,ref:!0,__self:!0,__source:!0};function Cf(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)xf.call(e,r)&&!wf.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:qi,type:t,key:s,ref:o,props:i,_owner:_u.current}}function Pv(t,e){return{$$typeof:qi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function xu(t){return typeof t=="object"&&t!==null&&t.$$typeof===qi}function Rv(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var nd=/\/+/g;function fl(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Rv(""+t.key):e.toString(36)}function bs(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qi:case yv:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+fl(o,0):r,td(i)?(n="",t!=null&&(n=t.replace(nd,"$&/")+"/"),bs(i,e,n,"",function(u){return u})):i!=null&&(xu(i)&&(i=Pv(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(nd,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",td(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+fl(s,l);o+=bs(s,e,n,a,i)}else if(a=Tv(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+fl(s,l++),o+=bs(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function fs(t,e,n){if(t==null)return t;var r=[],i=0;return bs(t,r,"","",function(s){return e.call(n,s,i++)}),r}function jv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Oe={current:null},Os={transition:null},bv={ReactCurrentDispatcher:Oe,ReactCurrentBatchConfig:Os,ReactCurrentOwner:_u};function Ef(){throw Error("act(...) is not supported in production builds of React.")}U.Children={map:fs,forEach:function(t,e,n){fs(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return fs(t,function(){e++}),e},toArray:function(t){return fs(t,function(e){return e})||[]},only:function(t){if(!xu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};U.Component=Rr;U.Fragment=_v;U.Profiler=wv;U.PureComponent=vu;U.StrictMode=xv;U.Suspense=Nv;U.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=bv;U.act=Ef;U.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=vf({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=_u.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)xf.call(e,a)&&!wf.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}return{$$typeof:qi,type:t.type,key:i,ref:s,props:r,_owner:o}};U.createContext=function(t){return t={$$typeof:Ev,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Cv,_context:t},t.Consumer=t};U.createElement=Cf;U.createFactory=function(t){var e=Cf.bind(null,t);return e.type=t,e};U.createRef=function(){return{current:null}};U.forwardRef=function(t){return{$$typeof:Sv,render:t}};U.isValidElement=xu;U.lazy=function(t){return{$$typeof:Iv,_payload:{_status:-1,_result:t},_init:jv}};U.memo=function(t,e){return{$$typeof:kv,type:t,compare:e===void 0?null:e}};U.startTransition=function(t){var e=Os.transition;Os.transition={};try{t()}finally{Os.transition=e}};U.unstable_act=Ef;U.useCallback=function(t,e){return Oe.current.useCallback(t,e)};U.useContext=function(t){return Oe.current.useContext(t)};U.useDebugValue=function(){};U.useDeferredValue=function(t){return Oe.current.useDeferredValue(t)};U.useEffect=function(t,e){return Oe.current.useEffect(t,e)};U.useId=function(){return Oe.current.useId()};U.useImperativeHandle=function(t,e,n){return Oe.current.useImperativeHandle(t,e,n)};U.useInsertionEffect=function(t,e){return Oe.current.useInsertionEffect(t,e)};U.useLayoutEffect=function(t,e){return Oe.current.useLayoutEffect(t,e)};U.useMemo=function(t,e){return Oe.current.useMemo(t,e)};U.useReducer=function(t,e,n){return Oe.current.useReducer(t,e,n)};U.useRef=function(t){return Oe.current.useRef(t)};U.useState=function(t){return Oe.current.useState(t)};U.useSyncExternalStore=function(t,e,n){return Oe.current.useSyncExternalStore(t,e,n)};U.useTransition=function(){return Oe.current.useTransition()};U.version="18.3.1";mf.exports=U;var x=mf.exports;const Sf=vv(x),Ov=gv({__proto__:null,default:Sf},[x]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Dv=x,Av=Symbol.for("react.element"),Lv=Symbol.for("react.fragment"),Mv=Object.prototype.hasOwnProperty,Fv=Dv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,zv={key:!0,ref:!0,__self:!0,__source:!0};function Nf(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)Mv.call(e,r)&&!zv.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:Av,type:t,key:s,ref:o,props:i,_owner:Fv.current}}Do.Fragment=Lv;Do.jsx=Nf;Do.jsxs=Nf;pf.exports=Do;var c=pf.exports,Xl={},kf={exports:{}},Ge={},If={exports:{}},Tf={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(P,D){var L=P.length;P.push(D);e:for(;0<L;){var ne=L-1>>>1,W=P[ne];if(0<i(W,D))P[ne]=D,P[L]=W,L=ne;else break e}}function n(P){return P.length===0?null:P[0]}function r(P){if(P.length===0)return null;var D=P[0],L=P.pop();if(L!==D){P[0]=L;e:for(var ne=0,W=P.length,w=W>>>1;ne<w;){var I=2*(ne+1)-1,V=P[I],H=I+1,Ae=P[H];if(0>i(V,L))H<W&&0>i(Ae,V)?(P[ne]=Ae,P[H]=L,ne=H):(P[ne]=V,P[I]=L,ne=I);else if(H<W&&0>i(Ae,L))P[ne]=Ae,P[H]=L,ne=H;else break e}}return D}function i(P,D){var L=P.sortIndex-D.sortIndex;return L!==0?L:P.id-D.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],u=[],h=1,d=null,f=3,v=!1,y=!1,_=!1,E=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,p=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function g(P){for(var D=n(u);D!==null;){if(D.callback===null)r(u);else if(D.startTime<=P)r(u),D.sortIndex=D.expirationTime,e(a,D);else break;D=n(u)}}function C(P){if(_=!1,g(P),!y)if(n(a)!==null)y=!0,Fr(k);else{var D=n(u);D!==null&&zr(C,D.startTime-P)}}function k(P,D){y=!1,_&&(_=!1,m(b),b=-1),v=!0;var L=f;try{for(g(D),d=n(a);d!==null&&(!(d.expirationTime>D)||P&&!We());){var ne=d.callback;if(typeof ne=="function"){d.callback=null,f=d.priorityLevel;var W=ne(d.expirationTime<=D);D=t.unstable_now(),typeof W=="function"?d.callback=W:d===n(a)&&r(a),g(D)}else r(a);d=n(a)}if(d!==null)var w=!0;else{var I=n(u);I!==null&&zr(C,I.startTime-D),w=!1}return w}finally{d=null,f=L,v=!1}}var j=!1,T=null,b=-1,te=5,A=-1;function We(){return!(t.unstable_now()-A<te)}function zt(){if(T!==null){var P=t.unstable_now();A=P;var D=!0;try{D=T(!0,P)}finally{D?xn():(j=!1,T=null)}}else j=!1}var xn;if(typeof p=="function")xn=function(){p(zt)};else if(typeof MessageChannel<"u"){var hs=new MessageChannel,hl=hs.port2;hs.port1.onmessage=zt,xn=function(){hl.postMessage(null)}}else xn=function(){E(zt,0)};function Fr(P){T=P,j||(j=!0,xn())}function zr(P,D){b=E(function(){P(t.unstable_now())},D)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(P){P.callback=null},t.unstable_continueExecution=function(){y||v||(y=!0,Fr(k))},t.unstable_forceFrameRate=function(P){0>P||125<P?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):te=0<P?Math.floor(1e3/P):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(P){switch(f){case 1:case 2:case 3:var D=3;break;default:D=f}var L=f;f=D;try{return P()}finally{f=L}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(P,D){switch(P){case 1:case 2:case 3:case 4:case 5:break;default:P=3}var L=f;f=P;try{return D()}finally{f=L}},t.unstable_scheduleCallback=function(P,D,L){var ne=t.unstable_now();switch(typeof L=="object"&&L!==null?(L=L.delay,L=typeof L=="number"&&0<L?ne+L:ne):L=ne,P){case 1:var W=-1;break;case 2:W=250;break;case 5:W=1073741823;break;case 4:W=1e4;break;default:W=5e3}return W=L+W,P={id:h++,callback:D,priorityLevel:P,startTime:L,expirationTime:W,sortIndex:-1},L>ne?(P.sortIndex=L,e(u,P),n(a)===null&&P===n(u)&&(_?(m(b),b=-1):_=!0,zr(C,L-ne))):(P.sortIndex=W,e(a,P),y||v||(y=!0,Fr(k))),P},t.unstable_shouldYield=We,t.unstable_wrapCallback=function(P){var D=f;return function(){var L=f;f=D;try{return P.apply(this,arguments)}finally{f=L}}}})(Tf);If.exports=Tf;var Uv=If.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Bv=x,Qe=Uv;function S(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Pf=new Set,vi={};function zn(t,e){vr(t,e),vr(t+"Capture",e)}function vr(t,e){for(vi[t]=e,t=0;t<e.length;t++)Pf.add(e[t])}var Rt=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jl=Object.prototype.hasOwnProperty,Wv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rd={},id={};function $v(t){return Jl.call(id,t)?!0:Jl.call(rd,t)?!1:Wv.test(t)?id[t]=!0:(rd[t]=!0,!1)}function Vv(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Hv(t,e,n,r){if(e===null||typeof e>"u"||Vv(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function De(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ee={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Ee[t]=new De(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Ee[e]=new De(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Ee[t]=new De(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Ee[t]=new De(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Ee[t]=new De(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Ee[t]=new De(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Ee[t]=new De(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Ee[t]=new De(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Ee[t]=new De(t,5,!1,t.toLowerCase(),null,!1,!1)});var wu=/[\-:]([a-z])/g;function Cu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(wu,Cu);Ee[e]=new De(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(wu,Cu);Ee[e]=new De(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(wu,Cu);Ee[e]=new De(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Ee[t]=new De(t,1,!1,t.toLowerCase(),null,!1,!1)});Ee.xlinkHref=new De("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Ee[t]=new De(t,1,!1,t.toLowerCase(),null,!0,!0)});function Eu(t,e,n,r){var i=Ee.hasOwnProperty(e)?Ee[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Hv(e,n,i,r)&&(n=null),r||i===null?$v(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Lt=Bv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ps=Symbol.for("react.element"),qn=Symbol.for("react.portal"),Yn=Symbol.for("react.fragment"),Su=Symbol.for("react.strict_mode"),Zl=Symbol.for("react.profiler"),Rf=Symbol.for("react.provider"),jf=Symbol.for("react.context"),Nu=Symbol.for("react.forward_ref"),ea=Symbol.for("react.suspense"),ta=Symbol.for("react.suspense_list"),ku=Symbol.for("react.memo"),Wt=Symbol.for("react.lazy"),bf=Symbol.for("react.offscreen"),sd=Symbol.iterator;function Br(t){return t===null||typeof t!="object"?null:(t=sd&&t[sd]||t["@@iterator"],typeof t=="function"?t:null)}var se=Object.assign,pl;function Zr(t){if(pl===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);pl=e&&e[1]||""}return`
`+pl+t}var ml=!1;function gl(t,e){if(!t||ml)return"";ml=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var r=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){r=u}t.call(e.prototype)}else{try{throw Error()}catch(u){r=u}t()}}catch(u){if(u&&r&&typeof u.stack=="string"){for(var i=u.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{ml=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Zr(t):""}function Qv(t){switch(t.tag){case 5:return Zr(t.type);case 16:return Zr("Lazy");case 13:return Zr("Suspense");case 19:return Zr("SuspenseList");case 0:case 2:case 15:return t=gl(t.type,!1),t;case 11:return t=gl(t.type.render,!1),t;case 1:return t=gl(t.type,!0),t;default:return""}}function na(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Yn:return"Fragment";case qn:return"Portal";case Zl:return"Profiler";case Su:return"StrictMode";case ea:return"Suspense";case ta:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case jf:return(t.displayName||"Context")+".Consumer";case Rf:return(t._context.displayName||"Context")+".Provider";case Nu:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case ku:return e=t.displayName||null,e!==null?e:na(t.type)||"Memo";case Wt:e=t._payload,t=t._init;try{return na(t(e))}catch{}}return null}function Gv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return na(e);case 8:return e===Su?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function cn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Of(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Kv(t){var e=Of(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ms(t){t._valueTracker||(t._valueTracker=Kv(t))}function Df(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=Of(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Hs(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ra(t,e){var n=e.checked;return se({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function od(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=cn(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Af(t,e){e=e.checked,e!=null&&Eu(t,"checked",e,!1)}function ia(t,e){Af(t,e);var n=cn(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?sa(t,e.type,n):e.hasOwnProperty("defaultValue")&&sa(t,e.type,cn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function ld(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function sa(t,e,n){(e!=="number"||Hs(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var ei=Array.isArray;function ar(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+cn(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function oa(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(S(91));return se({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function ad(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(S(92));if(ei(n)){if(1<n.length)throw Error(S(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:cn(n)}}function Lf(t,e){var n=cn(e.value),r=cn(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function ud(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Mf(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function la(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Mf(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var gs,Ff=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(gs=gs||document.createElement("div"),gs.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=gs.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function yi(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ri={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},qv=["Webkit","ms","Moz","O"];Object.keys(ri).forEach(function(t){qv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ri[e]=ri[t]})});function zf(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ri.hasOwnProperty(t)&&ri[t]?(""+e).trim():e+"px"}function Uf(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=zf(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var Yv=se({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function aa(t,e){if(e){if(Yv[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(S(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(S(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(S(61))}if(e.style!=null&&typeof e.style!="object")throw Error(S(62))}}function ua(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ca=null;function Iu(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var da=null,ur=null,cr=null;function cd(t){if(t=Ji(t)){if(typeof da!="function")throw Error(S(280));var e=t.stateNode;e&&(e=zo(e),da(t.stateNode,t.type,e))}}function Bf(t){ur?cr?cr.push(t):cr=[t]:ur=t}function Wf(){if(ur){var t=ur,e=cr;if(cr=ur=null,cd(t),e)for(t=0;t<e.length;t++)cd(e[t])}}function $f(t,e){return t(e)}function Vf(){}var vl=!1;function Hf(t,e,n){if(vl)return t(e,n);vl=!0;try{return $f(t,e,n)}finally{vl=!1,(ur!==null||cr!==null)&&(Vf(),Wf())}}function _i(t,e){var n=t.stateNode;if(n===null)return null;var r=zo(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(S(231,e,typeof n));return n}var ha=!1;if(Rt)try{var Wr={};Object.defineProperty(Wr,"passive",{get:function(){ha=!0}}),window.addEventListener("test",Wr,Wr),window.removeEventListener("test",Wr,Wr)}catch{ha=!1}function Xv(t,e,n,r,i,s,o,l,a){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(h){this.onError(h)}}var ii=!1,Qs=null,Gs=!1,fa=null,Jv={onError:function(t){ii=!0,Qs=t}};function Zv(t,e,n,r,i,s,o,l,a){ii=!1,Qs=null,Xv.apply(Jv,arguments)}function ey(t,e,n,r,i,s,o,l,a){if(Zv.apply(this,arguments),ii){if(ii){var u=Qs;ii=!1,Qs=null}else throw Error(S(198));Gs||(Gs=!0,fa=u)}}function Un(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function Qf(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function dd(t){if(Un(t)!==t)throw Error(S(188))}function ty(t){var e=t.alternate;if(!e){if(e=Un(t),e===null)throw Error(S(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return dd(i),t;if(s===r)return dd(i),e;s=s.sibling}throw Error(S(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(S(189))}}if(n.alternate!==r)throw Error(S(190))}if(n.tag!==3)throw Error(S(188));return n.stateNode.current===n?t:e}function Gf(t){return t=ty(t),t!==null?Kf(t):null}function Kf(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kf(t);if(e!==null)return e;t=t.sibling}return null}var qf=Qe.unstable_scheduleCallback,hd=Qe.unstable_cancelCallback,ny=Qe.unstable_shouldYield,ry=Qe.unstable_requestPaint,ue=Qe.unstable_now,iy=Qe.unstable_getCurrentPriorityLevel,Tu=Qe.unstable_ImmediatePriority,Yf=Qe.unstable_UserBlockingPriority,Ks=Qe.unstable_NormalPriority,sy=Qe.unstable_LowPriority,Xf=Qe.unstable_IdlePriority,Ao=null,_t=null;function oy(t){if(_t&&typeof _t.onCommitFiberRoot=="function")try{_t.onCommitFiberRoot(Ao,t,void 0,(t.current.flags&128)===128)}catch{}}var ht=Math.clz32?Math.clz32:uy,ly=Math.log,ay=Math.LN2;function uy(t){return t>>>=0,t===0?32:31-(ly(t)/ay|0)|0}var vs=64,ys=4194304;function ti(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function qs(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=ti(l):(s&=o,s!==0&&(r=ti(s)))}else o=n&~i,o!==0?r=ti(o):s!==0&&(r=ti(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-ht(e),i=1<<n,r|=t[n],e&=~i;return r}function cy(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function dy(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-ht(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=cy(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function pa(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Jf(){var t=vs;return vs<<=1,!(vs&4194240)&&(vs=64),t}function yl(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Yi(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ht(e),t[e]=n}function hy(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-ht(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function Pu(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-ht(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Q=0;function Zf(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var ep,Ru,tp,np,rp,ma=!1,_s=[],Yt=null,Xt=null,Jt=null,xi=new Map,wi=new Map,Vt=[],fy="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fd(t,e){switch(t){case"focusin":case"focusout":Yt=null;break;case"dragenter":case"dragleave":Xt=null;break;case"mouseover":case"mouseout":Jt=null;break;case"pointerover":case"pointerout":xi.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wi.delete(e.pointerId)}}function $r(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=Ji(e),e!==null&&Ru(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function py(t,e,n,r,i){switch(e){case"focusin":return Yt=$r(Yt,t,e,n,r,i),!0;case"dragenter":return Xt=$r(Xt,t,e,n,r,i),!0;case"mouseover":return Jt=$r(Jt,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return xi.set(s,$r(xi.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,wi.set(s,$r(wi.get(s)||null,t,e,n,r,i)),!0}return!1}function ip(t){var e=Nn(t.target);if(e!==null){var n=Un(e);if(n!==null){if(e=n.tag,e===13){if(e=Qf(n),e!==null){t.blockedOn=e,rp(t.priority,function(){tp(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Ds(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=ga(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);ca=r,n.target.dispatchEvent(r),ca=null}else return e=Ji(n),e!==null&&Ru(e),t.blockedOn=n,!1;e.shift()}return!0}function pd(t,e,n){Ds(t)&&n.delete(e)}function my(){ma=!1,Yt!==null&&Ds(Yt)&&(Yt=null),Xt!==null&&Ds(Xt)&&(Xt=null),Jt!==null&&Ds(Jt)&&(Jt=null),xi.forEach(pd),wi.forEach(pd)}function Vr(t,e){t.blockedOn===e&&(t.blockedOn=null,ma||(ma=!0,Qe.unstable_scheduleCallback(Qe.unstable_NormalPriority,my)))}function Ci(t){function e(i){return Vr(i,t)}if(0<_s.length){Vr(_s[0],t);for(var n=1;n<_s.length;n++){var r=_s[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Yt!==null&&Vr(Yt,t),Xt!==null&&Vr(Xt,t),Jt!==null&&Vr(Jt,t),xi.forEach(e),wi.forEach(e),n=0;n<Vt.length;n++)r=Vt[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Vt.length&&(n=Vt[0],n.blockedOn===null);)ip(n),n.blockedOn===null&&Vt.shift()}var dr=Lt.ReactCurrentBatchConfig,Ys=!0;function gy(t,e,n,r){var i=Q,s=dr.transition;dr.transition=null;try{Q=1,ju(t,e,n,r)}finally{Q=i,dr.transition=s}}function vy(t,e,n,r){var i=Q,s=dr.transition;dr.transition=null;try{Q=4,ju(t,e,n,r)}finally{Q=i,dr.transition=s}}function ju(t,e,n,r){if(Ys){var i=ga(t,e,n,r);if(i===null)Tl(t,e,r,Xs,n),fd(t,r);else if(py(i,t,e,n,r))r.stopPropagation();else if(fd(t,r),e&4&&-1<fy.indexOf(t)){for(;i!==null;){var s=Ji(i);if(s!==null&&ep(s),s=ga(t,e,n,r),s===null&&Tl(t,e,r,Xs,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else Tl(t,e,r,null,n)}}var Xs=null;function ga(t,e,n,r){if(Xs=null,t=Iu(r),t=Nn(t),t!==null)if(e=Un(t),e===null)t=null;else if(n=e.tag,n===13){if(t=Qf(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Xs=t,null}function sp(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(iy()){case Tu:return 1;case Yf:return 4;case Ks:case sy:return 16;case Xf:return 536870912;default:return 16}default:return 16}}var Qt=null,bu=null,As=null;function op(){if(As)return As;var t,e=bu,n=e.length,r,i="value"in Qt?Qt.value:Qt.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return As=i.slice(t,1<r?1-r:void 0)}function Ls(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function xs(){return!0}function md(){return!1}function Ke(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?xs:md,this.isPropagationStopped=md,this}return se(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=xs)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=xs)},persist:function(){},isPersistent:xs}),e}var jr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ou=Ke(jr),Xi=se({},jr,{view:0,detail:0}),yy=Ke(Xi),_l,xl,Hr,Lo=se({},Xi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Du,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Hr&&(Hr&&t.type==="mousemove"?(_l=t.screenX-Hr.screenX,xl=t.screenY-Hr.screenY):xl=_l=0,Hr=t),_l)},movementY:function(t){return"movementY"in t?t.movementY:xl}}),gd=Ke(Lo),_y=se({},Lo,{dataTransfer:0}),xy=Ke(_y),wy=se({},Xi,{relatedTarget:0}),wl=Ke(wy),Cy=se({},jr,{animationName:0,elapsedTime:0,pseudoElement:0}),Ey=Ke(Cy),Sy=se({},jr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Ny=Ke(Sy),ky=se({},jr,{data:0}),vd=Ke(ky),Iy={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Ty={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Py={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Ry(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Py[t])?!!e[t]:!1}function Du(){return Ry}var jy=se({},Xi,{key:function(t){if(t.key){var e=Iy[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ls(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Ty[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Du,charCode:function(t){return t.type==="keypress"?Ls(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ls(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),by=Ke(jy),Oy=se({},Lo,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),yd=Ke(Oy),Dy=se({},Xi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Du}),Ay=Ke(Dy),Ly=se({},jr,{propertyName:0,elapsedTime:0,pseudoElement:0}),My=Ke(Ly),Fy=se({},Lo,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),zy=Ke(Fy),Uy=[9,13,27,32],Au=Rt&&"CompositionEvent"in window,si=null;Rt&&"documentMode"in document&&(si=document.documentMode);var By=Rt&&"TextEvent"in window&&!si,lp=Rt&&(!Au||si&&8<si&&11>=si),_d=" ",xd=!1;function ap(t,e){switch(t){case"keyup":return Uy.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function up(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Xn=!1;function Wy(t,e){switch(t){case"compositionend":return up(e);case"keypress":return e.which!==32?null:(xd=!0,_d);case"textInput":return t=e.data,t===_d&&xd?null:t;default:return null}}function $y(t,e){if(Xn)return t==="compositionend"||!Au&&ap(t,e)?(t=op(),As=bu=Qt=null,Xn=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return lp&&e.locale!=="ko"?null:e.data;default:return null}}var Vy={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function wd(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Vy[t.type]:e==="textarea"}function cp(t,e,n,r){Bf(r),e=Js(e,"onChange"),0<e.length&&(n=new Ou("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var oi=null,Ei=null;function Hy(t){wp(t,0)}function Mo(t){var e=er(t);if(Df(e))return t}function Qy(t,e){if(t==="change")return e}var dp=!1;if(Rt){var Cl;if(Rt){var El="oninput"in document;if(!El){var Cd=document.createElement("div");Cd.setAttribute("oninput","return;"),El=typeof Cd.oninput=="function"}Cl=El}else Cl=!1;dp=Cl&&(!document.documentMode||9<document.documentMode)}function Ed(){oi&&(oi.detachEvent("onpropertychange",hp),Ei=oi=null)}function hp(t){if(t.propertyName==="value"&&Mo(Ei)){var e=[];cp(e,Ei,t,Iu(t)),Hf(Hy,e)}}function Gy(t,e,n){t==="focusin"?(Ed(),oi=e,Ei=n,oi.attachEvent("onpropertychange",hp)):t==="focusout"&&Ed()}function Ky(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Mo(Ei)}function qy(t,e){if(t==="click")return Mo(e)}function Yy(t,e){if(t==="input"||t==="change")return Mo(e)}function Xy(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var mt=typeof Object.is=="function"?Object.is:Xy;function Si(t,e){if(mt(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Jl.call(e,i)||!mt(t[i],e[i]))return!1}return!0}function Sd(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Nd(t,e){var n=Sd(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Sd(n)}}function fp(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?fp(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function pp(){for(var t=window,e=Hs();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Hs(t.document)}return e}function Lu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function Jy(t){var e=pp(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&fp(n.ownerDocument.documentElement,n)){if(r!==null&&Lu(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Nd(n,s);var o=Nd(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Zy=Rt&&"documentMode"in document&&11>=document.documentMode,Jn=null,va=null,li=null,ya=!1;function kd(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ya||Jn==null||Jn!==Hs(r)||(r=Jn,"selectionStart"in r&&Lu(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),li&&Si(li,r)||(li=r,r=Js(va,"onSelect"),0<r.length&&(e=new Ou("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Jn)))}function ws(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Zn={animationend:ws("Animation","AnimationEnd"),animationiteration:ws("Animation","AnimationIteration"),animationstart:ws("Animation","AnimationStart"),transitionend:ws("Transition","TransitionEnd")},Sl={},mp={};Rt&&(mp=document.createElement("div").style,"AnimationEvent"in window||(delete Zn.animationend.animation,delete Zn.animationiteration.animation,delete Zn.animationstart.animation),"TransitionEvent"in window||delete Zn.transitionend.transition);function Fo(t){if(Sl[t])return Sl[t];if(!Zn[t])return t;var e=Zn[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in mp)return Sl[t]=e[n];return t}var gp=Fo("animationend"),vp=Fo("animationiteration"),yp=Fo("animationstart"),_p=Fo("transitionend"),xp=new Map,Id="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function mn(t,e){xp.set(t,e),zn(e,[t])}for(var Nl=0;Nl<Id.length;Nl++){var kl=Id[Nl],e_=kl.toLowerCase(),t_=kl[0].toUpperCase()+kl.slice(1);mn(e_,"on"+t_)}mn(gp,"onAnimationEnd");mn(vp,"onAnimationIteration");mn(yp,"onAnimationStart");mn("dblclick","onDoubleClick");mn("focusin","onFocus");mn("focusout","onBlur");mn(_p,"onTransitionEnd");vr("onMouseEnter",["mouseout","mouseover"]);vr("onMouseLeave",["mouseout","mouseover"]);vr("onPointerEnter",["pointerout","pointerover"]);vr("onPointerLeave",["pointerout","pointerover"]);zn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));zn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));zn("onBeforeInput",["compositionend","keypress","textInput","paste"]);zn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));zn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),n_=new Set("cancel close invalid load scroll toggle".split(" ").concat(ni));function Td(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,ey(r,e,void 0,t),t.currentTarget=null}function wp(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,u=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;Td(i,l,u),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,u=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;Td(i,l,u),s=a}}}if(Gs)throw t=fa,Gs=!1,fa=null,t}function J(t,e){var n=e[Ea];n===void 0&&(n=e[Ea]=new Set);var r=t+"__bubble";n.has(r)||(Cp(e,t,2,!1),n.add(r))}function Il(t,e,n){var r=0;e&&(r|=4),Cp(n,t,r,e)}var Cs="_reactListening"+Math.random().toString(36).slice(2);function Ni(t){if(!t[Cs]){t[Cs]=!0,Pf.forEach(function(n){n!=="selectionchange"&&(n_.has(n)||Il(n,!1,t),Il(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Cs]||(e[Cs]=!0,Il("selectionchange",!1,e))}}function Cp(t,e,n,r){switch(sp(e)){case 1:var i=gy;break;case 4:i=vy;break;default:i=ju}n=i.bind(null,e,n,t),i=void 0,!ha||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function Tl(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=Nn(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}Hf(function(){var u=s,h=Iu(n),d=[];e:{var f=xp.get(t);if(f!==void 0){var v=Ou,y=t;switch(t){case"keypress":if(Ls(n)===0)break e;case"keydown":case"keyup":v=by;break;case"focusin":y="focus",v=wl;break;case"focusout":y="blur",v=wl;break;case"beforeblur":case"afterblur":v=wl;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":v=gd;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":v=xy;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":v=Ay;break;case gp:case vp:case yp:v=Ey;break;case _p:v=My;break;case"scroll":v=yy;break;case"wheel":v=zy;break;case"copy":case"cut":case"paste":v=Ny;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":v=yd}var _=(e&4)!==0,E=!_&&t==="scroll",m=_?f!==null?f+"Capture":null:f;_=[];for(var p=u,g;p!==null;){g=p;var C=g.stateNode;if(g.tag===5&&C!==null&&(g=C,m!==null&&(C=_i(p,m),C!=null&&_.push(ki(p,C,g)))),E)break;p=p.return}0<_.length&&(f=new v(f,y,null,n,h),d.push({event:f,listeners:_}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",v=t==="mouseout"||t==="pointerout",f&&n!==ca&&(y=n.relatedTarget||n.fromElement)&&(Nn(y)||y[jt]))break e;if((v||f)&&(f=h.window===h?h:(f=h.ownerDocument)?f.defaultView||f.parentWindow:window,v?(y=n.relatedTarget||n.toElement,v=u,y=y?Nn(y):null,y!==null&&(E=Un(y),y!==E||y.tag!==5&&y.tag!==6)&&(y=null)):(v=null,y=u),v!==y)){if(_=gd,C="onMouseLeave",m="onMouseEnter",p="mouse",(t==="pointerout"||t==="pointerover")&&(_=yd,C="onPointerLeave",m="onPointerEnter",p="pointer"),E=v==null?f:er(v),g=y==null?f:er(y),f=new _(C,p+"leave",v,n,h),f.target=E,f.relatedTarget=g,C=null,Nn(h)===u&&(_=new _(m,p+"enter",y,n,h),_.target=g,_.relatedTarget=E,C=_),E=C,v&&y)t:{for(_=v,m=y,p=0,g=_;g;g=Qn(g))p++;for(g=0,C=m;C;C=Qn(C))g++;for(;0<p-g;)_=Qn(_),p--;for(;0<g-p;)m=Qn(m),g--;for(;p--;){if(_===m||m!==null&&_===m.alternate)break t;_=Qn(_),m=Qn(m)}_=null}else _=null;v!==null&&Pd(d,f,v,_,!1),y!==null&&E!==null&&Pd(d,E,y,_,!0)}}e:{if(f=u?er(u):window,v=f.nodeName&&f.nodeName.toLowerCase(),v==="select"||v==="input"&&f.type==="file")var k=Qy;else if(wd(f))if(dp)k=Yy;else{k=Ky;var j=Gy}else(v=f.nodeName)&&v.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(k=qy);if(k&&(k=k(t,u))){cp(d,k,n,h);break e}j&&j(t,f,u),t==="focusout"&&(j=f._wrapperState)&&j.controlled&&f.type==="number"&&sa(f,"number",f.value)}switch(j=u?er(u):window,t){case"focusin":(wd(j)||j.contentEditable==="true")&&(Jn=j,va=u,li=null);break;case"focusout":li=va=Jn=null;break;case"mousedown":ya=!0;break;case"contextmenu":case"mouseup":case"dragend":ya=!1,kd(d,n,h);break;case"selectionchange":if(Zy)break;case"keydown":case"keyup":kd(d,n,h)}var T;if(Au)e:{switch(t){case"compositionstart":var b="onCompositionStart";break e;case"compositionend":b="onCompositionEnd";break e;case"compositionupdate":b="onCompositionUpdate";break e}b=void 0}else Xn?ap(t,n)&&(b="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(b="onCompositionStart");b&&(lp&&n.locale!=="ko"&&(Xn||b!=="onCompositionStart"?b==="onCompositionEnd"&&Xn&&(T=op()):(Qt=h,bu="value"in Qt?Qt.value:Qt.textContent,Xn=!0)),j=Js(u,b),0<j.length&&(b=new vd(b,t,null,n,h),d.push({event:b,listeners:j}),T?b.data=T:(T=up(n),T!==null&&(b.data=T)))),(T=By?Wy(t,n):$y(t,n))&&(u=Js(u,"onBeforeInput"),0<u.length&&(h=new vd("onBeforeInput","beforeinput",null,n,h),d.push({event:h,listeners:u}),h.data=T))}wp(d,e)})}function ki(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Js(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=_i(t,n),s!=null&&r.unshift(ki(t,s,i)),s=_i(t,e),s!=null&&r.push(ki(t,s,i))),t=t.return}return r}function Qn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Pd(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,u=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&u!==null&&(l=u,i?(a=_i(n,s),a!=null&&o.unshift(ki(n,a,l))):i||(a=_i(n,s),a!=null&&o.push(ki(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var r_=/\r\n?/g,i_=/\u0000|\uFFFD/g;function Rd(t){return(typeof t=="string"?t:""+t).replace(r_,`
`).replace(i_,"")}function Es(t,e,n){if(e=Rd(e),Rd(t)!==e&&n)throw Error(S(425))}function Zs(){}var _a=null,xa=null;function wa(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ca=typeof setTimeout=="function"?setTimeout:void 0,s_=typeof clearTimeout=="function"?clearTimeout:void 0,jd=typeof Promise=="function"?Promise:void 0,o_=typeof queueMicrotask=="function"?queueMicrotask:typeof jd<"u"?function(t){return jd.resolve(null).then(t).catch(l_)}:Ca;function l_(t){setTimeout(function(){throw t})}function Pl(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ci(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ci(e)}function Zt(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function bd(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var br=Math.random().toString(36).slice(2),yt="__reactFiber$"+br,Ii="__reactProps$"+br,jt="__reactContainer$"+br,Ea="__reactEvents$"+br,a_="__reactListeners$"+br,u_="__reactHandles$"+br;function Nn(t){var e=t[yt];if(e)return e;for(var n=t.parentNode;n;){if(e=n[jt]||n[yt]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=bd(t);t!==null;){if(n=t[yt])return n;t=bd(t)}return e}t=n,n=t.parentNode}return null}function Ji(t){return t=t[yt]||t[jt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function er(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(S(33))}function zo(t){return t[Ii]||null}var Sa=[],tr=-1;function gn(t){return{current:t}}function Z(t){0>tr||(t.current=Sa[tr],Sa[tr]=null,tr--)}function X(t,e){tr++,Sa[tr]=t.current,t.current=e}var dn={},Te=gn(dn),ze=gn(!1),jn=dn;function yr(t,e){var n=t.type.contextTypes;if(!n)return dn;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function Ue(t){return t=t.childContextTypes,t!=null}function eo(){Z(ze),Z(Te)}function Od(t,e,n){if(Te.current!==dn)throw Error(S(168));X(Te,e),X(ze,n)}function Ep(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(S(108,Gv(t)||"Unknown",i));return se({},n,r)}function to(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||dn,jn=Te.current,X(Te,t),X(ze,ze.current),!0}function Dd(t,e,n){var r=t.stateNode;if(!r)throw Error(S(169));n?(t=Ep(t,e,jn),r.__reactInternalMemoizedMergedChildContext=t,Z(ze),Z(Te),X(Te,t)):Z(ze),X(ze,n)}var Et=null,Uo=!1,Rl=!1;function Sp(t){Et===null?Et=[t]:Et.push(t)}function c_(t){Uo=!0,Sp(t)}function vn(){if(!Rl&&Et!==null){Rl=!0;var t=0,e=Q;try{var n=Et;for(Q=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Et=null,Uo=!1}catch(i){throw Et!==null&&(Et=Et.slice(t+1)),qf(Tu,vn),i}finally{Q=e,Rl=!1}}return null}var nr=[],rr=0,no=null,ro=0,Ye=[],Xe=0,bn=null,St=1,Nt="";function wn(t,e){nr[rr++]=ro,nr[rr++]=no,no=t,ro=e}function Np(t,e,n){Ye[Xe++]=St,Ye[Xe++]=Nt,Ye[Xe++]=bn,bn=t;var r=St;t=Nt;var i=32-ht(r)-1;r&=~(1<<i),n+=1;var s=32-ht(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,St=1<<32-ht(e)+i|n<<i|r,Nt=s+t}else St=1<<s|n<<i|r,Nt=t}function Mu(t){t.return!==null&&(wn(t,1),Np(t,1,0))}function Fu(t){for(;t===no;)no=nr[--rr],nr[rr]=null,ro=nr[--rr],nr[rr]=null;for(;t===bn;)bn=Ye[--Xe],Ye[Xe]=null,Nt=Ye[--Xe],Ye[Xe]=null,St=Ye[--Xe],Ye[Xe]=null}var He=null,Ve=null,ee=!1,ut=null;function kp(t,e){var n=Je(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Ad(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,He=t,Ve=Zt(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,He=t,Ve=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=bn!==null?{id:St,overflow:Nt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Je(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,He=t,Ve=null,!0):!1;default:return!1}}function Na(t){return(t.mode&1)!==0&&(t.flags&128)===0}function ka(t){if(ee){var e=Ve;if(e){var n=e;if(!Ad(t,e)){if(Na(t))throw Error(S(418));e=Zt(n.nextSibling);var r=He;e&&Ad(t,e)?kp(r,n):(t.flags=t.flags&-4097|2,ee=!1,He=t)}}else{if(Na(t))throw Error(S(418));t.flags=t.flags&-4097|2,ee=!1,He=t}}}function Ld(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;He=t}function Ss(t){if(t!==He)return!1;if(!ee)return Ld(t),ee=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!wa(t.type,t.memoizedProps)),e&&(e=Ve)){if(Na(t))throw Ip(),Error(S(418));for(;e;)kp(t,e),e=Zt(e.nextSibling)}if(Ld(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(S(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Ve=Zt(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Ve=null}}else Ve=He?Zt(t.stateNode.nextSibling):null;return!0}function Ip(){for(var t=Ve;t;)t=Zt(t.nextSibling)}function _r(){Ve=He=null,ee=!1}function zu(t){ut===null?ut=[t]:ut.push(t)}var d_=Lt.ReactCurrentBatchConfig;function Qr(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(S(309));var r=n.stateNode}if(!r)throw Error(S(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(S(284));if(!n._owner)throw Error(S(290,t))}return t}function Ns(t,e){throw t=Object.prototype.toString.call(e),Error(S(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Md(t){var e=t._init;return e(t._payload)}function Tp(t){function e(m,p){if(t){var g=m.deletions;g===null?(m.deletions=[p],m.flags|=16):g.push(p)}}function n(m,p){if(!t)return null;for(;p!==null;)e(m,p),p=p.sibling;return null}function r(m,p){for(m=new Map;p!==null;)p.key!==null?m.set(p.key,p):m.set(p.index,p),p=p.sibling;return m}function i(m,p){return m=rn(m,p),m.index=0,m.sibling=null,m}function s(m,p,g){return m.index=g,t?(g=m.alternate,g!==null?(g=g.index,g<p?(m.flags|=2,p):g):(m.flags|=2,p)):(m.flags|=1048576,p)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,p,g,C){return p===null||p.tag!==6?(p=Ml(g,m.mode,C),p.return=m,p):(p=i(p,g),p.return=m,p)}function a(m,p,g,C){var k=g.type;return k===Yn?h(m,p,g.props.children,C,g.key):p!==null&&(p.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Wt&&Md(k)===p.type)?(C=i(p,g.props),C.ref=Qr(m,p,g),C.return=m,C):(C=$s(g.type,g.key,g.props,null,m.mode,C),C.ref=Qr(m,p,g),C.return=m,C)}function u(m,p,g,C){return p===null||p.tag!==4||p.stateNode.containerInfo!==g.containerInfo||p.stateNode.implementation!==g.implementation?(p=Fl(g,m.mode,C),p.return=m,p):(p=i(p,g.children||[]),p.return=m,p)}function h(m,p,g,C,k){return p===null||p.tag!==7?(p=Rn(g,m.mode,C,k),p.return=m,p):(p=i(p,g),p.return=m,p)}function d(m,p,g){if(typeof p=="string"&&p!==""||typeof p=="number")return p=Ml(""+p,m.mode,g),p.return=m,p;if(typeof p=="object"&&p!==null){switch(p.$$typeof){case ps:return g=$s(p.type,p.key,p.props,null,m.mode,g),g.ref=Qr(m,null,p),g.return=m,g;case qn:return p=Fl(p,m.mode,g),p.return=m,p;case Wt:var C=p._init;return d(m,C(p._payload),g)}if(ei(p)||Br(p))return p=Rn(p,m.mode,g,null),p.return=m,p;Ns(m,p)}return null}function f(m,p,g,C){var k=p!==null?p.key:null;if(typeof g=="string"&&g!==""||typeof g=="number")return k!==null?null:l(m,p,""+g,C);if(typeof g=="object"&&g!==null){switch(g.$$typeof){case ps:return g.key===k?a(m,p,g,C):null;case qn:return g.key===k?u(m,p,g,C):null;case Wt:return k=g._init,f(m,p,k(g._payload),C)}if(ei(g)||Br(g))return k!==null?null:h(m,p,g,C,null);Ns(m,g)}return null}function v(m,p,g,C,k){if(typeof C=="string"&&C!==""||typeof C=="number")return m=m.get(g)||null,l(p,m,""+C,k);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case ps:return m=m.get(C.key===null?g:C.key)||null,a(p,m,C,k);case qn:return m=m.get(C.key===null?g:C.key)||null,u(p,m,C,k);case Wt:var j=C._init;return v(m,p,g,j(C._payload),k)}if(ei(C)||Br(C))return m=m.get(g)||null,h(p,m,C,k,null);Ns(p,C)}return null}function y(m,p,g,C){for(var k=null,j=null,T=p,b=p=0,te=null;T!==null&&b<g.length;b++){T.index>b?(te=T,T=null):te=T.sibling;var A=f(m,T,g[b],C);if(A===null){T===null&&(T=te);break}t&&T&&A.alternate===null&&e(m,T),p=s(A,p,b),j===null?k=A:j.sibling=A,j=A,T=te}if(b===g.length)return n(m,T),ee&&wn(m,b),k;if(T===null){for(;b<g.length;b++)T=d(m,g[b],C),T!==null&&(p=s(T,p,b),j===null?k=T:j.sibling=T,j=T);return ee&&wn(m,b),k}for(T=r(m,T);b<g.length;b++)te=v(T,m,b,g[b],C),te!==null&&(t&&te.alternate!==null&&T.delete(te.key===null?b:te.key),p=s(te,p,b),j===null?k=te:j.sibling=te,j=te);return t&&T.forEach(function(We){return e(m,We)}),ee&&wn(m,b),k}function _(m,p,g,C){var k=Br(g);if(typeof k!="function")throw Error(S(150));if(g=k.call(g),g==null)throw Error(S(151));for(var j=k=null,T=p,b=p=0,te=null,A=g.next();T!==null&&!A.done;b++,A=g.next()){T.index>b?(te=T,T=null):te=T.sibling;var We=f(m,T,A.value,C);if(We===null){T===null&&(T=te);break}t&&T&&We.alternate===null&&e(m,T),p=s(We,p,b),j===null?k=We:j.sibling=We,j=We,T=te}if(A.done)return n(m,T),ee&&wn(m,b),k;if(T===null){for(;!A.done;b++,A=g.next())A=d(m,A.value,C),A!==null&&(p=s(A,p,b),j===null?k=A:j.sibling=A,j=A);return ee&&wn(m,b),k}for(T=r(m,T);!A.done;b++,A=g.next())A=v(T,m,b,A.value,C),A!==null&&(t&&A.alternate!==null&&T.delete(A.key===null?b:A.key),p=s(A,p,b),j===null?k=A:j.sibling=A,j=A);return t&&T.forEach(function(zt){return e(m,zt)}),ee&&wn(m,b),k}function E(m,p,g,C){if(typeof g=="object"&&g!==null&&g.type===Yn&&g.key===null&&(g=g.props.children),typeof g=="object"&&g!==null){switch(g.$$typeof){case ps:e:{for(var k=g.key,j=p;j!==null;){if(j.key===k){if(k=g.type,k===Yn){if(j.tag===7){n(m,j.sibling),p=i(j,g.props.children),p.return=m,m=p;break e}}else if(j.elementType===k||typeof k=="object"&&k!==null&&k.$$typeof===Wt&&Md(k)===j.type){n(m,j.sibling),p=i(j,g.props),p.ref=Qr(m,j,g),p.return=m,m=p;break e}n(m,j);break}else e(m,j);j=j.sibling}g.type===Yn?(p=Rn(g.props.children,m.mode,C,g.key),p.return=m,m=p):(C=$s(g.type,g.key,g.props,null,m.mode,C),C.ref=Qr(m,p,g),C.return=m,m=C)}return o(m);case qn:e:{for(j=g.key;p!==null;){if(p.key===j)if(p.tag===4&&p.stateNode.containerInfo===g.containerInfo&&p.stateNode.implementation===g.implementation){n(m,p.sibling),p=i(p,g.children||[]),p.return=m,m=p;break e}else{n(m,p);break}else e(m,p);p=p.sibling}p=Fl(g,m.mode,C),p.return=m,m=p}return o(m);case Wt:return j=g._init,E(m,p,j(g._payload),C)}if(ei(g))return y(m,p,g,C);if(Br(g))return _(m,p,g,C);Ns(m,g)}return typeof g=="string"&&g!==""||typeof g=="number"?(g=""+g,p!==null&&p.tag===6?(n(m,p.sibling),p=i(p,g),p.return=m,m=p):(n(m,p),p=Ml(g,m.mode,C),p.return=m,m=p),o(m)):n(m,p)}return E}var xr=Tp(!0),Pp=Tp(!1),io=gn(null),so=null,ir=null,Uu=null;function Bu(){Uu=ir=so=null}function Wu(t){var e=io.current;Z(io),t._currentValue=e}function Ia(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function hr(t,e){so=t,Uu=ir=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Me=!0),t.firstContext=null)}function nt(t){var e=t._currentValue;if(Uu!==t)if(t={context:t,memoizedValue:e,next:null},ir===null){if(so===null)throw Error(S(308));ir=t,so.dependencies={lanes:0,firstContext:t}}else ir=ir.next=t;return e}var kn=null;function $u(t){kn===null?kn=[t]:kn.push(t)}function Rp(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,$u(e)):(n.next=i.next,i.next=n),e.interleaved=n,bt(t,r)}function bt(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var $t=!1;function Vu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function jp(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function It(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function en(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,B&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,bt(t,n)}return i=r.interleaved,i===null?(e.next=e,$u(r)):(e.next=i.next,i.next=e),r.interleaved=e,bt(t,n)}function Ms(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pu(t,n)}}function Fd(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function oo(t,e,n,r){var i=t.updateQueue;$t=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,u=a.next;a.next=null,o===null?s=u:o.next=u,o=a;var h=t.alternate;h!==null&&(h=h.updateQueue,l=h.lastBaseUpdate,l!==o&&(l===null?h.firstBaseUpdate=u:l.next=u,h.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,h=u=a=null,l=s;do{var f=l.lane,v=l.eventTime;if((r&f)===f){h!==null&&(h=h.next={eventTime:v,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,_=l;switch(f=e,v=n,_.tag){case 1:if(y=_.payload,typeof y=="function"){d=y.call(v,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=_.payload,f=typeof y=="function"?y.call(v,d,f):y,f==null)break e;d=se({},d,f);break e;case 2:$t=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else v={eventTime:v,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},h===null?(u=h=v,a=d):h=h.next=v,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(!0);if(h===null&&(a=d),i.baseState=a,i.firstBaseUpdate=u,i.lastBaseUpdate=h,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Dn|=o,t.lanes=o,t.memoizedState=d}}function zd(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(S(191,i));i.call(r)}}}var Zi={},xt=gn(Zi),Ti=gn(Zi),Pi=gn(Zi);function In(t){if(t===Zi)throw Error(S(174));return t}function Hu(t,e){switch(X(Pi,e),X(Ti,t),X(xt,Zi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:la(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=la(e,t)}Z(xt),X(xt,e)}function wr(){Z(xt),Z(Ti),Z(Pi)}function bp(t){In(Pi.current);var e=In(xt.current),n=la(e,t.type);e!==n&&(X(Ti,t),X(xt,n))}function Qu(t){Ti.current===t&&(Z(xt),Z(Ti))}var re=gn(0);function lo(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var jl=[];function Gu(){for(var t=0;t<jl.length;t++)jl[t]._workInProgressVersionPrimary=null;jl.length=0}var Fs=Lt.ReactCurrentDispatcher,bl=Lt.ReactCurrentBatchConfig,On=0,ie=null,he=null,ve=null,ao=!1,ai=!1,Ri=0,h_=0;function Ne(){throw Error(S(321))}function Ku(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!mt(t[n],e[n]))return!1;return!0}function qu(t,e,n,r,i,s){if(On=s,ie=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Fs.current=t===null||t.memoizedState===null?g_:v_,t=n(r,i),ai){s=0;do{if(ai=!1,Ri=0,25<=s)throw Error(S(301));s+=1,ve=he=null,e.updateQueue=null,Fs.current=y_,t=n(r,i)}while(ai)}if(Fs.current=uo,e=he!==null&&he.next!==null,On=0,ve=he=ie=null,ao=!1,e)throw Error(S(300));return t}function Yu(){var t=Ri!==0;return Ri=0,t}function vt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ve===null?ie.memoizedState=ve=t:ve=ve.next=t,ve}function rt(){if(he===null){var t=ie.alternate;t=t!==null?t.memoizedState:null}else t=he.next;var e=ve===null?ie.memoizedState:ve.next;if(e!==null)ve=e,he=t;else{if(t===null)throw Error(S(310));he=t,t={memoizedState:he.memoizedState,baseState:he.baseState,baseQueue:he.baseQueue,queue:he.queue,next:null},ve===null?ie.memoizedState=ve=t:ve=ve.next=t}return ve}function ji(t,e){return typeof e=="function"?e(t):e}function Ol(t){var e=rt(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=he,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,u=s;do{var h=u.lane;if((On&h)===h)a!==null&&(a=a.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),r=u.hasEagerState?u.eagerState:t(r,u.action);else{var d={lane:h,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,ie.lanes|=h,Dn|=h}u=u.next}while(u!==null&&u!==s);a===null?o=r:a.next=l,mt(r,e.memoizedState)||(Me=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,ie.lanes|=s,Dn|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Dl(t){var e=rt(),n=e.queue;if(n===null)throw Error(S(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);mt(s,e.memoizedState)||(Me=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function Op(){}function Dp(t,e){var n=ie,r=rt(),i=e(),s=!mt(r.memoizedState,i);if(s&&(r.memoizedState=i,Me=!0),r=r.queue,Xu(Mp.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||ve!==null&&ve.memoizedState.tag&1){if(n.flags|=2048,bi(9,Lp.bind(null,n,r,i,e),void 0,null),_e===null)throw Error(S(349));On&30||Ap(n,e,i)}return i}function Ap(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function Lp(t,e,n,r){e.value=n,e.getSnapshot=r,Fp(e)&&zp(t)}function Mp(t,e,n){return n(function(){Fp(e)&&zp(t)})}function Fp(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!mt(t,n)}catch{return!0}}function zp(t){var e=bt(t,1);e!==null&&ft(e,t,1,-1)}function Ud(t){var e=vt();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ji,lastRenderedState:t},e.queue=t,t=t.dispatch=m_.bind(null,ie,t),[e.memoizedState,t]}function bi(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=ie.updateQueue,e===null?(e={lastEffect:null,stores:null},ie.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function Up(){return rt().memoizedState}function zs(t,e,n,r){var i=vt();ie.flags|=t,i.memoizedState=bi(1|e,n,void 0,r===void 0?null:r)}function Bo(t,e,n,r){var i=rt();r=r===void 0?null:r;var s=void 0;if(he!==null){var o=he.memoizedState;if(s=o.destroy,r!==null&&Ku(r,o.deps)){i.memoizedState=bi(e,n,s,r);return}}ie.flags|=t,i.memoizedState=bi(1|e,n,s,r)}function Bd(t,e){return zs(8390656,8,t,e)}function Xu(t,e){return Bo(2048,8,t,e)}function Bp(t,e){return Bo(4,2,t,e)}function Wp(t,e){return Bo(4,4,t,e)}function $p(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Vp(t,e,n){return n=n!=null?n.concat([t]):null,Bo(4,4,$p.bind(null,e,t),n)}function Ju(){}function Hp(t,e){var n=rt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ku(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function Qp(t,e){var n=rt();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ku(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function Gp(t,e,n){return On&21?(mt(n,e)||(n=Jf(),ie.lanes|=n,Dn|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Me=!0),t.memoizedState=n)}function f_(t,e){var n=Q;Q=n!==0&&4>n?n:4,t(!0);var r=bl.transition;bl.transition={};try{t(!1),e()}finally{Q=n,bl.transition=r}}function Kp(){return rt().memoizedState}function p_(t,e,n){var r=nn(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},qp(t))Yp(e,n);else if(n=Rp(t,e,n,r),n!==null){var i=je();ft(n,t,r,i),Xp(n,e,r)}}function m_(t,e,n){var r=nn(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(qp(t))Yp(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,mt(l,o)){var a=e.interleaved;a===null?(i.next=i,$u(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=Rp(t,e,i,r),n!==null&&(i=je(),ft(n,t,r,i),Xp(n,e,r))}}function qp(t){var e=t.alternate;return t===ie||e!==null&&e===ie}function Yp(t,e){ai=ao=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Xp(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Pu(t,n)}}var uo={readContext:nt,useCallback:Ne,useContext:Ne,useEffect:Ne,useImperativeHandle:Ne,useInsertionEffect:Ne,useLayoutEffect:Ne,useMemo:Ne,useReducer:Ne,useRef:Ne,useState:Ne,useDebugValue:Ne,useDeferredValue:Ne,useTransition:Ne,useMutableSource:Ne,useSyncExternalStore:Ne,useId:Ne,unstable_isNewReconciler:!1},g_={readContext:nt,useCallback:function(t,e){return vt().memoizedState=[t,e===void 0?null:e],t},useContext:nt,useEffect:Bd,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,zs(4194308,4,$p.bind(null,e,t),n)},useLayoutEffect:function(t,e){return zs(4194308,4,t,e)},useInsertionEffect:function(t,e){return zs(4,2,t,e)},useMemo:function(t,e){var n=vt();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=vt();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=p_.bind(null,ie,t),[r.memoizedState,t]},useRef:function(t){var e=vt();return t={current:t},e.memoizedState=t},useState:Ud,useDebugValue:Ju,useDeferredValue:function(t){return vt().memoizedState=t},useTransition:function(){var t=Ud(!1),e=t[0];return t=f_.bind(null,t[1]),vt().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=ie,i=vt();if(ee){if(n===void 0)throw Error(S(407));n=n()}else{if(n=e(),_e===null)throw Error(S(349));On&30||Ap(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,Bd(Mp.bind(null,r,s,t),[t]),r.flags|=2048,bi(9,Lp.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=vt(),e=_e.identifierPrefix;if(ee){var n=Nt,r=St;n=(r&~(1<<32-ht(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ri++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=h_++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},v_={readContext:nt,useCallback:Hp,useContext:nt,useEffect:Xu,useImperativeHandle:Vp,useInsertionEffect:Bp,useLayoutEffect:Wp,useMemo:Qp,useReducer:Ol,useRef:Up,useState:function(){return Ol(ji)},useDebugValue:Ju,useDeferredValue:function(t){var e=rt();return Gp(e,he.memoizedState,t)},useTransition:function(){var t=Ol(ji)[0],e=rt().memoizedState;return[t,e]},useMutableSource:Op,useSyncExternalStore:Dp,useId:Kp,unstable_isNewReconciler:!1},y_={readContext:nt,useCallback:Hp,useContext:nt,useEffect:Xu,useImperativeHandle:Vp,useInsertionEffect:Bp,useLayoutEffect:Wp,useMemo:Qp,useReducer:Dl,useRef:Up,useState:function(){return Dl(ji)},useDebugValue:Ju,useDeferredValue:function(t){var e=rt();return he===null?e.memoizedState=t:Gp(e,he.memoizedState,t)},useTransition:function(){var t=Dl(ji)[0],e=rt().memoizedState;return[t,e]},useMutableSource:Op,useSyncExternalStore:Dp,useId:Kp,unstable_isNewReconciler:!1};function lt(t,e){if(t&&t.defaultProps){e=se({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function Ta(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:se({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Wo={isMounted:function(t){return(t=t._reactInternals)?Un(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=je(),i=nn(t),s=It(r,i);s.payload=e,n!=null&&(s.callback=n),e=en(t,s,i),e!==null&&(ft(e,t,i,r),Ms(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=je(),i=nn(t),s=It(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=en(t,s,i),e!==null&&(ft(e,t,i,r),Ms(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=je(),r=nn(t),i=It(n,r);i.tag=2,e!=null&&(i.callback=e),e=en(t,i,r),e!==null&&(ft(e,t,r,n),Ms(e,t,r))}};function Wd(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Si(n,r)||!Si(i,s):!0}function Jp(t,e,n){var r=!1,i=dn,s=e.contextType;return typeof s=="object"&&s!==null?s=nt(s):(i=Ue(e)?jn:Te.current,r=e.contextTypes,s=(r=r!=null)?yr(t,i):dn),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Wo,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function $d(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&Wo.enqueueReplaceState(e,e.state,null)}function Pa(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs={},Vu(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=nt(s):(s=Ue(e)?jn:Te.current,i.context=yr(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Ta(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&Wo.enqueueReplaceState(i,i.state,null),oo(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Cr(t,e){try{var n="",r=e;do n+=Qv(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Al(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Ra(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var __=typeof WeakMap=="function"?WeakMap:Map;function Zp(t,e,n){n=It(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){ho||(ho=!0,Ua=r),Ra(t,e)},n}function em(t,e,n){n=It(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Ra(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Ra(t,e),typeof r!="function"&&(tn===null?tn=new Set([this]):tn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function Vd(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new __;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=O_.bind(null,t,e,n),e.then(t,t))}function Hd(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Qd(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=It(-1,1),e.tag=2,en(n,e,1))),n.lanes|=1),t)}var x_=Lt.ReactCurrentOwner,Me=!1;function Pe(t,e,n,r){e.child=t===null?Pp(e,null,n,r):xr(e,t.child,n,r)}function Gd(t,e,n,r,i){n=n.render;var s=e.ref;return hr(e,i),r=qu(t,e,n,r,s,i),n=Yu(),t!==null&&!Me?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ot(t,e,i)):(ee&&n&&Mu(e),e.flags|=1,Pe(t,e,r,i),e.child)}function Kd(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!oc(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,tm(t,e,s,r,i)):(t=$s(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Si,n(o,r)&&t.ref===e.ref)return Ot(t,e,i)}return e.flags|=1,t=rn(s,r),t.ref=e.ref,t.return=e,e.child=t}function tm(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Si(s,r)&&t.ref===e.ref)if(Me=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Me=!0);else return e.lanes=t.lanes,Ot(t,e,i)}return ja(t,e,n,r,i)}function nm(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},X(or,$e),$e|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,X(or,$e),$e|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,X(or,$e),$e|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,X(or,$e),$e|=r;return Pe(t,e,i,n),e.child}function rm(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function ja(t,e,n,r,i){var s=Ue(n)?jn:Te.current;return s=yr(e,s),hr(e,i),n=qu(t,e,n,r,s,i),r=Yu(),t!==null&&!Me?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Ot(t,e,i)):(ee&&r&&Mu(e),e.flags|=1,Pe(t,e,n,i),e.child)}function qd(t,e,n,r,i){if(Ue(n)){var s=!0;to(e)}else s=!1;if(hr(e,i),e.stateNode===null)Us(t,e),Jp(e,n,r),Pa(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=nt(u):(u=Ue(n)?jn:Te.current,u=yr(e,u));var h=n.getDerivedStateFromProps,d=typeof h=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==u)&&$d(e,o,r,u),$t=!1;var f=e.memoizedState;o.state=f,oo(e,r,o,i),a=e.memoizedState,l!==r||f!==a||ze.current||$t?(typeof h=="function"&&(Ta(e,n,h,r),a=e.memoizedState),(l=$t||Wd(e,n,l,r,f,a,u))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=u,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,jp(t,e),l=e.memoizedProps,u=e.type===e.elementType?l:lt(e.type,l),o.props=u,d=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=nt(a):(a=Ue(n)?jn:Te.current,a=yr(e,a));var v=n.getDerivedStateFromProps;(h=typeof v=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==a)&&$d(e,o,r,a),$t=!1,f=e.memoizedState,o.state=f,oo(e,r,o,i);var y=e.memoizedState;l!==d||f!==y||ze.current||$t?(typeof v=="function"&&(Ta(e,n,v,r),y=e.memoizedState),(u=$t||Wd(e,n,u,r,f,y,a)||!1)?(h||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=a,r=u):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return ba(t,e,n,r,s,i)}function ba(t,e,n,r,i,s){rm(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&Dd(e,n,!1),Ot(t,e,s);r=e.stateNode,x_.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=xr(e,t.child,null,s),e.child=xr(e,null,l,s)):Pe(t,e,l,s),e.memoizedState=r.state,i&&Dd(e,n,!0),e.child}function im(t){var e=t.stateNode;e.pendingContext?Od(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Od(t,e.context,!1),Hu(t,e.containerInfo)}function Yd(t,e,n,r,i){return _r(),zu(i),e.flags|=256,Pe(t,e,n,r),e.child}var Oa={dehydrated:null,treeContext:null,retryLane:0};function Da(t){return{baseLanes:t,cachePool:null,transitions:null}}function sm(t,e,n){var r=e.pendingProps,i=re.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),X(re,i&1),t===null)return ka(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Ho(o,r,0,null),t=Rn(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Da(n),e.memoizedState=Oa,t):Zu(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return w_(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=rn(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=rn(l,s):(s=Rn(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Da(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Oa,r}return s=t.child,t=s.sibling,r=rn(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Zu(t,e){return e=Ho({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function ks(t,e,n,r){return r!==null&&zu(r),xr(e,t.child,null,n),t=Zu(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function w_(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Al(Error(S(422))),ks(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=Ho({mode:"visible",children:r.children},i,0,null),s=Rn(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&xr(e,t.child,null,o),e.child.memoizedState=Da(o),e.memoizedState=Oa,s);if(!(e.mode&1))return ks(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(S(419)),r=Al(s,r,void 0),ks(t,e,o,r)}if(l=(o&t.childLanes)!==0,Me||l){if(r=_e,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,bt(t,i),ft(r,t,i,-1))}return sc(),r=Al(Error(S(421))),ks(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=D_.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,Ve=Zt(i.nextSibling),He=e,ee=!0,ut=null,t!==null&&(Ye[Xe++]=St,Ye[Xe++]=Nt,Ye[Xe++]=bn,St=t.id,Nt=t.overflow,bn=e),e=Zu(e,r.children),e.flags|=4096,e)}function Xd(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Ia(t.return,e,n)}function Ll(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function om(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(Pe(t,e,r.children,n),r=re.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xd(t,n,e);else if(t.tag===19)Xd(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(X(re,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&lo(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),Ll(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&lo(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}Ll(e,!0,n,null,s);break;case"together":Ll(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Us(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Ot(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Dn|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(S(153));if(e.child!==null){for(t=e.child,n=rn(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=rn(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function C_(t,e,n){switch(e.tag){case 3:im(e),_r();break;case 5:bp(e);break;case 1:Ue(e.type)&&to(e);break;case 4:Hu(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;X(io,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(X(re,re.current&1),e.flags|=128,null):n&e.child.childLanes?sm(t,e,n):(X(re,re.current&1),t=Ot(t,e,n),t!==null?t.sibling:null);X(re,re.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return om(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),X(re,re.current),r)break;return null;case 22:case 23:return e.lanes=0,nm(t,e,n)}return Ot(t,e,n)}var lm,Aa,am,um;lm=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Aa=function(){};am=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,In(xt.current);var s=null;switch(n){case"input":i=ra(t,i),r=ra(t,r),s=[];break;case"select":i=se({},i,{value:void 0}),r=se({},r,{value:void 0}),s=[];break;case"textarea":i=oa(t,i),r=oa(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=Zs)}aa(n,r);var o;n=null;for(u in i)if(!r.hasOwnProperty(u)&&i.hasOwnProperty(u)&&i[u]!=null)if(u==="style"){var l=i[u];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(vi.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in r){var a=r[u];if(l=i!=null?i[u]:void 0,r.hasOwnProperty(u)&&a!==l&&(a!=null||l!=null))if(u==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(u,n)),n=a;else u==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(u,a)):u==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(u,""+a):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(vi.hasOwnProperty(u)?(a!=null&&u==="onScroll"&&J("scroll",t),s||l===a||(s=[])):(s=s||[]).push(u,a))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};um=function(t,e,n,r){n!==r&&(e.flags|=4)};function Gr(t,e){if(!ee)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function ke(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function E_(t,e,n){var r=e.pendingProps;switch(Fu(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ke(e),null;case 1:return Ue(e.type)&&eo(),ke(e),null;case 3:return r=e.stateNode,wr(),Z(ze),Z(Te),Gu(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(Ss(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ut!==null&&($a(ut),ut=null))),Aa(t,e),ke(e),null;case 5:Qu(e);var i=In(Pi.current);if(n=e.type,t!==null&&e.stateNode!=null)am(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(S(166));return ke(e),null}if(t=In(xt.current),Ss(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[yt]=e,r[Ii]=s,t=(e.mode&1)!==0,n){case"dialog":J("cancel",r),J("close",r);break;case"iframe":case"object":case"embed":J("load",r);break;case"video":case"audio":for(i=0;i<ni.length;i++)J(ni[i],r);break;case"source":J("error",r);break;case"img":case"image":case"link":J("error",r),J("load",r);break;case"details":J("toggle",r);break;case"input":od(r,s),J("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},J("invalid",r);break;case"textarea":ad(r,s),J("invalid",r)}aa(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&Es(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&Es(r.textContent,l,t),i=["children",""+l]):vi.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&J("scroll",r)}switch(n){case"input":ms(r),ld(r,s,!0);break;case"textarea":ms(r),ud(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=Zs)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Mf(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[yt]=e,t[Ii]=r,lm(t,e,!1,!1),e.stateNode=t;e:{switch(o=ua(n,r),n){case"dialog":J("cancel",t),J("close",t),i=r;break;case"iframe":case"object":case"embed":J("load",t),i=r;break;case"video":case"audio":for(i=0;i<ni.length;i++)J(ni[i],t);i=r;break;case"source":J("error",t),i=r;break;case"img":case"image":case"link":J("error",t),J("load",t),i=r;break;case"details":J("toggle",t),i=r;break;case"input":od(t,r),i=ra(t,r),J("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=se({},r,{value:void 0}),J("invalid",t);break;case"textarea":ad(t,r),i=oa(t,r),J("invalid",t);break;default:i=r}aa(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?Uf(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&Ff(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&yi(t,a):typeof a=="number"&&yi(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(vi.hasOwnProperty(s)?a!=null&&s==="onScroll"&&J("scroll",t):a!=null&&Eu(t,s,a,o))}switch(n){case"input":ms(t),ld(t,r,!1);break;case"textarea":ms(t),ud(t);break;case"option":r.value!=null&&t.setAttribute("value",""+cn(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ar(t,!!r.multiple,s,!1):r.defaultValue!=null&&ar(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=Zs)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ke(e),null;case 6:if(t&&e.stateNode!=null)um(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(S(166));if(n=In(Pi.current),In(xt.current),Ss(e)){if(r=e.stateNode,n=e.memoizedProps,r[yt]=e,(s=r.nodeValue!==n)&&(t=He,t!==null))switch(t.tag){case 3:Es(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Es(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[yt]=e,e.stateNode=r}return ke(e),null;case 13:if(Z(re),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(ee&&Ve!==null&&e.mode&1&&!(e.flags&128))Ip(),_r(),e.flags|=98560,s=!1;else if(s=Ss(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(S(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(S(317));s[yt]=e}else _r(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ke(e),s=!1}else ut!==null&&($a(ut),ut=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||re.current&1?me===0&&(me=3):sc())),e.updateQueue!==null&&(e.flags|=4),ke(e),null);case 4:return wr(),Aa(t,e),t===null&&Ni(e.stateNode.containerInfo),ke(e),null;case 10:return Wu(e.type._context),ke(e),null;case 17:return Ue(e.type)&&eo(),ke(e),null;case 19:if(Z(re),s=e.memoizedState,s===null)return ke(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)Gr(s,!1);else{if(me!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=lo(t),o!==null){for(e.flags|=128,Gr(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return X(re,re.current&1|2),e.child}t=t.sibling}s.tail!==null&&ue()>Er&&(e.flags|=128,r=!0,Gr(s,!1),e.lanes=4194304)}else{if(!r)if(t=lo(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Gr(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ee)return ke(e),null}else 2*ue()-s.renderingStartTime>Er&&n!==1073741824&&(e.flags|=128,r=!0,Gr(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=ue(),e.sibling=null,n=re.current,X(re,r?n&1|2:n&1),e):(ke(e),null);case 22:case 23:return ic(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?$e&1073741824&&(ke(e),e.subtreeFlags&6&&(e.flags|=8192)):ke(e),null;case 24:return null;case 25:return null}throw Error(S(156,e.tag))}function S_(t,e){switch(Fu(e),e.tag){case 1:return Ue(e.type)&&eo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return wr(),Z(ze),Z(Te),Gu(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Qu(e),null;case 13:if(Z(re),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(S(340));_r()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Z(re),null;case 4:return wr(),null;case 10:return Wu(e.type._context),null;case 22:case 23:return ic(),null;case 24:return null;default:return null}}var Is=!1,Ie=!1,N_=typeof WeakSet=="function"?WeakSet:Set,R=null;function sr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){oe(t,e,r)}else n.current=null}function La(t,e,n){try{n()}catch(r){oe(t,e,r)}}var Jd=!1;function k_(t,e){if(_a=Ys,t=pp(),Lu(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,u=0,h=0,d=t,f=null;t:for(;;){for(var v;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(v=d.firstChild)!==null;)f=d,d=v;for(;;){if(d===t)break t;if(f===n&&++u===i&&(l=o),f===s&&++h===r&&(a=o),(v=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=v}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(xa={focusedElem:t,selectionRange:n},Ys=!1,R=e;R!==null;)if(e=R,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,R=t;else for(;R!==null;){e=R;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var _=y.memoizedProps,E=y.memoizedState,m=e.stateNode,p=m.getSnapshotBeforeUpdate(e.elementType===e.type?_:lt(e.type,_),E);m.__reactInternalSnapshotBeforeUpdate=p}break;case 3:var g=e.stateNode.containerInfo;g.nodeType===1?g.textContent="":g.nodeType===9&&g.documentElement&&g.removeChild(g.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(S(163))}}catch(C){oe(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,R=t;break}R=e.return}return y=Jd,Jd=!1,y}function ui(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&La(e,n,s)}i=i.next}while(i!==r)}}function $o(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Ma(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function cm(t){var e=t.alternate;e!==null&&(t.alternate=null,cm(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[yt],delete e[Ii],delete e[Ea],delete e[a_],delete e[u_])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dm(t){return t.tag===5||t.tag===3||t.tag===4}function Zd(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dm(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fa(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Zs));else if(r!==4&&(t=t.child,t!==null))for(Fa(t,e,n),t=t.sibling;t!==null;)Fa(t,e,n),t=t.sibling}function za(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(za(t,e,n),t=t.sibling;t!==null;)za(t,e,n),t=t.sibling}var xe=null,at=!1;function Ut(t,e,n){for(n=n.child;n!==null;)hm(t,e,n),n=n.sibling}function hm(t,e,n){if(_t&&typeof _t.onCommitFiberUnmount=="function")try{_t.onCommitFiberUnmount(Ao,n)}catch{}switch(n.tag){case 5:Ie||sr(n,e);case 6:var r=xe,i=at;xe=null,Ut(t,e,n),xe=r,at=i,xe!==null&&(at?(t=xe,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xe.removeChild(n.stateNode));break;case 18:xe!==null&&(at?(t=xe,n=n.stateNode,t.nodeType===8?Pl(t.parentNode,n):t.nodeType===1&&Pl(t,n),Ci(t)):Pl(xe,n.stateNode));break;case 4:r=xe,i=at,xe=n.stateNode.containerInfo,at=!0,Ut(t,e,n),xe=r,at=i;break;case 0:case 11:case 14:case 15:if(!Ie&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&La(n,e,o),i=i.next}while(i!==r)}Ut(t,e,n);break;case 1:if(!Ie&&(sr(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){oe(n,e,l)}Ut(t,e,n);break;case 21:Ut(t,e,n);break;case 22:n.mode&1?(Ie=(r=Ie)||n.memoizedState!==null,Ut(t,e,n),Ie=r):Ut(t,e,n);break;default:Ut(t,e,n)}}function eh(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new N_),e.forEach(function(r){var i=A_.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function ot(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:xe=l.stateNode,at=!1;break e;case 3:xe=l.stateNode.containerInfo,at=!0;break e;case 4:xe=l.stateNode.containerInfo,at=!0;break e}l=l.return}if(xe===null)throw Error(S(160));hm(s,o,i),xe=null,at=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(u){oe(i,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)fm(e,t),e=e.sibling}function fm(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ot(e,t),gt(t),r&4){try{ui(3,t,t.return),$o(3,t)}catch(_){oe(t,t.return,_)}try{ui(5,t,t.return)}catch(_){oe(t,t.return,_)}}break;case 1:ot(e,t),gt(t),r&512&&n!==null&&sr(n,n.return);break;case 5:if(ot(e,t),gt(t),r&512&&n!==null&&sr(n,n.return),t.flags&32){var i=t.stateNode;try{yi(i,"")}catch(_){oe(t,t.return,_)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&Af(i,s),ua(l,o);var u=ua(l,s);for(o=0;o<a.length;o+=2){var h=a[o],d=a[o+1];h==="style"?Uf(i,d):h==="dangerouslySetInnerHTML"?Ff(i,d):h==="children"?yi(i,d):Eu(i,h,d,u)}switch(l){case"input":ia(i,s);break;case"textarea":Lf(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var v=s.value;v!=null?ar(i,!!s.multiple,v,!1):f!==!!s.multiple&&(s.defaultValue!=null?ar(i,!!s.multiple,s.defaultValue,!0):ar(i,!!s.multiple,s.multiple?[]:"",!1))}i[Ii]=s}catch(_){oe(t,t.return,_)}}break;case 6:if(ot(e,t),gt(t),r&4){if(t.stateNode===null)throw Error(S(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(_){oe(t,t.return,_)}}break;case 3:if(ot(e,t),gt(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ci(e.containerInfo)}catch(_){oe(t,t.return,_)}break;case 4:ot(e,t),gt(t);break;case 13:ot(e,t),gt(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(nc=ue())),r&4&&eh(t);break;case 22:if(h=n!==null&&n.memoizedState!==null,t.mode&1?(Ie=(u=Ie)||h,ot(e,t),Ie=u):ot(e,t),gt(t),r&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!h&&t.mode&1)for(R=t,h=t.child;h!==null;){for(d=R=h;R!==null;){switch(f=R,v=f.child,f.tag){case 0:case 11:case 14:case 15:ui(4,f,f.return);break;case 1:sr(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(_){oe(r,n,_)}}break;case 5:sr(f,f.return);break;case 22:if(f.memoizedState!==null){nh(d);continue}}v!==null?(v.return=f,R=v):nh(d)}h=h.sibling}e:for(h=null,d=t;;){if(d.tag===5){if(h===null){h=d;try{i=d.stateNode,u?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=zf("display",o))}catch(_){oe(t,t.return,_)}}}else if(d.tag===6){if(h===null)try{d.stateNode.nodeValue=u?"":d.memoizedProps}catch(_){oe(t,t.return,_)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;h===d&&(h=null),d=d.return}h===d&&(h=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:ot(e,t),gt(t),r&4&&eh(t);break;case 21:break;default:ot(e,t),gt(t)}}function gt(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(dm(n)){var r=n;break e}n=n.return}throw Error(S(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(yi(i,""),r.flags&=-33);var s=Zd(t);za(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=Zd(t);Fa(t,l,o);break;default:throw Error(S(161))}}catch(a){oe(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function I_(t,e,n){R=t,pm(t)}function pm(t,e,n){for(var r=(t.mode&1)!==0;R!==null;){var i=R,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||Is;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Ie;l=Is;var u=Ie;if(Is=o,(Ie=a)&&!u)for(R=i;R!==null;)o=R,a=o.child,o.tag===22&&o.memoizedState!==null?rh(i):a!==null?(a.return=o,R=a):rh(i);for(;s!==null;)R=s,pm(s),s=s.sibling;R=i,Is=l,Ie=u}th(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,R=s):th(t)}}function th(t){for(;R!==null;){var e=R;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Ie||$o(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Ie)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:lt(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&zd(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}zd(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var h=u.memoizedState;if(h!==null){var d=h.dehydrated;d!==null&&Ci(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(S(163))}Ie||e.flags&512&&Ma(e)}catch(f){oe(e,e.return,f)}}if(e===t){R=null;break}if(n=e.sibling,n!==null){n.return=e.return,R=n;break}R=e.return}}function nh(t){for(;R!==null;){var e=R;if(e===t){R=null;break}var n=e.sibling;if(n!==null){n.return=e.return,R=n;break}R=e.return}}function rh(t){for(;R!==null;){var e=R;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{$o(4,e)}catch(a){oe(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){oe(e,i,a)}}var s=e.return;try{Ma(e)}catch(a){oe(e,s,a)}break;case 5:var o=e.return;try{Ma(e)}catch(a){oe(e,o,a)}}}catch(a){oe(e,e.return,a)}if(e===t){R=null;break}var l=e.sibling;if(l!==null){l.return=e.return,R=l;break}R=e.return}}var T_=Math.ceil,co=Lt.ReactCurrentDispatcher,ec=Lt.ReactCurrentOwner,tt=Lt.ReactCurrentBatchConfig,B=0,_e=null,de=null,Ce=0,$e=0,or=gn(0),me=0,Oi=null,Dn=0,Vo=0,tc=0,ci=null,Le=null,nc=0,Er=1/0,Ct=null,ho=!1,Ua=null,tn=null,Ts=!1,Gt=null,fo=0,di=0,Ba=null,Bs=-1,Ws=0;function je(){return B&6?ue():Bs!==-1?Bs:Bs=ue()}function nn(t){return t.mode&1?B&2&&Ce!==0?Ce&-Ce:d_.transition!==null?(Ws===0&&(Ws=Jf()),Ws):(t=Q,t!==0||(t=window.event,t=t===void 0?16:sp(t.type)),t):1}function ft(t,e,n,r){if(50<di)throw di=0,Ba=null,Error(S(185));Yi(t,n,r),(!(B&2)||t!==_e)&&(t===_e&&(!(B&2)&&(Vo|=n),me===4&&Ht(t,Ce)),Be(t,r),n===1&&B===0&&!(e.mode&1)&&(Er=ue()+500,Uo&&vn()))}function Be(t,e){var n=t.callbackNode;dy(t,e);var r=qs(t,t===_e?Ce:0);if(r===0)n!==null&&hd(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&hd(n),e===1)t.tag===0?c_(ih.bind(null,t)):Sp(ih.bind(null,t)),o_(function(){!(B&6)&&vn()}),n=null;else{switch(Zf(r)){case 1:n=Tu;break;case 4:n=Yf;break;case 16:n=Ks;break;case 536870912:n=Xf;break;default:n=Ks}n=Cm(n,mm.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function mm(t,e){if(Bs=-1,Ws=0,B&6)throw Error(S(327));var n=t.callbackNode;if(fr()&&t.callbackNode!==n)return null;var r=qs(t,t===_e?Ce:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=po(t,r);else{e=r;var i=B;B|=2;var s=vm();(_e!==t||Ce!==e)&&(Ct=null,Er=ue()+500,Pn(t,e));do try{j_();break}catch(l){gm(t,l)}while(!0);Bu(),co.current=s,B=i,de!==null?e=0:(_e=null,Ce=0,e=me)}if(e!==0){if(e===2&&(i=pa(t),i!==0&&(r=i,e=Wa(t,i))),e===1)throw n=Oi,Pn(t,0),Ht(t,r),Be(t,ue()),n;if(e===6)Ht(t,r);else{if(i=t.current.alternate,!(r&30)&&!P_(i)&&(e=po(t,r),e===2&&(s=pa(t),s!==0&&(r=s,e=Wa(t,s))),e===1))throw n=Oi,Pn(t,0),Ht(t,r),Be(t,ue()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(S(345));case 2:Cn(t,Le,Ct);break;case 3:if(Ht(t,r),(r&130023424)===r&&(e=nc+500-ue(),10<e)){if(qs(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){je(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ca(Cn.bind(null,t,Le,Ct),e);break}Cn(t,Le,Ct);break;case 4:if(Ht(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-ht(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=ue()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*T_(r/1960))-r,10<r){t.timeoutHandle=Ca(Cn.bind(null,t,Le,Ct),r);break}Cn(t,Le,Ct);break;case 5:Cn(t,Le,Ct);break;default:throw Error(S(329))}}}return Be(t,ue()),t.callbackNode===n?mm.bind(null,t):null}function Wa(t,e){var n=ci;return t.current.memoizedState.isDehydrated&&(Pn(t,e).flags|=256),t=po(t,e),t!==2&&(e=Le,Le=n,e!==null&&$a(e)),t}function $a(t){Le===null?Le=t:Le.push.apply(Le,t)}function P_(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!mt(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ht(t,e){for(e&=~tc,e&=~Vo,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-ht(e),r=1<<n;t[n]=-1,e&=~r}}function ih(t){if(B&6)throw Error(S(327));fr();var e=qs(t,0);if(!(e&1))return Be(t,ue()),null;var n=po(t,e);if(t.tag!==0&&n===2){var r=pa(t);r!==0&&(e=r,n=Wa(t,r))}if(n===1)throw n=Oi,Pn(t,0),Ht(t,e),Be(t,ue()),n;if(n===6)throw Error(S(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Cn(t,Le,Ct),Be(t,ue()),null}function rc(t,e){var n=B;B|=1;try{return t(e)}finally{B=n,B===0&&(Er=ue()+500,Uo&&vn())}}function An(t){Gt!==null&&Gt.tag===0&&!(B&6)&&fr();var e=B;B|=1;var n=tt.transition,r=Q;try{if(tt.transition=null,Q=1,t)return t()}finally{Q=r,tt.transition=n,B=e,!(B&6)&&vn()}}function ic(){$e=or.current,Z(or)}function Pn(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,s_(n)),de!==null)for(n=de.return;n!==null;){var r=n;switch(Fu(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&eo();break;case 3:wr(),Z(ze),Z(Te),Gu();break;case 5:Qu(r);break;case 4:wr();break;case 13:Z(re);break;case 19:Z(re);break;case 10:Wu(r.type._context);break;case 22:case 23:ic()}n=n.return}if(_e=t,de=t=rn(t.current,null),Ce=$e=e,me=0,Oi=null,tc=Vo=Dn=0,Le=ci=null,kn!==null){for(e=0;e<kn.length;e++)if(n=kn[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}kn=null}return t}function gm(t,e){do{var n=de;try{if(Bu(),Fs.current=uo,ao){for(var r=ie.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}ao=!1}if(On=0,ve=he=ie=null,ai=!1,Ri=0,ec.current=null,n===null||n.return===null){me=1,Oi=e,de=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=Ce,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var u=a,h=l,d=h.tag;if(!(h.mode&1)&&(d===0||d===11||d===15)){var f=h.alternate;f?(h.updateQueue=f.updateQueue,h.memoizedState=f.memoizedState,h.lanes=f.lanes):(h.updateQueue=null,h.memoizedState=null)}var v=Hd(o);if(v!==null){v.flags&=-257,Qd(v,o,l,s,e),v.mode&1&&Vd(s,u,e),e=v,a=u;var y=e.updateQueue;if(y===null){var _=new Set;_.add(a),e.updateQueue=_}else y.add(a);break e}else{if(!(e&1)){Vd(s,u,e),sc();break e}a=Error(S(426))}}else if(ee&&l.mode&1){var E=Hd(o);if(E!==null){!(E.flags&65536)&&(E.flags|=256),Qd(E,o,l,s,e),zu(Cr(a,l));break e}}s=a=Cr(a,l),me!==4&&(me=2),ci===null?ci=[s]:ci.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=Zp(s,a,e);Fd(s,m);break e;case 1:l=a;var p=s.type,g=s.stateNode;if(!(s.flags&128)&&(typeof p.getDerivedStateFromError=="function"||g!==null&&typeof g.componentDidCatch=="function"&&(tn===null||!tn.has(g)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=em(s,l,e);Fd(s,C);break e}}s=s.return}while(s!==null)}_m(n)}catch(k){e=k,de===n&&n!==null&&(de=n=n.return);continue}break}while(!0)}function vm(){var t=co.current;return co.current=uo,t===null?uo:t}function sc(){(me===0||me===3||me===2)&&(me=4),_e===null||!(Dn&268435455)&&!(Vo&268435455)||Ht(_e,Ce)}function po(t,e){var n=B;B|=2;var r=vm();(_e!==t||Ce!==e)&&(Ct=null,Pn(t,e));do try{R_();break}catch(i){gm(t,i)}while(!0);if(Bu(),B=n,co.current=r,de!==null)throw Error(S(261));return _e=null,Ce=0,me}function R_(){for(;de!==null;)ym(de)}function j_(){for(;de!==null&&!ny();)ym(de)}function ym(t){var e=wm(t.alternate,t,$e);t.memoizedProps=t.pendingProps,e===null?_m(t):de=e,ec.current=null}function _m(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=S_(n,e),n!==null){n.flags&=32767,de=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{me=6,de=null;return}}else if(n=E_(n,e,$e),n!==null){de=n;return}if(e=e.sibling,e!==null){de=e;return}de=e=t}while(e!==null);me===0&&(me=5)}function Cn(t,e,n){var r=Q,i=tt.transition;try{tt.transition=null,Q=1,b_(t,e,n,r)}finally{tt.transition=i,Q=r}return null}function b_(t,e,n,r){do fr();while(Gt!==null);if(B&6)throw Error(S(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(S(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(hy(t,s),t===_e&&(de=_e=null,Ce=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Ts||(Ts=!0,Cm(Ks,function(){return fr(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=tt.transition,tt.transition=null;var o=Q;Q=1;var l=B;B|=4,ec.current=null,k_(t,n),fm(n,t),Jy(xa),Ys=!!_a,xa=_a=null,t.current=n,I_(n),ry(),B=l,Q=o,tt.transition=s}else t.current=n;if(Ts&&(Ts=!1,Gt=t,fo=i),s=t.pendingLanes,s===0&&(tn=null),oy(n.stateNode),Be(t,ue()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(ho)throw ho=!1,t=Ua,Ua=null,t;return fo&1&&t.tag!==0&&fr(),s=t.pendingLanes,s&1?t===Ba?di++:(di=0,Ba=t):di=0,vn(),null}function fr(){if(Gt!==null){var t=Zf(fo),e=tt.transition,n=Q;try{if(tt.transition=null,Q=16>t?16:t,Gt===null)var r=!1;else{if(t=Gt,Gt=null,fo=0,B&6)throw Error(S(331));var i=B;for(B|=4,R=t.current;R!==null;){var s=R,o=s.child;if(R.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var u=l[a];for(R=u;R!==null;){var h=R;switch(h.tag){case 0:case 11:case 15:ui(8,h,s)}var d=h.child;if(d!==null)d.return=h,R=d;else for(;R!==null;){h=R;var f=h.sibling,v=h.return;if(cm(h),h===u){R=null;break}if(f!==null){f.return=v,R=f;break}R=v}}}var y=s.alternate;if(y!==null){var _=y.child;if(_!==null){y.child=null;do{var E=_.sibling;_.sibling=null,_=E}while(_!==null)}}R=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,R=o;else e:for(;R!==null;){if(s=R,s.flags&2048)switch(s.tag){case 0:case 11:case 15:ui(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,R=m;break e}R=s.return}}var p=t.current;for(R=p;R!==null;){o=R;var g=o.child;if(o.subtreeFlags&2064&&g!==null)g.return=o,R=g;else e:for(o=p;R!==null;){if(l=R,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:$o(9,l)}}catch(k){oe(l,l.return,k)}if(l===o){R=null;break e}var C=l.sibling;if(C!==null){C.return=l.return,R=C;break e}R=l.return}}if(B=i,vn(),_t&&typeof _t.onPostCommitFiberRoot=="function")try{_t.onPostCommitFiberRoot(Ao,t)}catch{}r=!0}return r}finally{Q=n,tt.transition=e}}return!1}function sh(t,e,n){e=Cr(n,e),e=Zp(t,e,1),t=en(t,e,1),e=je(),t!==null&&(Yi(t,1,e),Be(t,e))}function oe(t,e,n){if(t.tag===3)sh(t,t,n);else for(;e!==null;){if(e.tag===3){sh(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(tn===null||!tn.has(r))){t=Cr(n,t),t=em(e,t,1),e=en(e,t,1),t=je(),e!==null&&(Yi(e,1,t),Be(e,t));break}}e=e.return}}function O_(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=je(),t.pingedLanes|=t.suspendedLanes&n,_e===t&&(Ce&n)===n&&(me===4||me===3&&(Ce&130023424)===Ce&&500>ue()-nc?Pn(t,0):tc|=n),Be(t,e)}function xm(t,e){e===0&&(t.mode&1?(e=ys,ys<<=1,!(ys&130023424)&&(ys=4194304)):e=1);var n=je();t=bt(t,e),t!==null&&(Yi(t,e,n),Be(t,n))}function D_(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),xm(t,n)}function A_(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(S(314))}r!==null&&r.delete(e),xm(t,n)}var wm;wm=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||ze.current)Me=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Me=!1,C_(t,e,n);Me=!!(t.flags&131072)}else Me=!1,ee&&e.flags&1048576&&Np(e,ro,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Us(t,e),t=e.pendingProps;var i=yr(e,Te.current);hr(e,n),i=qu(null,e,r,t,i,n);var s=Yu();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Ue(r)?(s=!0,to(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Vu(e),i.updater=Wo,e.stateNode=i,i._reactInternals=e,Pa(e,r,t,n),e=ba(null,e,r,!0,s,n)):(e.tag=0,ee&&s&&Mu(e),Pe(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Us(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=M_(r),t=lt(r,t),i){case 0:e=ja(null,e,r,t,n);break e;case 1:e=qd(null,e,r,t,n);break e;case 11:e=Gd(null,e,r,t,n);break e;case 14:e=Kd(null,e,r,lt(r.type,t),n);break e}throw Error(S(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lt(r,i),ja(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lt(r,i),qd(t,e,r,i,n);case 3:e:{if(im(e),t===null)throw Error(S(387));r=e.pendingProps,s=e.memoizedState,i=s.element,jp(t,e),oo(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Cr(Error(S(423)),e),e=Yd(t,e,r,n,i);break e}else if(r!==i){i=Cr(Error(S(424)),e),e=Yd(t,e,r,n,i);break e}else for(Ve=Zt(e.stateNode.containerInfo.firstChild),He=e,ee=!0,ut=null,n=Pp(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(_r(),r===i){e=Ot(t,e,n);break e}Pe(t,e,r,n)}e=e.child}return e;case 5:return bp(e),t===null&&ka(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,wa(r,i)?o=null:s!==null&&wa(r,s)&&(e.flags|=32),rm(t,e),Pe(t,e,o,n),e.child;case 6:return t===null&&ka(e),null;case 13:return sm(t,e,n);case 4:return Hu(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=xr(e,null,r,n):Pe(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lt(r,i),Gd(t,e,r,i,n);case 7:return Pe(t,e,e.pendingProps,n),e.child;case 8:return Pe(t,e,e.pendingProps.children,n),e.child;case 12:return Pe(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,X(io,r._currentValue),r._currentValue=o,s!==null)if(mt(s.value,o)){if(s.children===i.children&&!ze.current){e=Ot(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=It(-1,n&-n),a.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var h=u.pending;h===null?a.next=a:(a.next=h.next,h.next=a),u.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Ia(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(S(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Ia(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Pe(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,hr(e,n),i=nt(i),r=r(i),e.flags|=1,Pe(t,e,r,n),e.child;case 14:return r=e.type,i=lt(r,e.pendingProps),i=lt(r.type,i),Kd(t,e,r,i,n);case 15:return tm(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:lt(r,i),Us(t,e),e.tag=1,Ue(r)?(t=!0,to(e)):t=!1,hr(e,n),Jp(e,r,i),Pa(e,r,i,n),ba(null,e,r,!0,t,n);case 19:return om(t,e,n);case 22:return nm(t,e,n)}throw Error(S(156,e.tag))};function Cm(t,e){return qf(t,e)}function L_(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Je(t,e,n,r){return new L_(t,e,n,r)}function oc(t){return t=t.prototype,!(!t||!t.isReactComponent)}function M_(t){if(typeof t=="function")return oc(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Nu)return 11;if(t===ku)return 14}return 2}function rn(t,e){var n=t.alternate;return n===null?(n=Je(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function $s(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")oc(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Yn:return Rn(n.children,i,s,e);case Su:o=8,i|=8;break;case Zl:return t=Je(12,n,e,i|2),t.elementType=Zl,t.lanes=s,t;case ea:return t=Je(13,n,e,i),t.elementType=ea,t.lanes=s,t;case ta:return t=Je(19,n,e,i),t.elementType=ta,t.lanes=s,t;case bf:return Ho(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Rf:o=10;break e;case jf:o=9;break e;case Nu:o=11;break e;case ku:o=14;break e;case Wt:o=16,r=null;break e}throw Error(S(130,t==null?t:typeof t,""))}return e=Je(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function Rn(t,e,n,r){return t=Je(7,t,r,e),t.lanes=n,t}function Ho(t,e,n,r){return t=Je(22,t,r,e),t.elementType=bf,t.lanes=n,t.stateNode={isHidden:!1},t}function Ml(t,e,n){return t=Je(6,t,null,e),t.lanes=n,t}function Fl(t,e,n){return e=Je(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function F_(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=yl(0),this.expirationTimes=yl(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=yl(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function lc(t,e,n,r,i,s,o,l,a){return t=new F_(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Je(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Vu(s),t}function z_(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:qn,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function Em(t){if(!t)return dn;t=t._reactInternals;e:{if(Un(t)!==t||t.tag!==1)throw Error(S(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Ue(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(S(171))}if(t.tag===1){var n=t.type;if(Ue(n))return Ep(t,n,e)}return e}function Sm(t,e,n,r,i,s,o,l,a){return t=lc(n,r,!0,t,i,s,o,l,a),t.context=Em(null),n=t.current,r=je(),i=nn(n),s=It(r,i),s.callback=e??null,en(n,s,i),t.current.lanes=i,Yi(t,i,r),Be(t,r),t}function Qo(t,e,n,r){var i=e.current,s=je(),o=nn(i);return n=Em(n),e.context===null?e.context=n:e.pendingContext=n,e=It(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=en(i,e,o),t!==null&&(ft(t,i,o,s),Ms(t,i,o)),o}function mo(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function oh(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ac(t,e){oh(t,e),(t=t.alternate)&&oh(t,e)}function U_(){return null}var Nm=typeof reportError=="function"?reportError:function(t){console.error(t)};function uc(t){this._internalRoot=t}Go.prototype.render=uc.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(S(409));Qo(t,e,null,null)};Go.prototype.unmount=uc.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;An(function(){Qo(null,t,null,null)}),e[jt]=null}};function Go(t){this._internalRoot=t}Go.prototype.unstable_scheduleHydration=function(t){if(t){var e=np();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Vt.length&&e!==0&&e<Vt[n].priority;n++);Vt.splice(n,0,t),n===0&&ip(t)}};function cc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function Ko(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function lh(){}function B_(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var u=mo(o);s.call(u)}}var o=Sm(e,r,t,0,null,!1,!1,"",lh);return t._reactRootContainer=o,t[jt]=o.current,Ni(t.nodeType===8?t.parentNode:t),An(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var u=mo(a);l.call(u)}}var a=lc(t,0,!1,null,null,!1,!1,"",lh);return t._reactRootContainer=a,t[jt]=a.current,Ni(t.nodeType===8?t.parentNode:t),An(function(){Qo(e,a,n,r)}),a}function qo(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=mo(o);l.call(a)}}Qo(e,o,t,i)}else o=B_(n,e,t,i,r);return mo(o)}ep=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=ti(e.pendingLanes);n!==0&&(Pu(e,n|1),Be(e,ue()),!(B&6)&&(Er=ue()+500,vn()))}break;case 13:An(function(){var r=bt(t,1);if(r!==null){var i=je();ft(r,t,1,i)}}),ac(t,1)}};Ru=function(t){if(t.tag===13){var e=bt(t,134217728);if(e!==null){var n=je();ft(e,t,134217728,n)}ac(t,134217728)}};tp=function(t){if(t.tag===13){var e=nn(t),n=bt(t,e);if(n!==null){var r=je();ft(n,t,e,r)}ac(t,e)}};np=function(){return Q};rp=function(t,e){var n=Q;try{return Q=t,e()}finally{Q=n}};da=function(t,e,n){switch(e){case"input":if(ia(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=zo(r);if(!i)throw Error(S(90));Df(r),ia(r,i)}}}break;case"textarea":Lf(t,n);break;case"select":e=n.value,e!=null&&ar(t,!!n.multiple,e,!1)}};$f=rc;Vf=An;var W_={usingClientEntryPoint:!1,Events:[Ji,er,zo,Bf,Wf,rc]},Kr={findFiberByHostInstance:Nn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$_={bundleType:Kr.bundleType,version:Kr.version,rendererPackageName:Kr.rendererPackageName,rendererConfig:Kr.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Lt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Gf(t),t===null?null:t.stateNode},findFiberByHostInstance:Kr.findFiberByHostInstance||U_,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ps=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ps.isDisabled&&Ps.supportsFiber)try{Ao=Ps.inject($_),_t=Ps}catch{}}Ge.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=W_;Ge.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!cc(e))throw Error(S(200));return z_(t,e,null,n)};Ge.createRoot=function(t,e){if(!cc(t))throw Error(S(299));var n=!1,r="",i=Nm;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=lc(t,1,!1,null,null,n,!1,r,i),t[jt]=e.current,Ni(t.nodeType===8?t.parentNode:t),new uc(e)};Ge.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(S(188)):(t=Object.keys(t).join(","),Error(S(268,t)));return t=Gf(e),t=t===null?null:t.stateNode,t};Ge.flushSync=function(t){return An(t)};Ge.hydrate=function(t,e,n){if(!Ko(e))throw Error(S(200));return qo(null,t,e,!0,n)};Ge.hydrateRoot=function(t,e,n){if(!cc(t))throw Error(S(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=Nm;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=Sm(e,null,t,1,n??null,i,!1,s,o),t[jt]=e.current,Ni(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new Go(e)};Ge.render=function(t,e,n){if(!Ko(e))throw Error(S(200));return qo(null,t,e,!1,n)};Ge.unmountComponentAtNode=function(t){if(!Ko(t))throw Error(S(40));return t._reactRootContainer?(An(function(){qo(null,null,t,!1,function(){t._reactRootContainer=null,t[jt]=null})}),!0):!1};Ge.unstable_batchedUpdates=rc;Ge.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!Ko(n))throw Error(S(200));if(t==null||t._reactInternals===void 0)throw Error(S(38));return qo(t,e,n,!1,r)};Ge.version="18.3.1-next-f1338f8080-20240426";function km(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(km)}catch(t){console.error(t)}}km(),kf.exports=Ge;var V_=kf.exports,ah=V_;Xl.createRoot=ah.createRoot,Xl.hydrateRoot=ah.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Di(){return Di=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Di.apply(this,arguments)}var Kt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(Kt||(Kt={}));const uh="popstate";function H_(t){t===void 0&&(t={});function e(i,s){let{pathname:o="/",search:l="",hash:a=""}=Bn(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),Va("",{pathname:o,search:l,hash:a},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let a=i.location.href,u=a.indexOf("#");l=u===-1?a:a.slice(0,u)}return l+"#"+(typeof s=="string"?s:go(s))}function r(i,s){dc(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return G_(e,n,r,t)}function ce(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function dc(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Q_(){return Math.random().toString(36).substr(2,8)}function ch(t,e){return{usr:t.state,key:t.key,idx:e}}function Va(t,e,n,r){return n===void 0&&(n=null),Di({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Bn(e):e,{state:n,key:e&&e.key||r||Q_()})}function go(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Bn(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function G_(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Kt.Pop,a=null,u=h();u==null&&(u=0,o.replaceState(Di({},o.state,{idx:u}),""));function h(){return(o.state||{idx:null}).idx}function d(){l=Kt.Pop;let E=h(),m=E==null?null:E-u;u=E,a&&a({action:l,location:_.location,delta:m})}function f(E,m){l=Kt.Push;let p=Va(_.location,E,m);n&&n(p,E),u=h()+1;let g=ch(p,u),C=_.createHref(p);try{o.pushState(g,"",C)}catch(k){if(k instanceof DOMException&&k.name==="DataCloneError")throw k;i.location.assign(C)}s&&a&&a({action:l,location:_.location,delta:1})}function v(E,m){l=Kt.Replace;let p=Va(_.location,E,m);n&&n(p,E),u=h();let g=ch(p,u),C=_.createHref(p);o.replaceState(g,"",C),s&&a&&a({action:l,location:_.location,delta:0})}function y(E){let m=i.location.origin!=="null"?i.location.origin:i.location.href,p=typeof E=="string"?E:go(E);return p=p.replace(/ $/,"%20"),ce(m,"No window.location.(origin|href) available to create URL for href: "+p),new URL(p,m)}let _={get action(){return l},get location(){return t(i,o)},listen(E){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(uh,d),a=E,()=>{i.removeEventListener(uh,d),a=null}},createHref(E){return e(i,E)},createURL:y,encodeLocation(E){let m=y(E);return{pathname:m.pathname,search:m.search,hash:m.hash}},push:f,replace:v,go(E){return o.go(E)}};return _}var dh;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(dh||(dh={}));function K_(t,e,n){return n===void 0&&(n="/"),q_(t,e,n)}function q_(t,e,n,r){let i=typeof e=="string"?Bn(e):e,s=hc(i.pathname||"/",n);if(s==null)return null;let o=Im(t);Y_(o);let l=null;for(let a=0;l==null&&a<o.length;++a){let u=a0(s);l=s0(o[a],u)}return l}function Im(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let a={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};a.relativePath.startsWith("/")&&(ce(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let u=sn([r,a.relativePath]),h=n.concat(a);s.children&&s.children.length>0&&(ce(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+u+'".')),Im(s.children,e,h,u)),!(s.path==null&&!s.index)&&e.push({path:u,score:r0(u,s.index),routesMeta:h})};return t.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let a of Tm(s.path))i(s,o,a)}),e}function Tm(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=Tm(r.join("/")),l=[];return l.push(...o.map(a=>a===""?s:[s,a].join("/"))),i&&l.push(...o),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function Y_(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:i0(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const X_=/^:[\w-]+$/,J_=3,Z_=2,e0=1,t0=10,n0=-2,hh=t=>t==="*";function r0(t,e){let n=t.split("/"),r=n.length;return n.some(hh)&&(r+=n0),e&&(r+=Z_),n.filter(i=>!hh(i)).reduce((i,s)=>i+(X_.test(s)?J_:s===""?e0:t0),r)}function i0(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function s0(t,e,n){let{routesMeta:r}=t,i={},s="/",o=[];for(let l=0;l<r.length;++l){let a=r[l],u=l===r.length-1,h=s==="/"?e:e.slice(s.length)||"/",d=o0({path:a.relativePath,caseSensitive:a.caseSensitive,end:u},h),f=a.route;if(!d)return null;Object.assign(i,d.params),o.push({params:i,pathname:sn([s,d.pathname]),pathnameBase:h0(sn([s,d.pathnameBase])),route:f}),d.pathnameBase!=="/"&&(s=sn([s,d.pathnameBase]))}return o}function o0(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=l0(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((u,h,d)=>{let{paramName:f,isOptional:v}=h;if(f==="*"){let _=l[d]||"";o=s.slice(0,s.length-_.length).replace(/(.)\/+$/,"$1")}const y=l[d];return v&&!y?u[f]=void 0:u[f]=(y||"").replace(/%2F/g,"/"),u},{}),pathname:s,pathnameBase:o,pattern:t}}function l0(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),dc(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,a)=>(r.push({paramName:l,isOptional:a!=null}),a?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(r.push({paramName:"*"}),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function a0(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return dc(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function hc(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function u0(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Bn(t):t;return{pathname:n?n.startsWith("/")?n:c0(n,e):e,search:f0(r),hash:p0(i)}}function c0(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function zl(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function d0(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function fc(t,e){let n=d0(t);return e?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function pc(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Bn(t):(i=Di({},t),ce(!i.pathname||!i.pathname.includes("?"),zl("?","pathname","search",i)),ce(!i.pathname||!i.pathname.includes("#"),zl("#","pathname","hash",i)),ce(!i.search||!i.search.includes("#"),zl("#","search","hash",i)));let s=t===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let d=e.length-1;if(!r&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}l=d>=0?e[d]:"/"}let a=u0(i,l),u=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(u||h)&&(a.pathname+="/"),a}const sn=t=>t.join("/").replace(/\/\/+/g,"/"),h0=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),f0=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,p0=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function m0(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const Pm=["post","put","patch","delete"];new Set(Pm);const g0=["get",...Pm];new Set(g0);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ai(){return Ai=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Ai.apply(this,arguments)}const mc=x.createContext(null),v0=x.createContext(null),yn=x.createContext(null),Yo=x.createContext(null),_n=x.createContext({outlet:null,matches:[],isDataRoute:!1}),Rm=x.createContext(null);function y0(t,e){let{relative:n}=e===void 0?{}:e;Or()||ce(!1);let{basename:r,navigator:i}=x.useContext(yn),{hash:s,pathname:o,search:l}=bm(t,{relative:n}),a=o;return r!=="/"&&(a=o==="/"?r:sn([r,o])),i.createHref({pathname:a,search:l,hash:s})}function Or(){return x.useContext(Yo)!=null}function Wn(){return Or()||ce(!1),x.useContext(Yo).location}function jm(t){x.useContext(yn).static||x.useLayoutEffect(t)}function es(){let{isDataRoute:t}=x.useContext(_n);return t?j0():_0()}function _0(){Or()||ce(!1);let t=x.useContext(mc),{basename:e,future:n,navigator:r}=x.useContext(yn),{matches:i}=x.useContext(_n),{pathname:s}=Wn(),o=JSON.stringify(fc(i,n.v7_relativeSplatPath)),l=x.useRef(!1);return jm(()=>{l.current=!0}),x.useCallback(function(u,h){if(h===void 0&&(h={}),!l.current)return;if(typeof u=="number"){r.go(u);return}let d=pc(u,JSON.parse(o),s,h.relative==="path");t==null&&e!=="/"&&(d.pathname=d.pathname==="/"?e:sn([e,d.pathname])),(h.replace?r.replace:r.push)(d,h.state,h)},[e,r,o,s,t])}function bm(t,e){let{relative:n}=e===void 0?{}:e,{future:r}=x.useContext(yn),{matches:i}=x.useContext(_n),{pathname:s}=Wn(),o=JSON.stringify(fc(i,r.v7_relativeSplatPath));return x.useMemo(()=>pc(t,JSON.parse(o),s,n==="path"),[t,o,s,n])}function x0(t,e){return w0(t,e)}function w0(t,e,n,r){Or()||ce(!1);let{navigator:i,static:s}=x.useContext(yn),{matches:o}=x.useContext(_n),l=o[o.length-1],a=l?l.params:{};l&&l.pathname;let u=l?l.pathnameBase:"/";l&&l.route;let h=Wn(),d;if(e){var f;let m=typeof e=="string"?Bn(e):e;u==="/"||(f=m.pathname)!=null&&f.startsWith(u)||ce(!1),d=m}else d=h;let v=d.pathname||"/",y=v;if(u!=="/"){let m=u.replace(/^\//,"").split("/");y="/"+v.replace(/^\//,"").split("/").slice(m.length).join("/")}let _=K_(t,{pathname:y}),E=k0(_&&_.map(m=>Object.assign({},m,{params:Object.assign({},a,m.params),pathname:sn([u,i.encodeLocation?i.encodeLocation(m.pathname).pathname:m.pathname]),pathnameBase:m.pathnameBase==="/"?u:sn([u,i.encodeLocation?i.encodeLocation(m.pathnameBase).pathname:m.pathnameBase])})),o,n,r);return e&&E?x.createElement(Yo.Provider,{value:{location:Ai({pathname:"/",search:"",hash:"",state:null,key:"default"},d),navigationType:Kt.Pop}},E):E}function C0(){let t=R0(),e=m0(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return x.createElement(x.Fragment,null,x.createElement("h2",null,"Unexpected Application Error!"),x.createElement("h3",{style:{fontStyle:"italic"}},e),n?x.createElement("pre",{style:i},n):null,null)}const E0=x.createElement(C0,null);class S0 extends x.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?x.createElement(_n.Provider,{value:this.props.routeContext},x.createElement(Rm.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function N0(t){let{routeContext:e,match:n,children:r}=t,i=x.useContext(mc);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),x.createElement(_n.Provider,{value:e},r)}function k0(t,e,n,r){var i;if(e===void 0&&(e=[]),n===void 0&&(n=null),r===void 0&&(r=null),t==null){var s;if(!n)return null;if(n.errors)t=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let o=t,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(d=>d.route.id&&(l==null?void 0:l[d.route.id])!==void 0);h>=0||ce(!1),o=o.slice(0,Math.min(o.length,h+1))}let a=!1,u=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let d=o[h];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(u=h),d.route.id){let{loaderData:f,errors:v}=n,y=d.route.loader&&f[d.route.id]===void 0&&(!v||v[d.route.id]===void 0);if(d.route.lazy||y){a=!0,u>=0?o=o.slice(0,u+1):o=[o[0]];break}}}return o.reduceRight((h,d,f)=>{let v,y=!1,_=null,E=null;n&&(v=l&&d.route.id?l[d.route.id]:void 0,_=d.route.errorElement||E0,a&&(u<0&&f===0?(b0("route-fallback"),y=!0,E=null):u===f&&(y=!0,E=d.route.hydrateFallbackElement||null)));let m=e.concat(o.slice(0,f+1)),p=()=>{let g;return v?g=_:y?g=E:d.route.Component?g=x.createElement(d.route.Component,null):d.route.element?g=d.route.element:g=h,x.createElement(N0,{match:d,routeContext:{outlet:h,matches:m,isDataRoute:n!=null},children:g})};return n&&(d.route.ErrorBoundary||d.route.errorElement||f===0)?x.createElement(S0,{location:n.location,revalidation:n.revalidation,component:_,error:v,children:p(),routeContext:{outlet:null,matches:m,isDataRoute:!0}}):p()},null)}var Om=function(t){return t.UseBlocker="useBlocker",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t}(Om||{}),Dm=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Dm||{});function I0(t){let e=x.useContext(mc);return e||ce(!1),e}function T0(t){let e=x.useContext(v0);return e||ce(!1),e}function P0(t){let e=x.useContext(_n);return e||ce(!1),e}function Am(t){let e=P0(),n=e.matches[e.matches.length-1];return n.route.id||ce(!1),n.route.id}function R0(){var t;let e=x.useContext(Rm),n=T0(),r=Am();return e!==void 0?e:(t=n.errors)==null?void 0:t[r]}function j0(){let{router:t}=I0(Om.UseNavigateStable),e=Am(Dm.UseNavigateStable),n=x.useRef(!1);return jm(()=>{n.current=!0}),x.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?t.navigate(i):t.navigate(i,Ai({fromRouteId:e},s)))},[t,e])}const fh={};function b0(t,e,n){fh[t]||(fh[t]=!0)}function O0(t,e){t==null||t.v7_startTransition,t==null||t.v7_relativeSplatPath}function D0(t){let{to:e,replace:n,state:r,relative:i}=t;Or()||ce(!1);let{future:s,static:o}=x.useContext(yn),{matches:l}=x.useContext(_n),{pathname:a}=Wn(),u=es(),h=pc(e,fc(l,s.v7_relativeSplatPath),a,i==="path"),d=JSON.stringify(h);return x.useEffect(()=>u(JSON.parse(d),{replace:n,state:r,relative:i}),[u,d,i,n,r]),null}function Bt(t){ce(!1)}function A0(t){let{basename:e="/",children:n=null,location:r,navigationType:i=Kt.Pop,navigator:s,static:o=!1,future:l}=t;Or()&&ce(!1);let a=e.replace(/^\/*/,"/"),u=x.useMemo(()=>({basename:a,navigator:s,static:o,future:Ai({v7_relativeSplatPath:!1},l)}),[a,l,s,o]);typeof r=="string"&&(r=Bn(r));let{pathname:h="/",search:d="",hash:f="",state:v=null,key:y="default"}=r,_=x.useMemo(()=>{let E=hc(h,a);return E==null?null:{location:{pathname:E,search:d,hash:f,state:v,key:y},navigationType:i}},[a,h,d,f,v,y,i]);return _==null?null:x.createElement(yn.Provider,{value:u},x.createElement(Yo.Provider,{children:n,value:_}))}function L0(t){let{children:e,location:n}=t;return x0(Ha(e),n)}new Promise(()=>{});function Ha(t,e){e===void 0&&(e=[]);let n=[];return x.Children.forEach(t,(r,i)=>{if(!x.isValidElement(r))return;let s=[...e,i];if(r.type===x.Fragment){n.push.apply(n,Ha(r.props.children,s));return}r.type!==Bt&&ce(!1),!r.props.index||!r.props.children||ce(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=Ha(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qa(){return Qa=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Qa.apply(this,arguments)}function M0(t,e){if(t==null)return{};var n={},r=Object.keys(t),i,s;for(s=0;s<r.length;s++)i=r[s],!(e.indexOf(i)>=0)&&(n[i]=t[i]);return n}function F0(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function z0(t,e){return t.button===0&&(!e||e==="_self")&&!F0(t)}function Ga(t){return t===void 0&&(t=""),new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let r=t[n];return e.concat(Array.isArray(r)?r.map(i=>[n,i]):[[n,r]])},[]))}function U0(t,e){let n=Ga(t);return e&&e.forEach((r,i)=>{n.has(i)||e.getAll(i).forEach(s=>{n.append(i,s)})}),n}const B0=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],W0="6";try{window.__reactRouterVersion=W0}catch{}const $0="startTransition",ph=Ov[$0];function V0(t){let{basename:e,children:n,future:r,window:i}=t,s=x.useRef();s.current==null&&(s.current=H_({window:i,v5Compat:!0}));let o=s.current,[l,a]=x.useState({action:o.action,location:o.location}),{v7_startTransition:u}=r||{},h=x.useCallback(d=>{u&&ph?ph(()=>a(d)):a(d)},[a,u]);return x.useLayoutEffect(()=>o.listen(h),[o,h]),x.useEffect(()=>O0(r),[r]),x.createElement(A0,{basename:e,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}const H0=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",Q0=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ze=x.forwardRef(function(e,n){let{onClick:r,relative:i,reloadDocument:s,replace:o,state:l,target:a,to:u,preventScrollReset:h,viewTransition:d}=e,f=M0(e,B0),{basename:v}=x.useContext(yn),y,_=!1;if(typeof u=="string"&&Q0.test(u)&&(y=u,H0))try{let g=new URL(window.location.href),C=u.startsWith("//")?new URL(g.protocol+u):new URL(u),k=hc(C.pathname,v);C.origin===g.origin&&k!=null?u=k+C.search+C.hash:_=!0}catch{}let E=y0(u,{relative:i}),m=G0(u,{replace:o,state:l,target:a,preventScrollReset:h,relative:i,viewTransition:d});function p(g){r&&r(g),g.defaultPrevented||m(g)}return x.createElement("a",Qa({},f,{href:y||E,onClick:_||s?r:p,ref:n,target:a}))});var mh;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher",t.useViewTransitionState="useViewTransitionState"})(mh||(mh={}));var gh;(function(t){t.UseFetcher="useFetcher",t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(gh||(gh={}));function G0(t,e){let{target:n,replace:r,state:i,preventScrollReset:s,relative:o,viewTransition:l}=e===void 0?{}:e,a=es(),u=Wn(),h=bm(t,{relative:o});return x.useCallback(d=>{if(z0(d,n)){d.preventDefault();let f=r!==void 0?r:go(u)===go(h);a(t,{replace:f,state:i,preventScrollReset:s,relative:o,viewTransition:l})}},[u,a,h,r,i,n,t,s,o,l])}function K0(t){let e=x.useRef(Ga(t)),n=x.useRef(!1),r=Wn(),i=x.useMemo(()=>U0(r.search,n.current?null:e.current),[r.search]),s=es(),o=x.useCallback((l,a)=>{const u=Ga(typeof l=="function"?l(i):l);n.current=!0,s("?"+u,a)},[s,i]);return[i,o]}function q0({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))}const Y0=x.forwardRef(q0);function X0({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))}const J0=x.forwardRef(X0);function Z0({title:t,titleId:e,...n},r){return x.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":e},n),t?x.createElement("title",{id:e},t):null,x.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 3h1.386c.51 0 .955.343 1.087.835l.383 1.437M7.5 14.25a3 3 0 0 0-3 3h15.75m-12.75-3h11.218c1.121-2.3 2.1-4.684 2.924-7.138a60.114 60.114 0 0 0-16.536-1.84M7.5 14.25 5.106 5.272M6 20.25a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Zm12.75 0a.75.75 0 1 1-1.5 0 .75.75 0 0 1 1.5 0Z"}))}const ex=x.forwardRef(Z0),Mt={PRODUCTS:"store_products",CATEGORIES:"store_categories",CART:"store_cart",ORDERS:"store_orders"},Xo=()=>{const t=localStorage.getItem(Mt.PRODUCTS);return t?JSON.parse(t):[]},Ka=t=>{localStorage.setItem(Mt.PRODUCTS,JSON.stringify(t))},Jo=()=>{const t=localStorage.getItem(Mt.CATEGORIES);return t?JSON.parse(t):[]},qa=t=>{localStorage.setItem(Mt.CATEGORIES,JSON.stringify(t))},Tt=()=>{const t=localStorage.getItem(Mt.CART);return t?JSON.parse(t):[]},gc=t=>{localStorage.setItem(Mt.CART,JSON.stringify(t)),window.dispatchEvent(new CustomEvent("cartUpdated"))},vh=()=>{const t=localStorage.getItem(Mt.ORDERS);return t?JSON.parse(t):[]},Kn=t=>{localStorage.setItem(Mt.ORDERS,JSON.stringify(t))},Lm=t=>{const e=Tt(),n=e.find(r=>r.id===t.id);n?n.quantity+=1:e.push({...t,quantity:1}),gc(e)},tx=t=>{const n=Tt().filter(r=>r.id!==t);gc(n)},nx=(t,e)=>{const r=Tt().map(i=>i.id===t?{...i,quantity:e}:i);gc(r)},rx=()=>{localStorage.removeItem(Mt.CART),window.dispatchEvent(new CustomEvent("cartUpdated"))};function ix({isAdmin:t,setIsAdmin:e}){const[n,r]=x.useState(0),[i,s]=x.useState(!1),[o,l]=x.useState(""),[a,u]=x.useState(!1),[h,d]=x.useState(!1);x.useEffect(()=>(v(),window.addEventListener("storage",f),window.addEventListener("cartUpdated",v),()=>{window.removeEventListener("storage",f),window.removeEventListener("cartUpdated",v)}),[]);const f=E=>{E.key==="store_cart"&&v()},v=()=>{const m=Tt().reduce((p,g)=>p+g.quantity,0);r(m)},y=()=>{t?e(!1):(s(!0),l(""),u(!1))},_=()=>{o==="admin123"?(e(!0),s(!1),u(!1)):u(!0)};return c.jsxs("nav",{className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white shadow-lg",children:[c.jsx("div",{className:"container mx-auto px-6",children:c.jsxs("div",{className:"flex justify-between items-center h-20",children:[c.jsxs("div",{className:"flex items-center space-x-6 space-x-reverse",children:[c.jsx(Ze,{to:"/",className:"text-2xl font-bold text-white transition-transform hover:scale-105",children:"חנות אונליין"}),c.jsx("div",{className:"h-6 w-px bg-blue-300 mx-2"}),c.jsx(Ze,{to:"/products",className:"text-white hover:text-blue-100 font-medium transition-colors duration-200 px-3 py-2 rounded-md hover:bg-white/10",children:"מוצרים"}),c.jsxs(Ze,{to:"/cart",className:"text-white hover:text-blue-100 relative group",children:[c.jsx("div",{className:"p-2 rounded-full hover:bg-white/10 transition-colors duration-200",children:c.jsx(ex,{className:"h-6 w-6"})}),n>0&&c.jsx("span",{className:"absolute -top-1 -right-1 bg-red-500 text-white text-xs rounded-full h-5 w-5 flex items-center justify-center font-bold shadow-md",children:n})]})]}),c.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[c.jsx("button",{onClick:y,className:"text-sm text-white hover:text-blue-100 font-medium px-3 py-2 rounded-md hover:bg-white/10 transition-colors duration-200",children:t?"יציאה ממצב מנהל":"מצב מנהל"}),t&&c.jsx(Ze,{to:"/admin",className:"text-sm bg-white/20 text-white px-4 py-2 rounded-md hover:bg-white/30 transition-colors duration-200 font-medium",children:"לוח בקרה"})]})]})}),i&&c.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 backdrop-blur-sm",children:c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-xl w-80 max-w-md text-right border border-gray-200",children:[c.jsx("h2",{className:"text-xl font-bold mb-4 text-gray-800",children:"כניסה למצב מנהל"}),c.jsxs("div",{className:"mb-4",children:[c.jsx("label",{htmlFor:"adminPassword",className:"block text-gray-700 mb-2 font-medium",children:"סיסמת מנהל:"}),c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:h?"text":"password",id:"adminPassword",value:o,onChange:E=>l(E.target.value),className:`w-full p-2 border rounded-md ${a?"border-red-500 ring-1 ring-red-500":"border-gray-300"} focus:ring-2 focus:ring-blue-500 focus:border-transparent transition-all duration-200 text-gray-900 pr-10`,placeholder:"הזן סיסמת מנהל",onKeyDown:E=>E.key==="Enter"&&_()}),c.jsx("button",{type:"button",className:"absolute inset-y-0 right-0 pr-3 flex items-center text-gray-500 hover:text-gray-700 transition-colors",onClick:()=>d(!h),"aria-label":h?"הסתר סיסמה":"הצג סיסמה",children:h?c.jsx(Y0,{className:"h-5 w-5"}):c.jsx(J0,{className:"h-5 w-5"})})]}),a&&c.jsx("p",{className:"text-red-500 text-sm mt-1",children:"סיסמה שגויה, נסה שוב"})]}),c.jsxs("div",{className:"flex justify-between",children:[c.jsx("button",{onClick:()=>s(!1),className:"bg-gray-200 text-gray-800 px-4 py-2 rounded-md hover:bg-gray-300 transition-colors font-medium",children:"ביטול"}),c.jsx("button",{onClick:_,className:"bg-gradient-to-r from-blue-500 to-indigo-600 text-white px-4 py-2 rounded-md hover:from-blue-600 hover:to-indigo-700 transition-colors font-medium",children:"כניסה"})]})]})})]})}function sx({message:t,isVisible:e,onClose:n,type:r="success"}){if(x.useEffect(()=>{if(e){const s=setTimeout(()=>{n()},3e3);return()=>clearTimeout(s)}},[e,n]),!e)return null;const i=r==="success"?"bg-green-500":"bg-red-500";return c.jsx("div",{className:"fixed top-20 left-1/2 transform -translate-x-1/2 z-50 animate-bounce-in",children:c.jsxs("div",{className:`${i} text-white px-6 py-3 rounded-lg shadow-lg flex items-center`,children:[r==="success"&&c.jsx("svg",{className:"w-6 h-6 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),c.jsx("span",{children:t})]})})}const Mm=x.createContext();function vc(){return x.useContext(Mm)}function ox({children:t}){const[e,n]=x.useState({message:"",isVisible:!1,type:"success"}),r=(s,o="success")=>{n({message:s,isVisible:!0,type:o})},i=()=>{n(s=>({...s,isVisible:!1}))};return c.jsxs(Mm.Provider,{value:{showToast:r},children:[t,c.jsx(sx,{message:e.message,isVisible:e.isVisible,onClose:i,type:e.type})]})}function yh(){const t=Xo(),e=Jo(),n=t.slice(0,4),{showToast:r}=vc(),i=s=>{Lm(s),r(`${s.name} נוסף לסל הקניות`,"success")};return c.jsxs("div",{className:"space-y-12",children:[c.jsxs("section",{className:"text-center py-16 bg-blue-50 rounded-lg",children:[c.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-4",children:"ברוכים הבאים לחנות האונליין שלנו"}),c.jsx("p",{className:"text-xl text-gray-600 mb-8",children:"מצאו את המוצרים הטובים ביותר במחירים הטובים ביותר"}),c.jsx(Ze,{to:"/products",className:"btn-primary",children:"צפה במוצרים"})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold mb-6",children:"קטגוריות"}),c.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:e.map(s=>c.jsxs(Ze,{to:`/products?category=${s.id}`,className:"bg-white p-4 rounded-lg shadow-md hover:shadow-lg transition-shadow",children:[c.jsx("h3",{className:"font-semibold text-lg",children:s.name}),c.jsx("p",{className:"text-gray-600 text-sm",children:s.description})]},s.id))})]}),c.jsxs("section",{children:[c.jsx("h2",{className:"text-2xl font-bold mb-6",children:"מוצרים מומלצים"}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:n.map(s=>c.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[c.jsx("img",{src:s.image,alt:s.name,className:"w-full h-48 object-cover"}),c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"font-semibold text-lg mb-2",children:s.name}),c.jsx("p",{className:"text-gray-600 mb-4",children:s.description}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"text-xl font-bold",children:["₪",s.price]}),c.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>i(s),className:"btn-primary",children:"הוסף לסל"}),c.jsx(Ze,{to:`/products?category=${s.categoryId}`,className:"btn-secondary",children:"צפה בפרטים"})]})]})]})]},s.id))})]})]})}function lx(){const[t]=K0(),[e,n]=x.useState([]),[r]=x.useState(Jo()),[i,s]=x.useState(t.get("category")||""),[o,l]=x.useState(""),{showToast:a}=vc();x.useEffect(()=>{let h=Xo();i&&(h=h.filter(d=>d.categoryId===i)),o&&(h=h.filter(d=>d.name.includes(o)||d.description.includes(o))),n(h)},[i,o]);const u=h=>{Lm(h),a(`${h.name} נוסף לסל הקניות`,"success")};return c.jsxs("div",{className:"space-y-8",children:[c.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md",children:c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"קטגוריה"}),c.jsxs("select",{value:i,onChange:h=>s(h.target.value),className:"input-field",children:[c.jsx("option",{value:"",children:"הכל"}),r.map(h=>c.jsx("option",{value:h.id,children:h.name},h.id))]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"חיפוש"}),c.jsx("input",{type:"text",value:o,onChange:h=>l(h.target.value),placeholder:"חפש מוצרים...",className:"input-field"})]})]})}),c.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:e.map(h=>c.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[c.jsx("img",{src:h.image,alt:h.name,className:"w-full h-48 object-cover"}),c.jsxs("div",{className:"p-4",children:[c.jsx("h3",{className:"font-semibold text-lg mb-2",children:h.name}),c.jsx("p",{className:"text-gray-600 mb-4",children:h.description}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsxs("span",{className:"text-xl font-bold",children:["₪",h.price]}),c.jsx("button",{onClick:()=>u(h),className:"btn-primary",children:"הוסף לסל"})]})]})]},h.id))}),e.length===0&&c.jsx("div",{className:"text-center py-8",children:c.jsx("p",{className:"text-gray-600",children:"לא נמצאו מוצרים"})})]})}function ax(){const[t,e]=x.useState([]),[n,r]=x.useState(0);x.useEffect(()=>{const l=Tt();e(l),i(l)},[]);const i=l=>{const a=l.reduce((u,h)=>u+h.price*h.quantity,0);r(Math.round(a))},s=(l,a)=>{if(a<1)return;nx(l,a);const u=Tt();e(u),i(u)},o=l=>{tx(l);const a=Tt();e(a),i(a)};return t.length===0?c.jsxs("div",{className:"text-center py-12",children:[c.jsx("h2",{className:"text-2xl font-bold mb-4",children:"הסל שלך ריק"}),c.jsx(Ze,{to:"/products",className:"btn-primary",children:"המשך לקנייה"})]}):c.jsxs("div",{className:"space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"סל הקניות"}),c.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:[c.jsx("div",{className:"divide-y",children:t.map(l=>c.jsxs("div",{className:"p-4 flex items-center justify-between",children:[c.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[c.jsx("img",{src:l.image,alt:l.name,className:"w-20 h-20 object-cover rounded"}),c.jsxs("div",{children:[c.jsx("h3",{className:"font-semibold",children:l.name}),c.jsxs("p",{className:"text-gray-600",children:["₪",l.price]})]})]}),c.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[c.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[c.jsx("button",{onClick:()=>s(l.id,l.quantity-1),className:"btn-secondary",children:"-"}),c.jsx("span",{className:"w-8 text-center",children:l.quantity}),c.jsx("button",{onClick:()=>s(l.id,l.quantity+1),className:"btn-secondary",children:"+"})]}),c.jsx("button",{onClick:()=>o(l.id),className:"text-red-600 hover:text-red-800",children:"הסר"})]})]},l.id))}),c.jsxs("div",{className:"p-4 bg-gray-50",children:[c.jsxs("div",{className:"flex justify-between items-center mb-4",children:[c.jsx("span",{className:"font-semibold",children:'סה"כ:'}),c.jsxs("span",{className:"text-xl font-bold",children:["₪",n]})]}),c.jsxs("div",{className:"flex justify-end space-x-4 space-x-reverse",children:[c.jsx(Ze,{to:"/products",className:"btn-secondary",children:"המשך לקנייה"}),c.jsx(Ze,{to:"/checkout",className:"btn-primary",children:"המשך לתשלום"})]})]})]})]})}var _h={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fm={NODE_ADMIN:!1,SDK_VERSION:"${JSCORE_VERSION}"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N=function(t,e){if(!t)throw Dr(e)},Dr=function(t){return new Error("Firebase Database ("+Fm.SDK_VERSION+") INTERNAL ASSERT FAILED: "+t)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zm=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},ux=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},yc={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,u=a?t[i+2]:0,h=s>>2,d=(s&3)<<4|l>>4;let f=(l&15)<<2|u>>6,v=u&63;a||(v=64,o||(f=64)),r.push(n[h],n[d],n[f],n[v])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(zm(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):ux(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const u=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||u==null||d==null)throw new cx;const f=s<<2|l>>4;if(r.push(f),u!==64){const v=l<<4&240|u>>2;if(r.push(v),d!==64){const y=u<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class cx extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Um=function(t){const e=zm(t);return yc.encodeByteArray(e,!0)},vo=function(t){return Um(t).replace(/\./g,"")},Ya=function(t){try{return yc.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dx(t){return Bm(void 0,t)}function Bm(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:const n=e;return new Date(n.getTime());case Object:t===void 0&&(t={});break;case Array:t=[];break;default:return e}for(const n in e)!e.hasOwnProperty(n)||!hx(n)||(t[n]=Bm(t[n],e[n]));return t}function hx(t){return t!=="__proto__"}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fx(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const px=()=>fx().__FIREBASE_DEFAULTS__,mx=()=>{if(typeof process>"u"||typeof _h>"u")return;const t=_h.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},gx=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&Ya(t[1]);return e&&JSON.parse(e)},Wm=()=>{try{return px()||mx()||gx()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},vx=t=>{var e,n;return(n=(e=Wm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},yx=t=>{const e=vx(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},$m=()=>{var t;return(t=Wm())===null||t===void 0?void 0:t.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ts{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _x(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t);return[vo(JSON.stringify(n)),vo(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xx(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Vm(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(xx())}function wx(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Cx(){return Fm.NODE_ADMIN===!0}function Ex(){try{return typeof indexedDB=="object"}catch{return!1}}function Sx(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nx="FirebaseError";class ns extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=Nx,Object.setPrototypeOf(this,ns.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Hm.prototype.create)}}class Hm{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?kx(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new ns(i,l,r)}}function kx(t,e){return t.replace(Ix,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const Ix=/\{\$([^}]+)}/g;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Li(t){return JSON.parse(t)}function pe(t){return JSON.stringify(t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qm=function(t){let e={},n={},r={},i="";try{const s=t.split(".");e=Li(Ya(s[0])||""),n=Li(Ya(s[1])||""),i=s[2],r=n.d||{},delete n.d}catch{}return{header:e,claims:n,data:r,signature:i}},Tx=function(t){const e=Qm(t),n=e.claims;return!!n&&typeof n=="object"&&n.hasOwnProperty("iat")},Px=function(t){const e=Qm(t).claims;return typeof e=="object"&&e.admin===!0};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function wt(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function Sr(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]}function xh(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function yo(t,e,n){const r={};for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[i]=e.call(n,t[i],i,t));return r}function Xa(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(wh(s)&&wh(o)){if(!Xa(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function wh(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rx(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jx{constructor(){this.chain_=[],this.buf_=[],this.W_=[],this.pad_=[],this.inbuf_=0,this.total_=0,this.blockSize=512/8,this.pad_[0]=128;for(let e=1;e<this.blockSize;++e)this.pad_[e]=0;this.reset()}reset(){this.chain_[0]=1732584193,this.chain_[1]=4023233417,this.chain_[2]=2562383102,this.chain_[3]=271733878,this.chain_[4]=3285377520,this.inbuf_=0,this.total_=0}compress_(e,n){n||(n=0);const r=this.W_;if(typeof e=="string")for(let d=0;d<16;d++)r[d]=e.charCodeAt(n)<<24|e.charCodeAt(n+1)<<16|e.charCodeAt(n+2)<<8|e.charCodeAt(n+3),n+=4;else for(let d=0;d<16;d++)r[d]=e[n]<<24|e[n+1]<<16|e[n+2]<<8|e[n+3],n+=4;for(let d=16;d<80;d++){const f=r[d-3]^r[d-8]^r[d-14]^r[d-16];r[d]=(f<<1|f>>>31)&4294967295}let i=this.chain_[0],s=this.chain_[1],o=this.chain_[2],l=this.chain_[3],a=this.chain_[4],u,h;for(let d=0;d<80;d++){d<40?d<20?(u=l^s&(o^l),h=1518500249):(u=s^o^l,h=1859775393):d<60?(u=s&o|l&(s|o),h=2400959708):(u=s^o^l,h=3395469782);const f=(i<<5|i>>>27)+u+a+h+r[d]&4294967295;a=l,l=o,o=(s<<30|s>>>2)&4294967295,s=i,i=f}this.chain_[0]=this.chain_[0]+i&4294967295,this.chain_[1]=this.chain_[1]+s&4294967295,this.chain_[2]=this.chain_[2]+o&4294967295,this.chain_[3]=this.chain_[3]+l&4294967295,this.chain_[4]=this.chain_[4]+a&4294967295}update(e,n){if(e==null)return;n===void 0&&(n=e.length);const r=n-this.blockSize;let i=0;const s=this.buf_;let o=this.inbuf_;for(;i<n;){if(o===0)for(;i<=r;)this.compress_(e,i),i+=this.blockSize;if(typeof e=="string"){for(;i<n;)if(s[o]=e.charCodeAt(i),++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}else for(;i<n;)if(s[o]=e[i],++o,++i,o===this.blockSize){this.compress_(s),o=0;break}}this.inbuf_=o,this.total_+=n}digest(){const e=[];let n=this.total_*8;this.inbuf_<56?this.update(this.pad_,56-this.inbuf_):this.update(this.pad_,this.blockSize-(this.inbuf_-56));for(let i=this.blockSize-1;i>=56;i--)this.buf_[i]=n&255,n/=256;this.compress_(this.buf_);let r=0;for(let i=0;i<5;i++)for(let s=24;s>=0;s-=8)e[r]=this.chain_[i]>>s&255,++r;return e}}function Zo(t,e){return`${t} failed: ${e} argument `}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);if(i>=55296&&i<=56319){const s=i-55296;r++,N(r<t.length,"Surrogate pair missing trail surrogate.");const o=t.charCodeAt(r)-56320;i=65536+(s<<10)+o}i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):i<65536?(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},el=function(t){let e=0;for(let n=0;n<t.length;n++){const r=t.charCodeAt(n);r<128?e++:r<2048?e+=2:r>=55296&&r<=56319?(e+=4,n++):e+=3}return e};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $n(t){return t&&t._delegate?t._delegate:t}class Mi{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const En="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ox{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new ts;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Ax(e))try{this.getOrInitializeService({instanceIdentifier:En})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=En){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=En){return this.instances.has(e)}getOptions(e=En){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Dx(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=En){return this.component?this.component.multipleInstances?e:En:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Dx(t){return t===En?void 0:t}function Ax(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lx{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new Ox(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var q;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(q||(q={}));const Mx={debug:q.DEBUG,verbose:q.VERBOSE,info:q.INFO,warn:q.WARN,error:q.ERROR,silent:q.SILENT},Fx=q.INFO,zx={[q.DEBUG]:"log",[q.VERBOSE]:"log",[q.INFO]:"info",[q.WARN]:"warn",[q.ERROR]:"error"},Ux=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=zx[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class Gm{constructor(e){this.name=e,this._logLevel=Fx,this._logHandler=Ux,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in q))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mx[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,q.DEBUG,...e),this._logHandler(this,q.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,q.VERBOSE,...e),this._logHandler(this,q.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,q.INFO,...e),this._logHandler(this,q.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,q.WARN,...e),this._logHandler(this,q.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,q.ERROR,...e),this._logHandler(this,q.ERROR,...e)}}const Bx=(t,e)=>e.some(n=>t instanceof n);let Ch,Eh;function Wx(){return Ch||(Ch=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function $x(){return Eh||(Eh=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const Km=new WeakMap,Ja=new WeakMap,qm=new WeakMap,Ul=new WeakMap,_c=new WeakMap;function Vx(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(on(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&Km.set(n,t)}).catch(()=>{}),_c.set(e,t),e}function Hx(t){if(Ja.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});Ja.set(t,e)}let Za={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return Ja.get(t);if(e==="objectStoreNames")return t.objectStoreNames||qm.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return on(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Qx(t){Za=t(Za)}function Gx(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Bl(this),e,...n);return qm.set(r,e.sort?e.sort():[e]),on(r)}:$x().includes(t)?function(...e){return t.apply(Bl(this),e),on(Km.get(this))}:function(...e){return on(t.apply(Bl(this),e))}}function Kx(t){return typeof t=="function"?Gx(t):(t instanceof IDBTransaction&&Hx(t),Bx(t,Wx())?new Proxy(t,Za):t)}function on(t){if(t instanceof IDBRequest)return Vx(t);if(Ul.has(t))return Ul.get(t);const e=Kx(t);return e!==t&&(Ul.set(t,e),_c.set(e,t)),e}const Bl=t=>_c.get(t);function qx(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=on(o);return r&&o.addEventListener("upgradeneeded",a=>{r(on(o.result),a.oldVersion,a.newVersion,on(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",u=>i(u.oldVersion,u.newVersion,u))}).catch(()=>{}),l}const Yx=["get","getKey","getAll","getAllKeys","count"],Xx=["put","add","delete","clear"],Wl=new Map;function Sh(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Wl.get(e))return Wl.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=Xx.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Yx.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let u=a.store;return r&&(u=u.index(l.shift())),(await Promise.all([u[n](...l),i&&a.done]))[0]};return Wl.set(e,s),s}Qx(t=>({...t,get:(e,n,r)=>Sh(e,n)||t.get(e,n,r),has:(e,n)=>!!Sh(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Zx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Zx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const eu="@firebase/app",Nh="0.10.13";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dt=new Gm("@firebase/app"),ew="@firebase/app-compat",tw="@firebase/analytics-compat",nw="@firebase/analytics",rw="@firebase/app-check-compat",iw="@firebase/app-check",sw="@firebase/auth",ow="@firebase/auth-compat",lw="@firebase/database",aw="@firebase/data-connect",uw="@firebase/database-compat",cw="@firebase/functions",dw="@firebase/functions-compat",hw="@firebase/installations",fw="@firebase/installations-compat",pw="@firebase/messaging",mw="@firebase/messaging-compat",gw="@firebase/performance",vw="@firebase/performance-compat",yw="@firebase/remote-config",_w="@firebase/remote-config-compat",xw="@firebase/storage",ww="@firebase/storage-compat",Cw="@firebase/firestore",Ew="@firebase/vertexai-preview",Sw="@firebase/firestore-compat",Nw="firebase",kw="10.14.1";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tu="[DEFAULT]",Iw={[eu]:"fire-core",[ew]:"fire-core-compat",[nw]:"fire-analytics",[tw]:"fire-analytics-compat",[iw]:"fire-app-check",[rw]:"fire-app-check-compat",[sw]:"fire-auth",[ow]:"fire-auth-compat",[lw]:"fire-rtdb",[aw]:"fire-data-connect",[uw]:"fire-rtdb-compat",[cw]:"fire-fn",[dw]:"fire-fn-compat",[hw]:"fire-iid",[fw]:"fire-iid-compat",[pw]:"fire-fcm",[mw]:"fire-fcm-compat",[gw]:"fire-perf",[vw]:"fire-perf-compat",[yw]:"fire-rc",[_w]:"fire-rc-compat",[xw]:"fire-gcs",[ww]:"fire-gcs-compat",[Cw]:"fire-fst",[Sw]:"fire-fst-compat",[Ew]:"fire-vertex","fire-js":"fire-js",[Nw]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _o=new Map,Tw=new Map,nu=new Map;function kh(t,e){try{t.container.addComponent(e)}catch(n){Dt.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function xo(t){const e=t.name;if(nu.has(e))return Dt.debug(`There were multiple attempts to register component ${e}.`),!1;nu.set(e,t);for(const n of _o.values())kh(n,t);for(const n of Tw.values())kh(n,t);return!0}function Pw(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rw={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ln=new Hm("app","Firebase",Rw);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Mi("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ln.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bw=kw;function Ym(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:tu,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw ln.create("bad-app-name",{appName:String(i)});if(n||(n=$m()),!n)throw ln.create("no-options");const s=_o.get(i);if(s){if(Xa(n,s.options)&&Xa(r,s.config))return s;throw ln.create("duplicate-app",{appName:i})}const o=new Lx(i);for(const a of nu.values())o.addComponent(a);const l=new jw(n,r,o);return _o.set(i,l),l}function Ow(t=tu){const e=_o.get(t);if(!e&&t===tu&&$m())return Ym();if(!e)throw ln.create("no-app",{appName:t});return e}function pr(t,e,n){var r;let i=(r=Iw[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Dt.warn(l.join(" "));return}xo(new Mi(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dw="firebase-heartbeat-database",Aw=1,Fi="firebase-heartbeat-store";let $l=null;function Xm(){return $l||($l=qx(Dw,Aw,{upgrade:(t,e)=>{switch(e){case 0:try{t.createObjectStore(Fi)}catch(n){console.warn(n)}}}}).catch(t=>{throw ln.create("idb-open",{originalErrorMessage:t.message})})),$l}async function Lw(t){try{const n=(await Xm()).transaction(Fi),r=await n.objectStore(Fi).get(Jm(t));return await n.done,r}catch(e){if(e instanceof ns)Dt.warn(e.message);else{const n=ln.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});Dt.warn(n.message)}}}async function Ih(t,e){try{const r=(await Xm()).transaction(Fi,"readwrite");await r.objectStore(Fi).put(e,Jm(t)),await r.done}catch(n){if(n instanceof ns)Dt.warn(n.message);else{const r=ln.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});Dt.warn(r.message)}}}function Jm(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mw=1024,Fw=30*24*60*60*1e3;class zw{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Bw(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var e,n;try{const i=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Th();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:i}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const l=new Date(o.date).valueOf();return Date.now()-l<=Fw}),this._storage.overwrite(this._heartbeatsCache))}catch(r){Dt.warn(r)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Th(),{heartbeatsToSend:r,unsentEntries:i}=Uw(this._heartbeatsCache.heartbeats),s=vo(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,i.length>0?(this._heartbeatsCache.heartbeats=i,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(n){return Dt.warn(n),""}}}function Th(){return new Date().toISOString().substring(0,10)}function Uw(t,e=Mw){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Ph(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Ph(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Bw{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ex()?Sx().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await Lw(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ih(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Ih(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Ph(t){return vo(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ww(t){xo(new Mi("platform-logger",e=>new Jx(e),"PRIVATE")),xo(new Mi("heartbeat",e=>new zw(e),"PRIVATE")),pr(eu,Nh,t),pr(eu,Nh,"esm2017"),pr("fire-js","")}Ww("");var $w="firebase",Vw="10.14.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */pr($w,Vw,"app");var Rh={};const jh="@firebase/database",bh="1.0.8";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zm="";function Hw(t){Zm=t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qw{constructor(e){this.domStorage_=e,this.prefix_="firebase:"}set(e,n){n==null?this.domStorage_.removeItem(this.prefixedName_(e)):this.domStorage_.setItem(this.prefixedName_(e),pe(n))}get(e){const n=this.domStorage_.getItem(this.prefixedName_(e));return n==null?null:Li(n)}remove(e){this.domStorage_.removeItem(this.prefixedName_(e))}prefixedName_(e){return this.prefix_+e}toString(){return this.domStorage_.toString()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw{constructor(){this.cache_={},this.isInMemoryStorage=!0}set(e,n){n==null?delete this.cache_[e]:this.cache_[e]=n}get(e){return wt(this.cache_,e)?this.cache_[e]:null}remove(e){delete this.cache_[e]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eg=function(t){try{if(typeof window<"u"&&typeof window[t]<"u"){const e=window[t];return e.setItem("firebase:sentinel","cache"),e.removeItem("firebase:sentinel"),new Qw(e)}}catch{}return new Gw},Tn=eg("localStorage"),Kw=eg("sessionStorage");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mr=new Gm("@firebase/database"),qw=function(){let t=1;return function(){return t++}}(),tg=function(t){const e=bx(t),n=new jx;n.update(e);const r=n.digest();return yc.encodeByteArray(r)},rs=function(...t){let e="";for(let n=0;n<t.length;n++){const r=t[n];Array.isArray(r)||r&&typeof r=="object"&&typeof r.length=="number"?e+=rs.apply(null,r):typeof r=="object"?e+=pe(r):e+=r,e+=" "}return e};let hi=null,Oh=!0;const Yw=function(t,e){N(!0,"Can't turn on custom loggers persistently."),mr.logLevel=q.VERBOSE,hi=mr.log.bind(mr)},we=function(...t){if(Oh===!0&&(Oh=!1,hi===null&&Kw.get("logging_enabled")===!0&&Yw()),hi){const e=rs.apply(null,t);hi(e)}},is=function(t){return function(...e){we(t,...e)}},ru=function(...t){const e="FIREBASE INTERNAL ERROR: "+rs(...t);mr.error(e)},At=function(...t){const e=`FIREBASE FATAL ERROR: ${rs(...t)}`;throw mr.error(e),new Error(e)},be=function(...t){const e="FIREBASE WARNING: "+rs(...t);mr.warn(e)},Xw=function(){typeof window<"u"&&window.location&&window.location.protocol&&window.location.protocol.indexOf("https:")!==-1&&be("Insecure Firebase access from a secure page. Please use https in calls to new Firebase().")},xc=function(t){return typeof t=="number"&&(t!==t||t===Number.POSITIVE_INFINITY||t===Number.NEGATIVE_INFINITY)},Jw=function(t){if(document.readyState==="complete")t();else{let e=!1;const n=function(){if(!document.body){setTimeout(n,Math.floor(10));return}e||(e=!0,t())};document.addEventListener?(document.addEventListener("DOMContentLoaded",n,!1),window.addEventListener("load",n,!1)):document.attachEvent&&(document.attachEvent("onreadystatechange",()=>{document.readyState==="complete"&&n()}),window.attachEvent("onload",n))}},Nr="[MIN_NAME]",Ln="[MAX_NAME]",Vn=function(t,e){if(t===e)return 0;if(t===Nr||e===Ln)return-1;if(e===Nr||t===Ln)return 1;{const n=Dh(t),r=Dh(e);return n!==null?r!==null?n-r===0?t.length-e.length:n-r:-1:r!==null?1:t<e?-1:1}},Zw=function(t,e){return t===e?0:t<e?-1:1},qr=function(t,e){if(e&&t in e)return e[t];throw new Error("Missing required key ("+t+") in object: "+pe(e))},wc=function(t){if(typeof t!="object"||t===null)return pe(t);const e=[];for(const r in t)e.push(r);e.sort();let n="{";for(let r=0;r<e.length;r++)r!==0&&(n+=","),n+=pe(e[r]),n+=":",n+=wc(t[e[r]]);return n+="}",n},ng=function(t,e){const n=t.length;if(n<=e)return[t];const r=[];for(let i=0;i<n;i+=e)i+e>n?r.push(t.substring(i,n)):r.push(t.substring(i,i+e));return r};function Se(t,e){for(const n in t)t.hasOwnProperty(n)&&e(n,t[n])}const rg=function(t){N(!xc(t),"Invalid JSON number");const e=11,n=52,r=(1<<e-1)-1;let i,s,o,l,a;t===0?(s=0,o=0,i=1/t===-1/0?1:0):(i=t<0,t=Math.abs(t),t>=Math.pow(2,1-r)?(l=Math.min(Math.floor(Math.log(t)/Math.LN2),r),s=l+r,o=Math.round(t*Math.pow(2,n-l)-Math.pow(2,n))):(s=0,o=Math.round(t/Math.pow(2,1-r-n))));const u=[];for(a=n;a;a-=1)u.push(o%2?1:0),o=Math.floor(o/2);for(a=e;a;a-=1)u.push(s%2?1:0),s=Math.floor(s/2);u.push(i?1:0),u.reverse();const h=u.join("");let d="";for(a=0;a<64;a+=8){let f=parseInt(h.substr(a,8),2).toString(16);f.length===1&&(f="0"+f),d=d+f}return d.toLowerCase()},eC=function(){return!!(typeof window=="object"&&window.chrome&&window.chrome.extension&&!/^chrome/.test(window.location.href))},tC=function(){return typeof Windows=="object"&&typeof Windows.UI=="object"};function nC(t,e){let n="Unknown Error";t==="too_big"?n="The data requested exceeds the maximum size that can be accessed with a single request.":t==="permission_denied"?n="Client doesn't have permission to access the desired data.":t==="unavailable"&&(n="The service is unavailable");const r=new Error(t+" at "+e._path.toString()+": "+n);return r.code=t.toUpperCase(),r}const rC=new RegExp("^-?(0*)\\d{1,10}$"),iC=-2147483648,sC=2147483647,Dh=function(t){if(rC.test(t)){const e=Number(t);if(e>=iC&&e<=sC)return e}return null},Ar=function(t){try{t()}catch(e){setTimeout(()=>{const n=e.stack||"";throw be("Exception was thrown by user callback.",n),e},Math.floor(0))}},oC=function(){return(typeof window=="object"&&window.navigator&&window.navigator.userAgent||"").search(/googlebot|google webmaster tools|bingbot|yahoo! slurp|baiduspider|yandexbot|duckduckbot/i)>=0},fi=function(t,e){const n=setTimeout(t,e);return typeof n=="number"&&typeof Deno<"u"&&Deno.unrefTimer?Deno.unrefTimer(n):typeof n=="object"&&n.unref&&n.unref(),n};/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e,n){this.appName_=e,this.appCheckProvider=n,this.appCheck=n==null?void 0:n.getImmediate({optional:!0}),this.appCheck||n==null||n.get().then(r=>this.appCheck=r)}getToken(e){return this.appCheck?this.appCheck.getToken(e):new Promise((n,r)=>{setTimeout(()=>{this.appCheck?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){var n;(n=this.appCheckProvider)===null||n===void 0||n.get().then(r=>r.addTokenListener(e))}notifyForInvalidToken(){be(`Provided AppCheck credentials for the app named "${this.appName_}" are invalid. This usually indicates your app was not initialized correctly.`)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aC{constructor(e,n,r){this.appName_=e,this.firebaseOptions_=n,this.authProvider_=r,this.auth_=null,this.auth_=r.getImmediate({optional:!0}),this.auth_||r.onInit(i=>this.auth_=i)}getToken(e){return this.auth_?this.auth_.getToken(e).catch(n=>n&&n.code==="auth/token-not-initialized"?(we("Got auth/token-not-initialized error.  Treating as null token."),null):Promise.reject(n)):new Promise((n,r)=>{setTimeout(()=>{this.auth_?this.getToken(e).then(n,r):n(null)},0)})}addTokenChangeListener(e){this.auth_?this.auth_.addAuthTokenListener(e):this.authProvider_.get().then(n=>n.addAuthTokenListener(e))}removeTokenChangeListener(e){this.authProvider_.get().then(n=>n.removeAuthTokenListener(e))}notifyForInvalidToken(){let e='Provided authentication credentials for the app named "'+this.appName_+'" are invalid. This usually indicates your app was not initialized correctly. ';"credential"in this.firebaseOptions_?e+='Make sure the "credential" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':"serviceAccount"in this.firebaseOptions_?e+='Make sure the "serviceAccount" property provided to initializeApp() is authorized to access the specified "databaseURL" and is from the correct project.':e+='Make sure the "apiKey" and "databaseURL" properties provided to initializeApp() match the values provided for your app at https://console.firebase.google.com/.',be(e)}}class Vs{constructor(e){this.accessToken=e}getToken(e){return Promise.resolve({accessToken:this.accessToken})}addTokenChangeListener(e){e(this.accessToken)}removeTokenChangeListener(e){}notifyForInvalidToken(){}}Vs.OWNER="owner";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cc="5",ig="v",sg="s",og="r",lg="f",ag=/(console\.firebase|firebase-console-\w+\.corp|firebase\.corp)\.google\.com/,ug="ls",cg="p",iu="ac",dg="websocket",hg="long_polling";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fg{constructor(e,n,r,i,s=!1,o="",l=!1,a=!1){this.secure=n,this.namespace=r,this.webSocketOnly=i,this.nodeAdmin=s,this.persistenceKey=o,this.includeNamespaceInQueryParams=l,this.isUsingEmulator=a,this._host=e.toLowerCase(),this._domain=this._host.substr(this._host.indexOf(".")+1),this.internalHost=Tn.get("host:"+e)||this._host}isCacheableHost(){return this.internalHost.substr(0,2)==="s-"}isCustomHost(){return this._domain!=="firebaseio.com"&&this._domain!=="firebaseio-demo.com"}get host(){return this._host}set host(e){e!==this.internalHost&&(this.internalHost=e,this.isCacheableHost()&&Tn.set("host:"+this._host,this.internalHost))}toString(){let e=this.toURLString();return this.persistenceKey&&(e+="<"+this.persistenceKey+">"),e}toURLString(){const e=this.secure?"https://":"http://",n=this.includeNamespaceInQueryParams?`?ns=${this.namespace}`:"";return`${e}${this.host}/${n}`}}function uC(t){return t.host!==t.internalHost||t.isCustomHost()||t.includeNamespaceInQueryParams}function pg(t,e,n){N(typeof e=="string","typeof type must == string"),N(typeof n=="object","typeof params must == object");let r;if(e===dg)r=(t.secure?"wss://":"ws://")+t.internalHost+"/.ws?";else if(e===hg)r=(t.secure?"https://":"http://")+t.internalHost+"/.lp?";else throw new Error("Unknown connection type: "+e);uC(t)&&(n.ns=t.namespace);const i=[];return Se(n,(s,o)=>{i.push(s+"="+o)}),r+i.join("&")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cC{constructor(){this.counters_={}}incrementCounter(e,n=1){wt(this.counters_,e)||(this.counters_[e]=0),this.counters_[e]+=n}get(){return dx(this.counters_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vl={},Hl={};function Ec(t){const e=t.toString();return Vl[e]||(Vl[e]=new cC),Vl[e]}function dC(t,e){const n=t.toString();return Hl[n]||(Hl[n]=e()),Hl[n]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hC{constructor(e){this.onMessage_=e,this.pendingResponses=[],this.currentResponseNum=0,this.closeAfterResponse=-1,this.onClose=null}closeAfter(e,n){this.closeAfterResponse=e,this.onClose=n,this.closeAfterResponse<this.currentResponseNum&&(this.onClose(),this.onClose=null)}handleResponse(e,n){for(this.pendingResponses[e]=n;this.pendingResponses[this.currentResponseNum];){const r=this.pendingResponses[this.currentResponseNum];delete this.pendingResponses[this.currentResponseNum];for(let i=0;i<r.length;++i)r[i]&&Ar(()=>{this.onMessage_(r[i])});if(this.currentResponseNum===this.closeAfterResponse){this.onClose&&(this.onClose(),this.onClose=null);break}this.currentResponseNum++}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ah="start",fC="close",pC="pLPCommand",mC="pRTLPCB",mg="id",gg="pw",vg="ser",gC="cb",vC="seg",yC="ts",_C="d",xC="dframe",yg=1870,_g=30,wC=yg-_g,CC=25e3,EC=3e4;class lr{constructor(e,n,r,i,s,o,l){this.connId=e,this.repoInfo=n,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.transportSessionId=o,this.lastSessionId=l,this.bytesSent=0,this.bytesReceived=0,this.everConnected_=!1,this.log_=is(e),this.stats_=Ec(n),this.urlFn=a=>(this.appCheckToken&&(a[iu]=this.appCheckToken),pg(n,hg,a))}open(e,n){this.curSegmentNum=0,this.onDisconnect_=n,this.myPacketOrderer=new hC(e),this.isClosed_=!1,this.connectTimeoutTimer_=setTimeout(()=>{this.log_("Timed out trying to connect."),this.onClosed_(),this.connectTimeoutTimer_=null},Math.floor(EC)),Jw(()=>{if(this.isClosed_)return;this.scriptTagHolder=new Sc((...s)=>{const[o,l,a,u,h]=s;if(this.incrementIncomingBytes_(s),!!this.scriptTagHolder)if(this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null),this.everConnected_=!0,o===Ah)this.id=l,this.password=a;else if(o===fC)l?(this.scriptTagHolder.sendNewPolls=!1,this.myPacketOrderer.closeAfter(l,()=>{this.onClosed_()})):this.onClosed_();else throw new Error("Unrecognized command received: "+o)},(...s)=>{const[o,l]=s;this.incrementIncomingBytes_(s),this.myPacketOrderer.handleResponse(o,l)},()=>{this.onClosed_()},this.urlFn);const r={};r[Ah]="t",r[vg]=Math.floor(Math.random()*1e8),this.scriptTagHolder.uniqueCallbackIdentifier&&(r[gC]=this.scriptTagHolder.uniqueCallbackIdentifier),r[ig]=Cc,this.transportSessionId&&(r[sg]=this.transportSessionId),this.lastSessionId&&(r[ug]=this.lastSessionId),this.applicationId&&(r[cg]=this.applicationId),this.appCheckToken&&(r[iu]=this.appCheckToken),typeof location<"u"&&location.hostname&&ag.test(location.hostname)&&(r[og]=lg);const i=this.urlFn(r);this.log_("Connecting via long-poll to "+i),this.scriptTagHolder.addTag(i,()=>{})})}start(){this.scriptTagHolder.startLongPoll(this.id,this.password),this.addDisconnectPingFrame(this.id,this.password)}static forceAllow(){lr.forceAllow_=!0}static forceDisallow(){lr.forceDisallow_=!0}static isAvailable(){return lr.forceAllow_?!0:!lr.forceDisallow_&&typeof document<"u"&&document.createElement!=null&&!eC()&&!tC()}markConnectionHealthy(){}shutdown_(){this.isClosed_=!0,this.scriptTagHolder&&(this.scriptTagHolder.close(),this.scriptTagHolder=null),this.myDisconnFrame&&(document.body.removeChild(this.myDisconnFrame),this.myDisconnFrame=null),this.connectTimeoutTimer_&&(clearTimeout(this.connectTimeoutTimer_),this.connectTimeoutTimer_=null)}onClosed_(){this.isClosed_||(this.log_("Longpoll is closing itself"),this.shutdown_(),this.onDisconnect_&&(this.onDisconnect_(this.everConnected_),this.onDisconnect_=null))}close(){this.isClosed_||(this.log_("Longpoll is being closed."),this.shutdown_())}send(e){const n=pe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=Um(n),i=ng(r,wC);for(let s=0;s<i.length;s++)this.scriptTagHolder.enqueueSegment(this.curSegmentNum,i.length,i[s]),this.curSegmentNum++}addDisconnectPingFrame(e,n){this.myDisconnFrame=document.createElement("iframe");const r={};r[xC]="t",r[mg]=e,r[gg]=n,this.myDisconnFrame.src=this.urlFn(r),this.myDisconnFrame.style.display="none",document.body.appendChild(this.myDisconnFrame)}incrementIncomingBytes_(e){const n=pe(e).length;this.bytesReceived+=n,this.stats_.incrementCounter("bytes_received",n)}}class Sc{constructor(e,n,r,i){this.onDisconnect=r,this.urlFn=i,this.outstandingRequests=new Set,this.pendingSegs=[],this.currentSerial=Math.floor(Math.random()*1e8),this.sendNewPolls=!0;{this.uniqueCallbackIdentifier=qw(),window[pC+this.uniqueCallbackIdentifier]=e,window[mC+this.uniqueCallbackIdentifier]=n,this.myIFrame=Sc.createIFrame_();let s="";this.myIFrame.src&&this.myIFrame.src.substr(0,11)==="javascript:"&&(s='<script>document.domain="'+document.domain+'";<\/script>');const o="<html><body>"+s+"</body></html>";try{this.myIFrame.doc.open(),this.myIFrame.doc.write(o),this.myIFrame.doc.close()}catch(l){we("frame writing exception"),l.stack&&we(l.stack),we(l)}}}static createIFrame_(){const e=document.createElement("iframe");if(e.style.display="none",document.body){document.body.appendChild(e);try{e.contentWindow.document||we("No IE domain setting required")}catch{const r=document.domain;e.src="javascript:void((function(){document.open();document.domain='"+r+"';document.close();})())"}}else throw"Document body has not initialized. Wait to initialize Firebase until after the document is ready.";return e.contentDocument?e.doc=e.contentDocument:e.contentWindow?e.doc=e.contentWindow.document:e.document&&(e.doc=e.document),e}close(){this.alive=!1,this.myIFrame&&(this.myIFrame.doc.body.textContent="",setTimeout(()=>{this.myIFrame!==null&&(document.body.removeChild(this.myIFrame),this.myIFrame=null)},Math.floor(0)));const e=this.onDisconnect;e&&(this.onDisconnect=null,e())}startLongPoll(e,n){for(this.myID=e,this.myPW=n,this.alive=!0;this.newRequest_(););}newRequest_(){if(this.alive&&this.sendNewPolls&&this.outstandingRequests.size<(this.pendingSegs.length>0?2:1)){this.currentSerial++;const e={};e[mg]=this.myID,e[gg]=this.myPW,e[vg]=this.currentSerial;let n=this.urlFn(e),r="",i=0;for(;this.pendingSegs.length>0&&this.pendingSegs[0].d.length+_g+r.length<=yg;){const o=this.pendingSegs.shift();r=r+"&"+vC+i+"="+o.seg+"&"+yC+i+"="+o.ts+"&"+_C+i+"="+o.d,i++}return n=n+r,this.addLongPollTag_(n,this.currentSerial),!0}else return!1}enqueueSegment(e,n,r){this.pendingSegs.push({seg:e,ts:n,d:r}),this.alive&&this.newRequest_()}addLongPollTag_(e,n){this.outstandingRequests.add(n);const r=()=>{this.outstandingRequests.delete(n),this.newRequest_()},i=setTimeout(r,Math.floor(CC)),s=()=>{clearTimeout(i),r()};this.addTag(e,s)}addTag(e,n){setTimeout(()=>{try{if(!this.sendNewPolls)return;const r=this.myIFrame.doc.createElement("script");r.type="text/javascript",r.async=!0,r.src=e,r.onload=r.onreadystatechange=function(){const i=r.readyState;(!i||i==="loaded"||i==="complete")&&(r.onload=r.onreadystatechange=null,r.parentNode&&r.parentNode.removeChild(r),n())},r.onerror=()=>{we("Long-poll script failed to load: "+e),this.sendNewPolls=!1,this.close()},this.myIFrame.doc.body.appendChild(r)}catch{}},Math.floor(1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SC=16384,NC=45e3;let wo=null;typeof MozWebSocket<"u"?wo=MozWebSocket:typeof WebSocket<"u"&&(wo=WebSocket);class ct{constructor(e,n,r,i,s,o,l){this.connId=e,this.applicationId=r,this.appCheckToken=i,this.authToken=s,this.keepaliveTimer=null,this.frames=null,this.totalFrames=0,this.bytesSent=0,this.bytesReceived=0,this.log_=is(this.connId),this.stats_=Ec(n),this.connURL=ct.connectionURL_(n,o,l,i,r),this.nodeAdmin=n.nodeAdmin}static connectionURL_(e,n,r,i,s){const o={};return o[ig]=Cc,typeof location<"u"&&location.hostname&&ag.test(location.hostname)&&(o[og]=lg),n&&(o[sg]=n),r&&(o[ug]=r),i&&(o[iu]=i),s&&(o[cg]=s),pg(e,dg,o)}open(e,n){this.onDisconnect=n,this.onMessage=e,this.log_("Websocket connecting to "+this.connURL),this.everConnected_=!1,Tn.set("previous_websocket_failure",!0);try{let r;Cx(),this.mySock=new wo(this.connURL,[],r)}catch(r){this.log_("Error instantiating WebSocket.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_();return}this.mySock.onopen=()=>{this.log_("Websocket connected."),this.everConnected_=!0},this.mySock.onclose=()=>{this.log_("Websocket connection was disconnected."),this.mySock=null,this.onClosed_()},this.mySock.onmessage=r=>{this.handleIncomingFrame(r)},this.mySock.onerror=r=>{this.log_("WebSocket error.  Closing connection.");const i=r.message||r.data;i&&this.log_(i),this.onClosed_()}}start(){}static forceDisallow(){ct.forceDisallow_=!0}static isAvailable(){let e=!1;if(typeof navigator<"u"&&navigator.userAgent){const n=/Android ([0-9]{0,}\.[0-9]{0,})/,r=navigator.userAgent.match(n);r&&r.length>1&&parseFloat(r[1])<4.4&&(e=!0)}return!e&&wo!==null&&!ct.forceDisallow_}static previouslyFailed(){return Tn.isInMemoryStorage||Tn.get("previous_websocket_failure")===!0}markConnectionHealthy(){Tn.remove("previous_websocket_failure")}appendFrame_(e){if(this.frames.push(e),this.frames.length===this.totalFrames){const n=this.frames.join("");this.frames=null;const r=Li(n);this.onMessage(r)}}handleNewFrameCount_(e){this.totalFrames=e,this.frames=[]}extractFrameCount_(e){if(N(this.frames===null,"We already have a frame buffer"),e.length<=6){const n=Number(e);if(!isNaN(n))return this.handleNewFrameCount_(n),null}return this.handleNewFrameCount_(1),e}handleIncomingFrame(e){if(this.mySock===null)return;const n=e.data;if(this.bytesReceived+=n.length,this.stats_.incrementCounter("bytes_received",n.length),this.resetKeepAlive(),this.frames!==null)this.appendFrame_(n);else{const r=this.extractFrameCount_(n);r!==null&&this.appendFrame_(r)}}send(e){this.resetKeepAlive();const n=pe(e);this.bytesSent+=n.length,this.stats_.incrementCounter("bytes_sent",n.length);const r=ng(n,SC);r.length>1&&this.sendString_(String(r.length));for(let i=0;i<r.length;i++)this.sendString_(r[i])}shutdown_(){this.isClosed_=!0,this.keepaliveTimer&&(clearInterval(this.keepaliveTimer),this.keepaliveTimer=null),this.mySock&&(this.mySock.close(),this.mySock=null)}onClosed_(){this.isClosed_||(this.log_("WebSocket is closing itself"),this.shutdown_(),this.onDisconnect&&(this.onDisconnect(this.everConnected_),this.onDisconnect=null))}close(){this.isClosed_||(this.log_("WebSocket is being closed"),this.shutdown_())}resetKeepAlive(){clearInterval(this.keepaliveTimer),this.keepaliveTimer=setInterval(()=>{this.mySock&&this.sendString_("0"),this.resetKeepAlive()},Math.floor(NC))}sendString_(e){try{this.mySock.send(e)}catch(n){this.log_("Exception thrown from WebSocket.send():",n.message||n.data,"Closing connection."),setTimeout(this.onClosed_.bind(this),0)}}}ct.responsesRequiredToBeHealthy=2;ct.healthyTimeout=3e4;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zi{constructor(e){this.initTransports_(e)}static get ALL_TRANSPORTS(){return[lr,ct]}static get IS_TRANSPORT_INITIALIZED(){return this.globalTransportInitialized_}initTransports_(e){const n=ct&&ct.isAvailable();let r=n&&!ct.previouslyFailed();if(e.webSocketOnly&&(n||be("wss:// URL used, but browser isn't known to support websockets.  Trying anyway."),r=!0),r)this.transports_=[ct];else{const i=this.transports_=[];for(const s of zi.ALL_TRANSPORTS)s&&s.isAvailable()&&i.push(s);zi.globalTransportInitialized_=!0}}initialTransport(){if(this.transports_.length>0)return this.transports_[0];throw new Error("No transports available")}upgradeTransport(){return this.transports_.length>1?this.transports_[1]:null}}zi.globalTransportInitialized_=!1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kC=6e4,IC=5e3,TC=10*1024,PC=100*1024,Ql="t",Lh="d",RC="s",Mh="r",jC="e",Fh="o",zh="a",Uh="n",Bh="p",bC="h";class OC{constructor(e,n,r,i,s,o,l,a,u,h){this.id=e,this.repoInfo_=n,this.applicationId_=r,this.appCheckToken_=i,this.authToken_=s,this.onMessage_=o,this.onReady_=l,this.onDisconnect_=a,this.onKill_=u,this.lastSessionId=h,this.connectionCount=0,this.pendingDataMessages=[],this.state_=0,this.log_=is("c:"+this.id+":"),this.transportManager_=new zi(n),this.log_("Connection created"),this.start_()}start_(){const e=this.transportManager_.initialTransport();this.conn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,null,this.lastSessionId),this.primaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.conn_),r=this.disconnReceiver_(this.conn_);this.tx_=this.conn_,this.rx_=this.conn_,this.secondaryConn_=null,this.isHealthy_=!1,setTimeout(()=>{this.conn_&&this.conn_.open(n,r)},Math.floor(0));const i=e.healthyTimeout||0;i>0&&(this.healthyTimeout_=fi(()=>{this.healthyTimeout_=null,this.isHealthy_||(this.conn_&&this.conn_.bytesReceived>PC?(this.log_("Connection exceeded healthy timeout but has received "+this.conn_.bytesReceived+" bytes.  Marking connection healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()):this.conn_&&this.conn_.bytesSent>TC?this.log_("Connection exceeded healthy timeout but has sent "+this.conn_.bytesSent+" bytes.  Leaving connection alive."):(this.log_("Closing unhealthy connection after timeout."),this.close()))},Math.floor(i)))}nextTransportId_(){return"c:"+this.id+":"+this.connectionCount++}disconnReceiver_(e){return n=>{e===this.conn_?this.onConnectionLost_(n):e===this.secondaryConn_?(this.log_("Secondary connection lost."),this.onSecondaryConnectionLost_()):this.log_("closing an old connection")}}connReceiver_(e){return n=>{this.state_!==2&&(e===this.rx_?this.onPrimaryMessageReceived_(n):e===this.secondaryConn_?this.onSecondaryMessageReceived_(n):this.log_("message on old connection"))}}sendRequest(e){const n={t:"d",d:e};this.sendData_(n)}tryCleanupConnection(){this.tx_===this.secondaryConn_&&this.rx_===this.secondaryConn_&&(this.log_("cleaning up and promoting a connection: "+this.secondaryConn_.connId),this.conn_=this.secondaryConn_,this.secondaryConn_=null)}onSecondaryControl_(e){if(Ql in e){const n=e[Ql];n===zh?this.upgradeIfSecondaryHealthy_():n===Mh?(this.log_("Got a reset on secondary, closing it"),this.secondaryConn_.close(),(this.tx_===this.secondaryConn_||this.rx_===this.secondaryConn_)&&this.close()):n===Fh&&(this.log_("got pong on secondary."),this.secondaryResponsesRequired_--,this.upgradeIfSecondaryHealthy_())}}onSecondaryMessageReceived_(e){const n=qr("t",e),r=qr("d",e);if(n==="c")this.onSecondaryControl_(r);else if(n==="d")this.pendingDataMessages.push(r);else throw new Error("Unknown protocol layer: "+n)}upgradeIfSecondaryHealthy_(){this.secondaryResponsesRequired_<=0?(this.log_("Secondary connection is healthy."),this.isHealthy_=!0,this.secondaryConn_.markConnectionHealthy(),this.proceedWithUpgrade_()):(this.log_("sending ping on secondary."),this.secondaryConn_.send({t:"c",d:{t:Bh,d:{}}}))}proceedWithUpgrade_(){this.secondaryConn_.start(),this.log_("sending client ack on secondary"),this.secondaryConn_.send({t:"c",d:{t:zh,d:{}}}),this.log_("Ending transmission on primary"),this.conn_.send({t:"c",d:{t:Uh,d:{}}}),this.tx_=this.secondaryConn_,this.tryCleanupConnection()}onPrimaryMessageReceived_(e){const n=qr("t",e),r=qr("d",e);n==="c"?this.onControl_(r):n==="d"&&this.onDataMessage_(r)}onDataMessage_(e){this.onPrimaryResponse_(),this.onMessage_(e)}onPrimaryResponse_(){this.isHealthy_||(this.primaryResponsesRequired_--,this.primaryResponsesRequired_<=0&&(this.log_("Primary connection is healthy."),this.isHealthy_=!0,this.conn_.markConnectionHealthy()))}onControl_(e){const n=qr(Ql,e);if(Lh in e){const r=e[Lh];if(n===bC){const i=Object.assign({},r);this.repoInfo_.isUsingEmulator&&(i.h=this.repoInfo_.host),this.onHandshake_(i)}else if(n===Uh){this.log_("recvd end transmission on primary"),this.rx_=this.secondaryConn_;for(let i=0;i<this.pendingDataMessages.length;++i)this.onDataMessage_(this.pendingDataMessages[i]);this.pendingDataMessages=[],this.tryCleanupConnection()}else n===RC?this.onConnectionShutdown_(r):n===Mh?this.onReset_(r):n===jC?ru("Server Error: "+r):n===Fh?(this.log_("got pong on primary."),this.onPrimaryResponse_(),this.sendPingOnPrimaryIfNecessary_()):ru("Unknown control packet command: "+n)}}onHandshake_(e){const n=e.ts,r=e.v,i=e.h;this.sessionId=e.s,this.repoInfo_.host=i,this.state_===0&&(this.conn_.start(),this.onConnectionEstablished_(this.conn_,n),Cc!==r&&be("Protocol version mismatch detected"),this.tryStartUpgrade_())}tryStartUpgrade_(){const e=this.transportManager_.upgradeTransport();e&&this.startUpgrade_(e)}startUpgrade_(e){this.secondaryConn_=new e(this.nextTransportId_(),this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,this.sessionId),this.secondaryResponsesRequired_=e.responsesRequiredToBeHealthy||0;const n=this.connReceiver_(this.secondaryConn_),r=this.disconnReceiver_(this.secondaryConn_);this.secondaryConn_.open(n,r),fi(()=>{this.secondaryConn_&&(this.log_("Timed out trying to upgrade."),this.secondaryConn_.close())},Math.floor(kC))}onReset_(e){this.log_("Reset packet received.  New host: "+e),this.repoInfo_.host=e,this.state_===1?this.close():(this.closeConnections_(),this.start_())}onConnectionEstablished_(e,n){this.log_("Realtime connection established."),this.conn_=e,this.state_=1,this.onReady_&&(this.onReady_(n,this.sessionId),this.onReady_=null),this.primaryResponsesRequired_===0?(this.log_("Primary connection is healthy."),this.isHealthy_=!0):fi(()=>{this.sendPingOnPrimaryIfNecessary_()},Math.floor(IC))}sendPingOnPrimaryIfNecessary_(){!this.isHealthy_&&this.state_===1&&(this.log_("sending ping on primary."),this.sendData_({t:"c",d:{t:Bh,d:{}}}))}onSecondaryConnectionLost_(){const e=this.secondaryConn_;this.secondaryConn_=null,(this.tx_===e||this.rx_===e)&&this.close()}onConnectionLost_(e){this.conn_=null,!e&&this.state_===0?(this.log_("Realtime connection failed."),this.repoInfo_.isCacheableHost()&&(Tn.remove("host:"+this.repoInfo_.host),this.repoInfo_.internalHost=this.repoInfo_.host)):this.state_===1&&this.log_("Realtime connection lost."),this.close()}onConnectionShutdown_(e){this.log_("Connection shutdown command received. Shutting down..."),this.onKill_&&(this.onKill_(e),this.onKill_=null),this.onDisconnect_=null,this.close()}sendData_(e){if(this.state_!==1)throw"Connection is not connected";this.tx_.send(e)}close(){this.state_!==2&&(this.log_("Closing realtime connection."),this.state_=2,this.closeConnections_(),this.onDisconnect_&&(this.onDisconnect_(),this.onDisconnect_=null))}closeConnections_(){this.log_("Shutting down all connections"),this.conn_&&(this.conn_.close(),this.conn_=null),this.secondaryConn_&&(this.secondaryConn_.close(),this.secondaryConn_=null),this.healthyTimeout_&&(clearTimeout(this.healthyTimeout_),this.healthyTimeout_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg{put(e,n,r,i){}merge(e,n,r,i){}refreshAuthToken(e){}refreshAppCheckToken(e){}onDisconnectPut(e,n,r){}onDisconnectMerge(e,n,r){}onDisconnectCancel(e,n){}reportStats(e){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wg{constructor(e){this.allowedEvents_=e,this.listeners_={},N(Array.isArray(e)&&e.length>0,"Requires a non-empty array")}trigger(e,...n){if(Array.isArray(this.listeners_[e])){const r=[...this.listeners_[e]];for(let i=0;i<r.length;i++)r[i].callback.apply(r[i].context,n)}}on(e,n,r){this.validateEventType_(e),this.listeners_[e]=this.listeners_[e]||[],this.listeners_[e].push({callback:n,context:r});const i=this.getInitialEvent(e);i&&n.apply(r,i)}off(e,n,r){this.validateEventType_(e);const i=this.listeners_[e]||[];for(let s=0;s<i.length;s++)if(i[s].callback===n&&(!r||r===i[s].context)){i.splice(s,1);return}}validateEventType_(e){N(this.allowedEvents_.find(n=>n===e),"Unknown event: "+e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Co extends wg{constructor(){super(["online"]),this.online_=!0,typeof window<"u"&&typeof window.addEventListener<"u"&&!Vm()&&(window.addEventListener("online",()=>{this.online_||(this.online_=!0,this.trigger("online",!0))},!1),window.addEventListener("offline",()=>{this.online_&&(this.online_=!1,this.trigger("online",!1))},!1))}static getInstance(){return new Co}getInitialEvent(e){return N(e==="online","Unknown event type: "+e),[this.online_]}currentlyOnline(){return this.online_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wh=32,$h=768;class G{constructor(e,n){if(n===void 0){this.pieces_=e.split("/");let r=0;for(let i=0;i<this.pieces_.length;i++)this.pieces_[i].length>0&&(this.pieces_[r]=this.pieces_[i],r++);this.pieces_.length=r,this.pieceNum_=0}else this.pieces_=e,this.pieceNum_=n}toString(){let e="";for(let n=this.pieceNum_;n<this.pieces_.length;n++)this.pieces_[n]!==""&&(e+="/"+this.pieces_[n]);return e||"/"}}function $(){return new G("")}function M(t){return t.pieceNum_>=t.pieces_.length?null:t.pieces_[t.pieceNum_]}function hn(t){return t.pieces_.length-t.pieceNum_}function Y(t){let e=t.pieceNum_;return e<t.pieces_.length&&e++,new G(t.pieces_,e)}function Nc(t){return t.pieceNum_<t.pieces_.length?t.pieces_[t.pieces_.length-1]:null}function DC(t){let e="";for(let n=t.pieceNum_;n<t.pieces_.length;n++)t.pieces_[n]!==""&&(e+="/"+encodeURIComponent(String(t.pieces_[n])));return e||"/"}function Ui(t,e=0){return t.pieces_.slice(t.pieceNum_+e)}function Cg(t){if(t.pieceNum_>=t.pieces_.length)return null;const e=[];for(let n=t.pieceNum_;n<t.pieces_.length-1;n++)e.push(t.pieces_[n]);return new G(e,0)}function le(t,e){const n=[];for(let r=t.pieceNum_;r<t.pieces_.length;r++)n.push(t.pieces_[r]);if(e instanceof G)for(let r=e.pieceNum_;r<e.pieces_.length;r++)n.push(e.pieces_[r]);else{const r=e.split("/");for(let i=0;i<r.length;i++)r[i].length>0&&n.push(r[i])}return new G(n,0)}function z(t){return t.pieceNum_>=t.pieces_.length}function Re(t,e){const n=M(t),r=M(e);if(n===null)return e;if(n===r)return Re(Y(t),Y(e));throw new Error("INTERNAL ERROR: innerPath ("+e+") is not within outerPath ("+t+")")}function AC(t,e){const n=Ui(t,0),r=Ui(e,0);for(let i=0;i<n.length&&i<r.length;i++){const s=Vn(n[i],r[i]);if(s!==0)return s}return n.length===r.length?0:n.length<r.length?-1:1}function kc(t,e){if(hn(t)!==hn(e))return!1;for(let n=t.pieceNum_,r=e.pieceNum_;n<=t.pieces_.length;n++,r++)if(t.pieces_[n]!==e.pieces_[r])return!1;return!0}function et(t,e){let n=t.pieceNum_,r=e.pieceNum_;if(hn(t)>hn(e))return!1;for(;n<t.pieces_.length;){if(t.pieces_[n]!==e.pieces_[r])return!1;++n,++r}return!0}class LC{constructor(e,n){this.errorPrefix_=n,this.parts_=Ui(e,0),this.byteLength_=Math.max(1,this.parts_.length);for(let r=0;r<this.parts_.length;r++)this.byteLength_+=el(this.parts_[r]);Eg(this)}}function MC(t,e){t.parts_.length>0&&(t.byteLength_+=1),t.parts_.push(e),t.byteLength_+=el(e),Eg(t)}function FC(t){const e=t.parts_.pop();t.byteLength_-=el(e),t.parts_.length>0&&(t.byteLength_-=1)}function Eg(t){if(t.byteLength_>$h)throw new Error(t.errorPrefix_+"has a key path longer than "+$h+" bytes ("+t.byteLength_+").");if(t.parts_.length>Wh)throw new Error(t.errorPrefix_+"path specified exceeds the maximum depth that can be written ("+Wh+") or object contains a cycle "+Sn(t))}function Sn(t){return t.parts_.length===0?"":"in property '"+t.parts_.join(".")+"'"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ic extends wg{constructor(){super(["visible"]);let e,n;typeof document<"u"&&typeof document.addEventListener<"u"&&(typeof document.hidden<"u"?(n="visibilitychange",e="hidden"):typeof document.mozHidden<"u"?(n="mozvisibilitychange",e="mozHidden"):typeof document.msHidden<"u"?(n="msvisibilitychange",e="msHidden"):typeof document.webkitHidden<"u"&&(n="webkitvisibilitychange",e="webkitHidden")),this.visible_=!0,n&&document.addEventListener(n,()=>{const r=!document[e];r!==this.visible_&&(this.visible_=r,this.trigger("visible",r))},!1)}static getInstance(){return new Ic}getInitialEvent(e){return N(e==="visible","Unknown event type: "+e),[this.visible_]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Yr=1e3,zC=60*5*1e3,Vh=30*1e3,UC=1.3,BC=3e4,WC="server_kill",Hh=3;class Pt extends xg{constructor(e,n,r,i,s,o,l,a){if(super(),this.repoInfo_=e,this.applicationId_=n,this.onDataUpdate_=r,this.onConnectStatus_=i,this.onServerInfoUpdate_=s,this.authTokenProvider_=o,this.appCheckTokenProvider_=l,this.authOverride_=a,this.id=Pt.nextPersistentConnectionId_++,this.log_=is("p:"+this.id+":"),this.interruptReasons_={},this.listens=new Map,this.outstandingPuts_=[],this.outstandingGets_=[],this.outstandingPutCount_=0,this.outstandingGetCount_=0,this.onDisconnectRequestQueue_=[],this.connected_=!1,this.reconnectDelay_=Yr,this.maxReconnectDelay_=zC,this.securityDebugCallback_=null,this.lastSessionId=null,this.establishConnectionTimer_=null,this.visible_=!1,this.requestCBHash_={},this.requestNumber_=0,this.realtime_=null,this.authToken_=null,this.appCheckToken_=null,this.forceTokenRefresh_=!1,this.invalidAuthTokenCount_=0,this.invalidAppCheckTokenCount_=0,this.firstConnection_=!0,this.lastConnectionAttemptTime_=null,this.lastConnectionEstablishedTime_=null,a)throw new Error("Auth override specified in options, but not supported on non Node.js platforms");Ic.getInstance().on("visible",this.onVisible_,this),e.host.indexOf("fblocal")===-1&&Co.getInstance().on("online",this.onOnline_,this)}sendRequest(e,n,r){const i=++this.requestNumber_,s={r:i,a:e,b:n};this.log_(pe(s)),N(this.connected_,"sendRequest call when we're not connected not allowed."),this.realtime_.sendRequest(s),r&&(this.requestCBHash_[i]=r)}get(e){this.initConnection_();const n=new ts,i={action:"g",request:{p:e._path.toString(),q:e._queryObject},onComplete:o=>{const l=o.d;o.s==="ok"?n.resolve(l):n.reject(l)}};this.outstandingGets_.push(i),this.outstandingGetCount_++;const s=this.outstandingGets_.length-1;return this.connected_&&this.sendGet_(s),n.promise}listen(e,n,r,i){this.initConnection_();const s=e._queryIdentifier,o=e._path.toString();this.log_("Listen called for "+o+" "+s),this.listens.has(o)||this.listens.set(o,new Map),N(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"listen() called for non-default but complete query"),N(!this.listens.get(o).has(s),"listen() called twice for same path/queryId.");const l={onComplete:i,hashFn:n,query:e,tag:r};this.listens.get(o).set(s,l),this.connected_&&this.sendListen_(l)}sendGet_(e){const n=this.outstandingGets_[e];this.sendRequest("g",n.request,r=>{delete this.outstandingGets_[e],this.outstandingGetCount_--,this.outstandingGetCount_===0&&(this.outstandingGets_=[]),n.onComplete&&n.onComplete(r)})}sendListen_(e){const n=e.query,r=n._path.toString(),i=n._queryIdentifier;this.log_("Listen on "+r+" for "+i);const s={p:r},o="q";e.tag&&(s.q=n._queryObject,s.t=e.tag),s.h=e.hashFn(),this.sendRequest(o,s,l=>{const a=l.d,u=l.s;Pt.warnOnListenWarnings_(a,n),(this.listens.get(r)&&this.listens.get(r).get(i))===e&&(this.log_("listen response",l),u!=="ok"&&this.removeListen_(r,i),e.onComplete&&e.onComplete(u,a))})}static warnOnListenWarnings_(e,n){if(e&&typeof e=="object"&&wt(e,"w")){const r=Sr(e,"w");if(Array.isArray(r)&&~r.indexOf("no_index")){const i='".indexOn": "'+n._queryParams.getIndex().toString()+'"',s=n._path.toString();be(`Using an unspecified index. Your data will be downloaded and filtered on the client. Consider adding ${i} at ${s} to your security rules for better performance.`)}}}refreshAuthToken(e){this.authToken_=e,this.log_("Auth token refreshed"),this.authToken_?this.tryAuth():this.connected_&&this.sendRequest("unauth",{},()=>{}),this.reduceReconnectDelayIfAdminCredential_(e)}reduceReconnectDelayIfAdminCredential_(e){(e&&e.length===40||Px(e))&&(this.log_("Admin auth credential detected.  Reducing max reconnect time."),this.maxReconnectDelay_=Vh)}refreshAppCheckToken(e){this.appCheckToken_=e,this.log_("App check token refreshed"),this.appCheckToken_?this.tryAppCheck():this.connected_&&this.sendRequest("unappeck",{},()=>{})}tryAuth(){if(this.connected_&&this.authToken_){const e=this.authToken_,n=Tx(e)?"auth":"gauth",r={cred:e};this.authOverride_===null?r.noauth=!0:typeof this.authOverride_=="object"&&(r.authvar=this.authOverride_),this.sendRequest(n,r,i=>{const s=i.s,o=i.d||"error";this.authToken_===e&&(s==="ok"?this.invalidAuthTokenCount_=0:this.onAuthRevoked_(s,o))})}}tryAppCheck(){this.connected_&&this.appCheckToken_&&this.sendRequest("appcheck",{token:this.appCheckToken_},e=>{const n=e.s,r=e.d||"error";n==="ok"?this.invalidAppCheckTokenCount_=0:this.onAppCheckRevoked_(n,r)})}unlisten(e,n){const r=e._path.toString(),i=e._queryIdentifier;this.log_("Unlisten called for "+r+" "+i),N(e._queryParams.isDefault()||!e._queryParams.loadsAllData(),"unlisten() called for non-default but complete query"),this.removeListen_(r,i)&&this.connected_&&this.sendUnlisten_(r,i,e._queryObject,n)}sendUnlisten_(e,n,r,i){this.log_("Unlisten on "+e+" for "+n);const s={p:e},o="n";i&&(s.q=r,s.t=i),this.sendRequest(o,s)}onDisconnectPut(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("o",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"o",data:n,onComplete:r})}onDisconnectMerge(e,n,r){this.initConnection_(),this.connected_?this.sendOnDisconnect_("om",e,n,r):this.onDisconnectRequestQueue_.push({pathString:e,action:"om",data:n,onComplete:r})}onDisconnectCancel(e,n){this.initConnection_(),this.connected_?this.sendOnDisconnect_("oc",e,null,n):this.onDisconnectRequestQueue_.push({pathString:e,action:"oc",data:null,onComplete:n})}sendOnDisconnect_(e,n,r,i){const s={p:n,d:r};this.log_("onDisconnect "+e,s),this.sendRequest(e,s,o=>{i&&setTimeout(()=>{i(o.s,o.d)},Math.floor(0))})}put(e,n,r,i){this.putInternal("p",e,n,r,i)}merge(e,n,r,i){this.putInternal("m",e,n,r,i)}putInternal(e,n,r,i,s){this.initConnection_();const o={p:n,d:r};s!==void 0&&(o.h=s),this.outstandingPuts_.push({action:e,request:o,onComplete:i}),this.outstandingPutCount_++;const l=this.outstandingPuts_.length-1;this.connected_?this.sendPut_(l):this.log_("Buffering put: "+n)}sendPut_(e){const n=this.outstandingPuts_[e].action,r=this.outstandingPuts_[e].request,i=this.outstandingPuts_[e].onComplete;this.outstandingPuts_[e].queued=this.connected_,this.sendRequest(n,r,s=>{this.log_(n+" response",s),delete this.outstandingPuts_[e],this.outstandingPutCount_--,this.outstandingPutCount_===0&&(this.outstandingPuts_=[]),i&&i(s.s,s.d)})}reportStats(e){if(this.connected_){const n={c:e};this.log_("reportStats",n),this.sendRequest("s",n,r=>{if(r.s!=="ok"){const s=r.d;this.log_("reportStats","Error sending stats: "+s)}})}}onDataMessage_(e){if("r"in e){this.log_("from server: "+pe(e));const n=e.r,r=this.requestCBHash_[n];r&&(delete this.requestCBHash_[n],r(e.b))}else{if("error"in e)throw"A server-side error has occurred: "+e.error;"a"in e&&this.onDataPush_(e.a,e.b)}}onDataPush_(e,n){this.log_("handleServerMessage",e,n),e==="d"?this.onDataUpdate_(n.p,n.d,!1,n.t):e==="m"?this.onDataUpdate_(n.p,n.d,!0,n.t):e==="c"?this.onListenRevoked_(n.p,n.q):e==="ac"?this.onAuthRevoked_(n.s,n.d):e==="apc"?this.onAppCheckRevoked_(n.s,n.d):e==="sd"?this.onSecurityDebugPacket_(n):ru("Unrecognized action received from server: "+pe(e)+`
Are you using the latest client?`)}onReady_(e,n){this.log_("connection ready"),this.connected_=!0,this.lastConnectionEstablishedTime_=new Date().getTime(),this.handleTimestamp_(e),this.lastSessionId=n,this.firstConnection_&&this.sendConnectStats_(),this.restoreState_(),this.firstConnection_=!1,this.onConnectStatus_(!0)}scheduleConnect_(e){N(!this.realtime_,"Scheduling a connect when we're already connected/ing?"),this.establishConnectionTimer_&&clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=setTimeout(()=>{this.establishConnectionTimer_=null,this.establishConnection_()},Math.floor(e))}initConnection_(){!this.realtime_&&this.firstConnection_&&this.scheduleConnect_(0)}onVisible_(e){e&&!this.visible_&&this.reconnectDelay_===this.maxReconnectDelay_&&(this.log_("Window became visible.  Reducing delay."),this.reconnectDelay_=Yr,this.realtime_||this.scheduleConnect_(0)),this.visible_=e}onOnline_(e){e?(this.log_("Browser went online."),this.reconnectDelay_=Yr,this.realtime_||this.scheduleConnect_(0)):(this.log_("Browser went offline.  Killing connection."),this.realtime_&&this.realtime_.close())}onRealtimeDisconnect_(){if(this.log_("data client disconnected"),this.connected_=!1,this.realtime_=null,this.cancelSentTransactions_(),this.requestCBHash_={},this.shouldReconnect_()){this.visible_?this.lastConnectionEstablishedTime_&&(new Date().getTime()-this.lastConnectionEstablishedTime_>BC&&(this.reconnectDelay_=Yr),this.lastConnectionEstablishedTime_=null):(this.log_("Window isn't visible.  Delaying reconnect."),this.reconnectDelay_=this.maxReconnectDelay_,this.lastConnectionAttemptTime_=new Date().getTime());const e=new Date().getTime()-this.lastConnectionAttemptTime_;let n=Math.max(0,this.reconnectDelay_-e);n=Math.random()*n,this.log_("Trying to reconnect in "+n+"ms"),this.scheduleConnect_(n),this.reconnectDelay_=Math.min(this.maxReconnectDelay_,this.reconnectDelay_*UC)}this.onConnectStatus_(!1)}async establishConnection_(){if(this.shouldReconnect_()){this.log_("Making a connection attempt"),this.lastConnectionAttemptTime_=new Date().getTime(),this.lastConnectionEstablishedTime_=null;const e=this.onDataMessage_.bind(this),n=this.onReady_.bind(this),r=this.onRealtimeDisconnect_.bind(this),i=this.id+":"+Pt.nextConnectionId_++,s=this.lastSessionId;let o=!1,l=null;const a=function(){l?l.close():(o=!0,r())},u=function(d){N(l,"sendRequest call when we're not connected not allowed."),l.sendRequest(d)};this.realtime_={close:a,sendRequest:u};const h=this.forceTokenRefresh_;this.forceTokenRefresh_=!1;try{const[d,f]=await Promise.all([this.authTokenProvider_.getToken(h),this.appCheckTokenProvider_.getToken(h)]);o?we("getToken() completed but was canceled"):(we("getToken() completed. Creating connection."),this.authToken_=d&&d.accessToken,this.appCheckToken_=f&&f.token,l=new OC(i,this.repoInfo_,this.applicationId_,this.appCheckToken_,this.authToken_,e,n,r,v=>{be(v+" ("+this.repoInfo_.toString()+")"),this.interrupt(WC)},s))}catch(d){this.log_("Failed to get token: "+d),o||(this.repoInfo_.nodeAdmin&&be(d),a())}}}interrupt(e){we("Interrupting connection for reason: "+e),this.interruptReasons_[e]=!0,this.realtime_?this.realtime_.close():(this.establishConnectionTimer_&&(clearTimeout(this.establishConnectionTimer_),this.establishConnectionTimer_=null),this.connected_&&this.onRealtimeDisconnect_())}resume(e){we("Resuming connection for reason: "+e),delete this.interruptReasons_[e],xh(this.interruptReasons_)&&(this.reconnectDelay_=Yr,this.realtime_||this.scheduleConnect_(0))}handleTimestamp_(e){const n=e-new Date().getTime();this.onServerInfoUpdate_({serverTimeOffset:n})}cancelSentTransactions_(){for(let e=0;e<this.outstandingPuts_.length;e++){const n=this.outstandingPuts_[e];n&&"h"in n.request&&n.queued&&(n.onComplete&&n.onComplete("disconnect"),delete this.outstandingPuts_[e],this.outstandingPutCount_--)}this.outstandingPutCount_===0&&(this.outstandingPuts_=[])}onListenRevoked_(e,n){let r;n?r=n.map(s=>wc(s)).join("$"):r="default";const i=this.removeListen_(e,r);i&&i.onComplete&&i.onComplete("permission_denied")}removeListen_(e,n){const r=new G(e).toString();let i;if(this.listens.has(r)){const s=this.listens.get(r);i=s.get(n),s.delete(n),s.size===0&&this.listens.delete(r)}else i=void 0;return i}onAuthRevoked_(e,n){we("Auth token revoked: "+e+"/"+n),this.authToken_=null,this.forceTokenRefresh_=!0,this.realtime_.close(),(e==="invalid_token"||e==="permission_denied")&&(this.invalidAuthTokenCount_++,this.invalidAuthTokenCount_>=Hh&&(this.reconnectDelay_=Vh,this.authTokenProvider_.notifyForInvalidToken()))}onAppCheckRevoked_(e,n){we("App check token revoked: "+e+"/"+n),this.appCheckToken_=null,this.forceTokenRefresh_=!0,(e==="invalid_token"||e==="permission_denied")&&(this.invalidAppCheckTokenCount_++,this.invalidAppCheckTokenCount_>=Hh&&this.appCheckTokenProvider_.notifyForInvalidToken())}onSecurityDebugPacket_(e){this.securityDebugCallback_?this.securityDebugCallback_(e):"msg"in e&&console.log("FIREBASE: "+e.msg.replace(`
`,`
FIREBASE: `))}restoreState_(){this.tryAuth(),this.tryAppCheck();for(const e of this.listens.values())for(const n of e.values())this.sendListen_(n);for(let e=0;e<this.outstandingPuts_.length;e++)this.outstandingPuts_[e]&&this.sendPut_(e);for(;this.onDisconnectRequestQueue_.length;){const e=this.onDisconnectRequestQueue_.shift();this.sendOnDisconnect_(e.action,e.pathString,e.data,e.onComplete)}for(let e=0;e<this.outstandingGets_.length;e++)this.outstandingGets_[e]&&this.sendGet_(e)}sendConnectStats_(){const e={};let n="js";e["sdk."+n+"."+Zm.replace(/\./g,"-")]=1,Vm()?e["framework.cordova"]=1:wx()&&(e["framework.reactnative"]=1),this.reportStats(e)}shouldReconnect_(){const e=Co.getInstance().currentlyOnline();return xh(this.interruptReasons_)&&e}}Pt.nextPersistentConnectionId_=0;Pt.nextConnectionId_=0;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F{constructor(e,n){this.name=e,this.node=n}static Wrap(e,n){return new F(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tl{getCompare(){return this.compare.bind(this)}indexedValueChanged(e,n){const r=new F(Nr,e),i=new F(Nr,n);return this.compare(r,i)!==0}minPost(){return F.MIN}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rs;class Sg extends tl{static get __EMPTY_NODE(){return Rs}static set __EMPTY_NODE(e){Rs=e}compare(e,n){return Vn(e.name,n.name)}isDefinedOn(e){throw Dr("KeyIndex.isDefinedOn not expected to be called.")}indexedValueChanged(e,n){return!1}minPost(){return F.MIN}maxPost(){return new F(Ln,Rs)}makePost(e,n){return N(typeof e=="string","KeyIndex indexValue must always be a string."),new F(e,Rs)}toString(){return".key"}}const gr=new Sg;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class js{constructor(e,n,r,i,s=null){this.isReverse_=i,this.resultGenerator_=s,this.nodeStack_=[];let o=1;for(;!e.isEmpty();)if(e=e,o=n?r(e.key,n):1,i&&(o*=-1),o<0)this.isReverse_?e=e.left:e=e.right;else if(o===0){this.nodeStack_.push(e);break}else this.nodeStack_.push(e),this.isReverse_?e=e.right:e=e.left}getNext(){if(this.nodeStack_.length===0)return null;let e=this.nodeStack_.pop(),n;if(this.resultGenerator_?n=this.resultGenerator_(e.key,e.value):n={key:e.key,value:e.value},this.isReverse_)for(e=e.left;!e.isEmpty();)this.nodeStack_.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack_.push(e),e=e.left;return n}hasNext(){return this.nodeStack_.length>0}peek(){if(this.nodeStack_.length===0)return null;const e=this.nodeStack_[this.nodeStack_.length-1];return this.resultGenerator_?this.resultGenerator_(e.key,e.value):{key:e.key,value:e.value}}}class ye{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ye.RED,this.left=i??Fe.EMPTY_NODE,this.right=s??Fe.EMPTY_NODE}copy(e,n,r,i,s){return new ye(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}count(){return this.left.count()+1+this.right.count()}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||!!e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min_(){return this.left.isEmpty()?this:this.left.min_()}minKey(){return this.min_().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return s<0?i=i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i=i.copy(null,n,null,null,null):i=i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp_()}removeMin_(){if(this.left.isEmpty())return Fe.EMPTY_NODE;let e=this;return!e.left.isRed_()&&!e.left.left.isRed_()&&(e=e.moveRedLeft_()),e=e.copy(null,null,null,e.left.removeMin_(),null),e.fixUp_()}remove(e,n){let r,i;if(r=this,n(e,r.key)<0)!r.left.isEmpty()&&!r.left.isRed_()&&!r.left.left.isRed_()&&(r=r.moveRedLeft_()),r=r.copy(null,null,null,r.left.remove(e,n),null);else{if(r.left.isRed_()&&(r=r.rotateRight_()),!r.right.isEmpty()&&!r.right.isRed_()&&!r.right.left.isRed_()&&(r=r.moveRedRight_()),n(e,r.key)===0){if(r.right.isEmpty())return Fe.EMPTY_NODE;i=r.right.min_(),r=r.copy(i.key,i.value,null,null,r.right.removeMin_())}r=r.copy(null,null,null,null,r.right.remove(e,n))}return r.fixUp_()}isRed_(){return this.color}fixUp_(){let e=this;return e.right.isRed_()&&!e.left.isRed_()&&(e=e.rotateLeft_()),e.left.isRed_()&&e.left.left.isRed_()&&(e=e.rotateRight_()),e.left.isRed_()&&e.right.isRed_()&&(e=e.colorFlip_()),e}moveRedLeft_(){let e=this.colorFlip_();return e.right.left.isRed_()&&(e=e.copy(null,null,null,null,e.right.rotateRight_()),e=e.rotateLeft_(),e=e.colorFlip_()),e}moveRedRight_(){let e=this.colorFlip_();return e.left.left.isRed_()&&(e=e.rotateRight_(),e=e.colorFlip_()),e}rotateLeft_(){const e=this.copy(null,null,ye.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight_(){const e=this.copy(null,null,ye.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip_(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth_(){const e=this.check_();return Math.pow(2,e)<=this.count()+1}check_(){if(this.isRed_()&&this.left.isRed_())throw new Error("Red node has red child("+this.key+","+this.value+")");if(this.right.isRed_())throw new Error("Right child of ("+this.key+","+this.value+") is red");const e=this.left.check_();if(e!==this.right.check_())throw new Error("Black depths differ");return e+(this.isRed_()?0:1)}}ye.RED=!0;ye.BLACK=!1;class $C{copy(e,n,r,i,s){return this}insert(e,n,r){return new ye(e,n,null)}remove(e,n){return this}count(){return 0}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}check_(){return 0}isRed_(){return!1}}class Fe{constructor(e,n=Fe.EMPTY_NODE){this.comparator_=e,this.root_=n}insert(e,n){return new Fe(this.comparator_,this.root_.insert(e,n,this.comparator_).copy(null,null,ye.BLACK,null,null))}remove(e){return new Fe(this.comparator_,this.root_.remove(e,this.comparator_).copy(null,null,ye.BLACK,null,null))}get(e){let n,r=this.root_;for(;!r.isEmpty();){if(n=this.comparator_(e,r.key),n===0)return r.value;n<0?r=r.left:n>0&&(r=r.right)}return null}getPredecessorKey(e){let n,r=this.root_,i=null;for(;!r.isEmpty();)if(n=this.comparator_(e,r.key),n===0){if(r.left.isEmpty())return i?i.key:null;for(r=r.left;!r.right.isEmpty();)r=r.right;return r.key}else n<0?r=r.left:n>0&&(i=r,r=r.right);throw new Error("Attempted to find predecessor key for a nonexistent key.  What gives?")}isEmpty(){return this.root_.isEmpty()}count(){return this.root_.count()}minKey(){return this.root_.minKey()}maxKey(){return this.root_.maxKey()}inorderTraversal(e){return this.root_.inorderTraversal(e)}reverseTraversal(e){return this.root_.reverseTraversal(e)}getIterator(e){return new js(this.root_,null,this.comparator_,!1,e)}getIteratorFrom(e,n){return new js(this.root_,e,this.comparator_,!1,n)}getReverseIteratorFrom(e,n){return new js(this.root_,e,this.comparator_,!0,n)}getReverseIterator(e){return new js(this.root_,null,this.comparator_,!0,e)}}Fe.EMPTY_NODE=new $C;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function VC(t,e){return Vn(t.name,e.name)}function Tc(t,e){return Vn(t,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let su;function HC(t){su=t}const Ng=function(t){return typeof t=="number"?"number:"+rg(t):"string:"+t},kg=function(t){if(t.isLeafNode()){const e=t.val();N(typeof e=="string"||typeof e=="number"||typeof e=="object"&&wt(e,".sv"),"Priority must be a string or number.")}else N(t===su||t.isEmpty(),"priority of unexpected type.");N(t===su||t.getPriority().isEmpty(),"Priority nodes can't have a priority of their own.")};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Qh;class ge{constructor(e,n=ge.__childrenNodeConstructor.EMPTY_NODE){this.value_=e,this.priorityNode_=n,this.lazyHash_=null,N(this.value_!==void 0&&this.value_!==null,"LeafNode shouldn't be created with null/undefined value."),kg(this.priorityNode_)}static set __childrenNodeConstructor(e){Qh=e}static get __childrenNodeConstructor(){return Qh}isLeafNode(){return!0}getPriority(){return this.priorityNode_}updatePriority(e){return new ge(this.value_,e)}getImmediateChild(e){return e===".priority"?this.priorityNode_:ge.__childrenNodeConstructor.EMPTY_NODE}getChild(e){return z(e)?this:M(e)===".priority"?this.priorityNode_:ge.__childrenNodeConstructor.EMPTY_NODE}hasChild(){return!1}getPredecessorChildName(e,n){return null}updateImmediateChild(e,n){return e===".priority"?this.updatePriority(n):n.isEmpty()&&e!==".priority"?this:ge.__childrenNodeConstructor.EMPTY_NODE.updateImmediateChild(e,n).updatePriority(this.priorityNode_)}updateChild(e,n){const r=M(e);return r===null?n:n.isEmpty()&&r!==".priority"?this:(N(r!==".priority"||hn(e)===1,".priority must be the last token in a path"),this.updateImmediateChild(r,ge.__childrenNodeConstructor.EMPTY_NODE.updateChild(Y(e),n)))}isEmpty(){return!1}numChildren(){return 0}forEachChild(e,n){return!1}val(e){return e&&!this.getPriority().isEmpty()?{".value":this.getValue(),".priority":this.getPriority().val()}:this.getValue()}hash(){if(this.lazyHash_===null){let e="";this.priorityNode_.isEmpty()||(e+="priority:"+Ng(this.priorityNode_.val())+":");const n=typeof this.value_;e+=n+":",n==="number"?e+=rg(this.value_):e+=this.value_,this.lazyHash_=tg(e)}return this.lazyHash_}getValue(){return this.value_}compareTo(e){return e===ge.__childrenNodeConstructor.EMPTY_NODE?1:e instanceof ge.__childrenNodeConstructor?-1:(N(e.isLeafNode(),"Unknown node type"),this.compareToLeafNode_(e))}compareToLeafNode_(e){const n=typeof e.value_,r=typeof this.value_,i=ge.VALUE_TYPE_ORDER.indexOf(n),s=ge.VALUE_TYPE_ORDER.indexOf(r);return N(i>=0,"Unknown leaf type: "+n),N(s>=0,"Unknown leaf type: "+r),i===s?r==="object"?0:this.value_<e.value_?-1:this.value_===e.value_?0:1:s-i}withIndex(){return this}isIndexed(){return!0}equals(e){if(e===this)return!0;if(e.isLeafNode()){const n=e;return this.value_===n.value_&&this.priorityNode_.equals(n.priorityNode_)}else return!1}}ge.VALUE_TYPE_ORDER=["object","boolean","number","string"];/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ig,Tg;function QC(t){Ig=t}function GC(t){Tg=t}class KC extends tl{compare(e,n){const r=e.node.getPriority(),i=n.node.getPriority(),s=r.compareTo(i);return s===0?Vn(e.name,n.name):s}isDefinedOn(e){return!e.getPriority().isEmpty()}indexedValueChanged(e,n){return!e.getPriority().equals(n.getPriority())}minPost(){return F.MIN}maxPost(){return new F(Ln,new ge("[PRIORITY-POST]",Tg))}makePost(e,n){const r=Ig(e);return new F(n,new ge("[PRIORITY-POST]",r))}toString(){return".priority"}}const ae=new KC;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qC=Math.log(2);class YC{constructor(e){const n=s=>parseInt(Math.log(s)/qC,10),r=s=>parseInt(Array(s+1).join("1"),2);this.count=n(e+1),this.current_=this.count-1;const i=r(this.count);this.bits_=e+1&i}nextBitIsOne(){const e=!(this.bits_&1<<this.current_);return this.current_--,e}}const Eo=function(t,e,n,r){t.sort(e);const i=function(a,u){const h=u-a;let d,f;if(h===0)return null;if(h===1)return d=t[a],f=n?n(d):d,new ye(f,d.node,ye.BLACK,null,null);{const v=parseInt(h/2,10)+a,y=i(a,v),_=i(v+1,u);return d=t[v],f=n?n(d):d,new ye(f,d.node,ye.BLACK,y,_)}},s=function(a){let u=null,h=null,d=t.length;const f=function(y,_){const E=d-y,m=d;d-=y;const p=i(E+1,m),g=t[E],C=n?n(g):g;v(new ye(C,g.node,_,null,p))},v=function(y){u?(u.left=y,u=y):(h=y,u=y)};for(let y=0;y<a.count;++y){const _=a.nextBitIsOne(),E=Math.pow(2,a.count-(y+1));_?f(E,ye.BLACK):(f(E,ye.BLACK),f(E,ye.RED))}return h},o=new YC(t.length),l=s(o);return new Fe(r||e,l)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Gl;const Gn={};class kt{constructor(e,n){this.indexes_=e,this.indexSet_=n}static get Default(){return N(Gn&&ae,"ChildrenNode.ts has not been loaded"),Gl=Gl||new kt({".priority":Gn},{".priority":ae}),Gl}get(e){const n=Sr(this.indexes_,e);if(!n)throw new Error("No index defined for "+e);return n instanceof Fe?n:null}hasIndex(e){return wt(this.indexSet_,e.toString())}addIndex(e,n){N(e!==gr,"KeyIndex always exists and isn't meant to be added to the IndexMap.");const r=[];let i=!1;const s=n.getIterator(F.Wrap);let o=s.getNext();for(;o;)i=i||e.isDefinedOn(o.node),r.push(o),o=s.getNext();let l;i?l=Eo(r,e.getCompare()):l=Gn;const a=e.toString(),u=Object.assign({},this.indexSet_);u[a]=e;const h=Object.assign({},this.indexes_);return h[a]=l,new kt(h,u)}addToIndexes(e,n){const r=yo(this.indexes_,(i,s)=>{const o=Sr(this.indexSet_,s);if(N(o,"Missing index implementation for "+s),i===Gn)if(o.isDefinedOn(e.node)){const l=[],a=n.getIterator(F.Wrap);let u=a.getNext();for(;u;)u.name!==e.name&&l.push(u),u=a.getNext();return l.push(e),Eo(l,o.getCompare())}else return Gn;else{const l=n.get(e.name);let a=i;return l&&(a=a.remove(new F(e.name,l))),a.insert(e,e.node)}});return new kt(r,this.indexSet_)}removeFromIndexes(e,n){const r=yo(this.indexes_,i=>{if(i===Gn)return i;{const s=n.get(e.name);return s?i.remove(new F(e.name,s)):i}});return new kt(r,this.indexSet_)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Xr;class O{constructor(e,n,r){this.children_=e,this.priorityNode_=n,this.indexMap_=r,this.lazyHash_=null,this.priorityNode_&&kg(this.priorityNode_),this.children_.isEmpty()&&N(!this.priorityNode_||this.priorityNode_.isEmpty(),"An empty node cannot have a priority")}static get EMPTY_NODE(){return Xr||(Xr=new O(new Fe(Tc),null,kt.Default))}isLeafNode(){return!1}getPriority(){return this.priorityNode_||Xr}updatePriority(e){return this.children_.isEmpty()?this:new O(this.children_,e,this.indexMap_)}getImmediateChild(e){if(e===".priority")return this.getPriority();{const n=this.children_.get(e);return n===null?Xr:n}}getChild(e){const n=M(e);return n===null?this:this.getImmediateChild(n).getChild(Y(e))}hasChild(e){return this.children_.get(e)!==null}updateImmediateChild(e,n){if(N(n,"We should always be passing snapshot nodes"),e===".priority")return this.updatePriority(n);{const r=new F(e,n);let i,s;n.isEmpty()?(i=this.children_.remove(e),s=this.indexMap_.removeFromIndexes(r,this.children_)):(i=this.children_.insert(e,n),s=this.indexMap_.addToIndexes(r,this.children_));const o=i.isEmpty()?Xr:this.priorityNode_;return new O(i,o,s)}}updateChild(e,n){const r=M(e);if(r===null)return n;{N(M(e)!==".priority"||hn(e)===1,".priority must be the last token in a path");const i=this.getImmediateChild(r).updateChild(Y(e),n);return this.updateImmediateChild(r,i)}}isEmpty(){return this.children_.isEmpty()}numChildren(){return this.children_.count()}val(e){if(this.isEmpty())return null;const n={};let r=0,i=0,s=!0;if(this.forEachChild(ae,(o,l)=>{n[o]=l.val(e),r++,s&&O.INTEGER_REGEXP_.test(o)?i=Math.max(i,Number(o)):s=!1}),!e&&s&&i<2*r){const o=[];for(const l in n)o[l]=n[l];return o}else return e&&!this.getPriority().isEmpty()&&(n[".priority"]=this.getPriority().val()),n}hash(){if(this.lazyHash_===null){let e="";this.getPriority().isEmpty()||(e+="priority:"+Ng(this.getPriority().val())+":"),this.forEachChild(ae,(n,r)=>{const i=r.hash();i!==""&&(e+=":"+n+":"+i)}),this.lazyHash_=e===""?"":tg(e)}return this.lazyHash_}getPredecessorChildName(e,n,r){const i=this.resolveIndex_(r);if(i){const s=i.getPredecessorKey(new F(e,n));return s?s.name:null}else return this.children_.getPredecessorKey(e)}getFirstChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.minKey();return r&&r.name}else return this.children_.minKey()}getFirstChild(e){const n=this.getFirstChildName(e);return n?new F(n,this.children_.get(n)):null}getLastChildName(e){const n=this.resolveIndex_(e);if(n){const r=n.maxKey();return r&&r.name}else return this.children_.maxKey()}getLastChild(e){const n=this.getLastChildName(e);return n?new F(n,this.children_.get(n)):null}forEachChild(e,n){const r=this.resolveIndex_(e);return r?r.inorderTraversal(i=>n(i.name,i.node)):this.children_.inorderTraversal(n)}getIterator(e){return this.getIteratorFrom(e.minPost(),e)}getIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getIteratorFrom(e,i=>i);{const i=this.children_.getIteratorFrom(e.name,F.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)<0;)i.getNext(),s=i.peek();return i}}getReverseIterator(e){return this.getReverseIteratorFrom(e.maxPost(),e)}getReverseIteratorFrom(e,n){const r=this.resolveIndex_(n);if(r)return r.getReverseIteratorFrom(e,i=>i);{const i=this.children_.getReverseIteratorFrom(e.name,F.Wrap);let s=i.peek();for(;s!=null&&n.compare(s,e)>0;)i.getNext(),s=i.peek();return i}}compareTo(e){return this.isEmpty()?e.isEmpty()?0:-1:e.isLeafNode()||e.isEmpty()?1:e===ss?-1:0}withIndex(e){if(e===gr||this.indexMap_.hasIndex(e))return this;{const n=this.indexMap_.addIndex(e,this.children_);return new O(this.children_,this.priorityNode_,n)}}isIndexed(e){return e===gr||this.indexMap_.hasIndex(e)}equals(e){if(e===this)return!0;if(e.isLeafNode())return!1;{const n=e;if(this.getPriority().equals(n.getPriority()))if(this.children_.count()===n.children_.count()){const r=this.getIterator(ae),i=n.getIterator(ae);let s=r.getNext(),o=i.getNext();for(;s&&o;){if(s.name!==o.name||!s.node.equals(o.node))return!1;s=r.getNext(),o=i.getNext()}return s===null&&o===null}else return!1;else return!1}}resolveIndex_(e){return e===gr?null:this.indexMap_.get(e.toString())}}O.INTEGER_REGEXP_=/^(0|[1-9]\d*)$/;class XC extends O{constructor(){super(new Fe(Tc),O.EMPTY_NODE,kt.Default)}compareTo(e){return e===this?0:1}equals(e){return e===this}getPriority(){return this}getImmediateChild(e){return O.EMPTY_NODE}isEmpty(){return!1}}const ss=new XC;Object.defineProperties(F,{MIN:{value:new F(Nr,O.EMPTY_NODE)},MAX:{value:new F(Ln,ss)}});Sg.__EMPTY_NODE=O.EMPTY_NODE;ge.__childrenNodeConstructor=O;HC(ss);GC(ss);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const JC=!0;function fe(t,e=null){if(t===null)return O.EMPTY_NODE;if(typeof t=="object"&&".priority"in t&&(e=t[".priority"]),N(e===null||typeof e=="string"||typeof e=="number"||typeof e=="object"&&".sv"in e,"Invalid priority type found: "+typeof e),typeof t=="object"&&".value"in t&&t[".value"]!==null&&(t=t[".value"]),typeof t!="object"||".sv"in t){const n=t;return new ge(n,fe(e))}if(!(t instanceof Array)&&JC){const n=[];let r=!1;if(Se(t,(o,l)=>{if(o.substring(0,1)!=="."){const a=fe(l);a.isEmpty()||(r=r||!a.getPriority().isEmpty(),n.push(new F(o,a)))}}),n.length===0)return O.EMPTY_NODE;const s=Eo(n,VC,o=>o.name,Tc);if(r){const o=Eo(n,ae.getCompare());return new O(s,fe(e),new kt({".priority":o},{".priority":ae}))}else return new O(s,fe(e),kt.Default)}else{let n=O.EMPTY_NODE;return Se(t,(r,i)=>{if(wt(t,r)&&r.substring(0,1)!=="."){const s=fe(i);(s.isLeafNode()||!s.isEmpty())&&(n=n.updateImmediateChild(r,s))}}),n.updatePriority(fe(e))}}QC(fe);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZC extends tl{constructor(e){super(),this.indexPath_=e,N(!z(e)&&M(e)!==".priority","Can't create PathIndex with empty path or .priority key")}extractChild(e){return e.getChild(this.indexPath_)}isDefinedOn(e){return!e.getChild(this.indexPath_).isEmpty()}compare(e,n){const r=this.extractChild(e.node),i=this.extractChild(n.node),s=r.compareTo(i);return s===0?Vn(e.name,n.name):s}makePost(e,n){const r=fe(e),i=O.EMPTY_NODE.updateChild(this.indexPath_,r);return new F(n,i)}maxPost(){const e=O.EMPTY_NODE.updateChild(this.indexPath_,ss);return new F(Ln,e)}toString(){return Ui(this.indexPath_,0).join("/")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class e1 extends tl{compare(e,n){const r=e.node.compareTo(n.node);return r===0?Vn(e.name,n.name):r}isDefinedOn(e){return!0}indexedValueChanged(e,n){return!e.equals(n)}minPost(){return F.MIN}maxPost(){return F.MAX}makePost(e,n){const r=fe(e);return new F(n,r)}toString(){return".value"}}const t1=new e1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pg(t){return{type:"value",snapshotNode:t}}function kr(t,e){return{type:"child_added",snapshotNode:e,childName:t}}function Bi(t,e){return{type:"child_removed",snapshotNode:e,childName:t}}function Wi(t,e,n){return{type:"child_changed",snapshotNode:e,childName:t,oldSnap:n}}function n1(t,e){return{type:"child_moved",snapshotNode:e,childName:t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pc{constructor(e){this.index_=e}updateChild(e,n,r,i,s,o){N(e.isIndexed(this.index_),"A node must be indexed if only a child is updated");const l=e.getImmediateChild(n);return l.getChild(i).equals(r.getChild(i))&&l.isEmpty()===r.isEmpty()||(o!=null&&(r.isEmpty()?e.hasChild(n)?o.trackChildChange(Bi(n,l)):N(e.isLeafNode(),"A child remove without an old child only makes sense on a leaf node"):l.isEmpty()?o.trackChildChange(kr(n,r)):o.trackChildChange(Wi(n,r,l))),e.isLeafNode()&&r.isEmpty())?e:e.updateImmediateChild(n,r).withIndex(this.index_)}updateFullNode(e,n,r){return r!=null&&(e.isLeafNode()||e.forEachChild(ae,(i,s)=>{n.hasChild(i)||r.trackChildChange(Bi(i,s))}),n.isLeafNode()||n.forEachChild(ae,(i,s)=>{if(e.hasChild(i)){const o=e.getImmediateChild(i);o.equals(s)||r.trackChildChange(Wi(i,s,o))}else r.trackChildChange(kr(i,s))})),n.withIndex(this.index_)}updatePriority(e,n){return e.isEmpty()?O.EMPTY_NODE:e.updatePriority(n)}filtersNodes(){return!1}getIndexedFilter(){return this}getIndex(){return this.index_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $i{constructor(e){this.indexedFilter_=new Pc(e.getIndex()),this.index_=e.getIndex(),this.startPost_=$i.getStartPost_(e),this.endPost_=$i.getEndPost_(e),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}getStartPost(){return this.startPost_}getEndPost(){return this.endPost_}matches(e){const n=this.startIsInclusive_?this.index_.compare(this.getStartPost(),e)<=0:this.index_.compare(this.getStartPost(),e)<0,r=this.endIsInclusive_?this.index_.compare(e,this.getEndPost())<=0:this.index_.compare(e,this.getEndPost())<0;return n&&r}updateChild(e,n,r,i,s,o){return this.matches(new F(n,r))||(r=O.EMPTY_NODE),this.indexedFilter_.updateChild(e,n,r,i,s,o)}updateFullNode(e,n,r){n.isLeafNode()&&(n=O.EMPTY_NODE);let i=n.withIndex(this.index_);i=i.updatePriority(O.EMPTY_NODE);const s=this;return n.forEachChild(ae,(o,l)=>{s.matches(new F(o,l))||(i=i.updateImmediateChild(o,O.EMPTY_NODE))}),this.indexedFilter_.updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.indexedFilter_}getIndex(){return this.index_}static getStartPost_(e){if(e.hasStart()){const n=e.getIndexStartName();return e.getIndex().makePost(e.getIndexStartValue(),n)}else return e.getIndex().minPost()}static getEndPost_(e){if(e.hasEnd()){const n=e.getIndexEndName();return e.getIndex().makePost(e.getIndexEndValue(),n)}else return e.getIndex().maxPost()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r1{constructor(e){this.withinDirectionalStart=n=>this.reverse_?this.withinEndPost(n):this.withinStartPost(n),this.withinDirectionalEnd=n=>this.reverse_?this.withinStartPost(n):this.withinEndPost(n),this.withinStartPost=n=>{const r=this.index_.compare(this.rangedFilter_.getStartPost(),n);return this.startIsInclusive_?r<=0:r<0},this.withinEndPost=n=>{const r=this.index_.compare(n,this.rangedFilter_.getEndPost());return this.endIsInclusive_?r<=0:r<0},this.rangedFilter_=new $i(e),this.index_=e.getIndex(),this.limit_=e.getLimit(),this.reverse_=!e.isViewFromLeft(),this.startIsInclusive_=!e.startAfterSet_,this.endIsInclusive_=!e.endBeforeSet_}updateChild(e,n,r,i,s,o){return this.rangedFilter_.matches(new F(n,r))||(r=O.EMPTY_NODE),e.getImmediateChild(n).equals(r)?e:e.numChildren()<this.limit_?this.rangedFilter_.getIndexedFilter().updateChild(e,n,r,i,s,o):this.fullLimitUpdateChild_(e,n,r,s,o)}updateFullNode(e,n,r){let i;if(n.isLeafNode()||n.isEmpty())i=O.EMPTY_NODE.withIndex(this.index_);else if(this.limit_*2<n.numChildren()&&n.isIndexed(this.index_)){i=O.EMPTY_NODE.withIndex(this.index_);let s;this.reverse_?s=n.getReverseIteratorFrom(this.rangedFilter_.getEndPost(),this.index_):s=n.getIteratorFrom(this.rangedFilter_.getStartPost(),this.index_);let o=0;for(;s.hasNext()&&o<this.limit_;){const l=s.getNext();if(this.withinDirectionalStart(l))if(this.withinDirectionalEnd(l))i=i.updateImmediateChild(l.name,l.node),o++;else break;else continue}}else{i=n.withIndex(this.index_),i=i.updatePriority(O.EMPTY_NODE);let s;this.reverse_?s=i.getReverseIterator(this.index_):s=i.getIterator(this.index_);let o=0;for(;s.hasNext();){const l=s.getNext();o<this.limit_&&this.withinDirectionalStart(l)&&this.withinDirectionalEnd(l)?o++:i=i.updateImmediateChild(l.name,O.EMPTY_NODE)}}return this.rangedFilter_.getIndexedFilter().updateFullNode(e,i,r)}updatePriority(e,n){return e}filtersNodes(){return!0}getIndexedFilter(){return this.rangedFilter_.getIndexedFilter()}getIndex(){return this.index_}fullLimitUpdateChild_(e,n,r,i,s){let o;if(this.reverse_){const d=this.index_.getCompare();o=(f,v)=>d(v,f)}else o=this.index_.getCompare();const l=e;N(l.numChildren()===this.limit_,"");const a=new F(n,r),u=this.reverse_?l.getFirstChild(this.index_):l.getLastChild(this.index_),h=this.rangedFilter_.matches(a);if(l.hasChild(n)){const d=l.getImmediateChild(n);let f=i.getChildAfterChild(this.index_,u,this.reverse_);for(;f!=null&&(f.name===n||l.hasChild(f.name));)f=i.getChildAfterChild(this.index_,f,this.reverse_);const v=f==null?1:o(f,a);if(h&&!r.isEmpty()&&v>=0)return s!=null&&s.trackChildChange(Wi(n,r,d)),l.updateImmediateChild(n,r);{s!=null&&s.trackChildChange(Bi(n,d));const _=l.updateImmediateChild(n,O.EMPTY_NODE);return f!=null&&this.rangedFilter_.matches(f)?(s!=null&&s.trackChildChange(kr(f.name,f.node)),_.updateImmediateChild(f.name,f.node)):_}}else return r.isEmpty()?e:h&&o(u,a)>=0?(s!=null&&(s.trackChildChange(Bi(u.name,u.node)),s.trackChildChange(kr(n,r))),l.updateImmediateChild(n,r).updateImmediateChild(u.name,O.EMPTY_NODE)):e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rc{constructor(){this.limitSet_=!1,this.startSet_=!1,this.startNameSet_=!1,this.startAfterSet_=!1,this.endSet_=!1,this.endNameSet_=!1,this.endBeforeSet_=!1,this.limit_=0,this.viewFrom_="",this.indexStartValue_=null,this.indexStartName_="",this.indexEndValue_=null,this.indexEndName_="",this.index_=ae}hasStart(){return this.startSet_}isViewFromLeft(){return this.viewFrom_===""?this.startSet_:this.viewFrom_==="l"}getIndexStartValue(){return N(this.startSet_,"Only valid if start has been set"),this.indexStartValue_}getIndexStartName(){return N(this.startSet_,"Only valid if start has been set"),this.startNameSet_?this.indexStartName_:Nr}hasEnd(){return this.endSet_}getIndexEndValue(){return N(this.endSet_,"Only valid if end has been set"),this.indexEndValue_}getIndexEndName(){return N(this.endSet_,"Only valid if end has been set"),this.endNameSet_?this.indexEndName_:Ln}hasLimit(){return this.limitSet_}hasAnchoredLimit(){return this.limitSet_&&this.viewFrom_!==""}getLimit(){return N(this.limitSet_,"Only valid if limit has been set"),this.limit_}getIndex(){return this.index_}loadsAllData(){return!(this.startSet_||this.endSet_||this.limitSet_)}isDefault(){return this.loadsAllData()&&this.index_===ae}copy(){const e=new Rc;return e.limitSet_=this.limitSet_,e.limit_=this.limit_,e.startSet_=this.startSet_,e.startAfterSet_=this.startAfterSet_,e.indexStartValue_=this.indexStartValue_,e.startNameSet_=this.startNameSet_,e.indexStartName_=this.indexStartName_,e.endSet_=this.endSet_,e.endBeforeSet_=this.endBeforeSet_,e.indexEndValue_=this.indexEndValue_,e.endNameSet_=this.endNameSet_,e.indexEndName_=this.indexEndName_,e.index_=this.index_,e.viewFrom_=this.viewFrom_,e}}function i1(t){return t.loadsAllData()?new Pc(t.getIndex()):t.hasLimit()?new r1(t):new $i(t)}function Gh(t){const e={};if(t.isDefault())return e;let n;if(t.index_===ae?n="$priority":t.index_===t1?n="$value":t.index_===gr?n="$key":(N(t.index_ instanceof ZC,"Unrecognized index type!"),n=t.index_.toString()),e.orderBy=pe(n),t.startSet_){const r=t.startAfterSet_?"startAfter":"startAt";e[r]=pe(t.indexStartValue_),t.startNameSet_&&(e[r]+=","+pe(t.indexStartName_))}if(t.endSet_){const r=t.endBeforeSet_?"endBefore":"endAt";e[r]=pe(t.indexEndValue_),t.endNameSet_&&(e[r]+=","+pe(t.indexEndName_))}return t.limitSet_&&(t.isViewFromLeft()?e.limitToFirst=t.limit_:e.limitToLast=t.limit_),e}function Kh(t){const e={};if(t.startSet_&&(e.sp=t.indexStartValue_,t.startNameSet_&&(e.sn=t.indexStartName_),e.sin=!t.startAfterSet_),t.endSet_&&(e.ep=t.indexEndValue_,t.endNameSet_&&(e.en=t.indexEndName_),e.ein=!t.endBeforeSet_),t.limitSet_){e.l=t.limit_;let n=t.viewFrom_;n===""&&(t.isViewFromLeft()?n="l":n="r"),e.vf=n}return t.index_!==ae&&(e.i=t.index_.toString()),e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class So extends xg{constructor(e,n,r,i){super(),this.repoInfo_=e,this.onDataUpdate_=n,this.authTokenProvider_=r,this.appCheckTokenProvider_=i,this.log_=is("p:rest:"),this.listens_={}}reportStats(e){throw new Error("Method not implemented.")}static getListenId_(e,n){return n!==void 0?"tag$"+n:(N(e._queryParams.isDefault(),"should have a tag if it's not a default query."),e._path.toString())}listen(e,n,r,i){const s=e._path.toString();this.log_("Listen called for "+s+" "+e._queryIdentifier);const o=So.getListenId_(e,r),l={};this.listens_[o]=l;const a=Gh(e._queryParams);this.restRequest_(s+".json",a,(u,h)=>{let d=h;if(u===404&&(d=null,u=null),u===null&&this.onDataUpdate_(s,d,!1,r),Sr(this.listens_,o)===l){let f;u?u===401?f="permission_denied":f="rest_error:"+u:f="ok",i(f,null)}})}unlisten(e,n){const r=So.getListenId_(e,n);delete this.listens_[r]}get(e){const n=Gh(e._queryParams),r=e._path.toString(),i=new ts;return this.restRequest_(r+".json",n,(s,o)=>{let l=o;s===404&&(l=null,s=null),s===null?(this.onDataUpdate_(r,l,!1,null),i.resolve(l)):i.reject(new Error(l))}),i.promise}refreshAuthToken(e){}restRequest_(e,n={},r){return n.format="export",Promise.all([this.authTokenProvider_.getToken(!1),this.appCheckTokenProvider_.getToken(!1)]).then(([i,s])=>{i&&i.accessToken&&(n.auth=i.accessToken),s&&s.token&&(n.ac=s.token);const o=(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host+e+"?ns="+this.repoInfo_.namespace+Rx(n);this.log_("Sending REST request for "+o);const l=new XMLHttpRequest;l.onreadystatechange=()=>{if(r&&l.readyState===4){this.log_("REST Response for "+o+" received. status:",l.status,"response:",l.responseText);let a=null;if(l.status>=200&&l.status<300){try{a=Li(l.responseText)}catch{be("Failed to parse JSON response for "+o+": "+l.responseText)}r(null,a)}else l.status!==401&&l.status!==404&&be("Got unsuccessful REST response for "+o+" Status: "+l.status),r(l.status);r=null}},l.open("GET",o,!0),l.send()})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class s1{constructor(){this.rootNode_=O.EMPTY_NODE}getNode(e){return this.rootNode_.getChild(e)}updateSnapshot(e,n){this.rootNode_=this.rootNode_.updateChild(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(){return{value:null,children:new Map}}function Rg(t,e,n){if(z(e))t.value=n,t.children.clear();else if(t.value!==null)t.value=t.value.updateChild(e,n);else{const r=M(e);t.children.has(r)||t.children.set(r,No());const i=t.children.get(r);e=Y(e),Rg(i,e,n)}}function ou(t,e,n){t.value!==null?n(e,t.value):o1(t,(r,i)=>{const s=new G(e.toString()+"/"+r);ou(i,s,n)})}function o1(t,e){t.children.forEach((n,r)=>{e(r,n)})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class l1{constructor(e){this.collection_=e,this.last_=null}get(){const e=this.collection_.get(),n=Object.assign({},e);return this.last_&&Se(this.last_,(r,i)=>{n[r]=n[r]-i}),this.last_=e,n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qh=10*1e3,a1=30*1e3,u1=5*60*1e3;class c1{constructor(e,n){this.server_=n,this.statsToReport_={},this.statsListener_=new l1(e);const r=qh+(a1-qh)*Math.random();fi(this.reportStats_.bind(this),Math.floor(r))}reportStats_(){const e=this.statsListener_.get(),n={};let r=!1;Se(e,(i,s)=>{s>0&&wt(this.statsToReport_,i)&&(n[i]=s,r=!0)}),r&&this.server_.reportStats(n),fi(this.reportStats_.bind(this),Math.floor(Math.random()*2*u1))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var dt;(function(t){t[t.OVERWRITE=0]="OVERWRITE",t[t.MERGE=1]="MERGE",t[t.ACK_USER_WRITE=2]="ACK_USER_WRITE",t[t.LISTEN_COMPLETE=3]="LISTEN_COMPLETE"})(dt||(dt={}));function jc(){return{fromUser:!0,fromServer:!1,queryId:null,tagged:!1}}function bc(){return{fromUser:!1,fromServer:!0,queryId:null,tagged:!1}}function Oc(t){return{fromUser:!1,fromServer:!0,queryId:t,tagged:!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ko{constructor(e,n,r){this.path=e,this.affectedTree=n,this.revert=r,this.type=dt.ACK_USER_WRITE,this.source=jc()}operationForChild(e){if(z(this.path)){if(this.affectedTree.value!=null)return N(this.affectedTree.children.isEmpty(),"affectedTree should not have overlapping affected paths."),this;{const n=this.affectedTree.subtree(new G(e));return new ko($(),n,this.revert)}}else return N(M(this.path)===e,"operationForChild called for unrelated child."),new ko(Y(this.path),this.affectedTree,this.revert)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(e,n){this.source=e,this.path=n,this.type=dt.LISTEN_COMPLETE}operationForChild(e){return z(this.path)?new Vi(this.source,$()):new Vi(this.source,Y(this.path))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mn{constructor(e,n,r){this.source=e,this.path=n,this.snap=r,this.type=dt.OVERWRITE}operationForChild(e){return z(this.path)?new Mn(this.source,$(),this.snap.getImmediateChild(e)):new Mn(this.source,Y(this.path),this.snap)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,n,r){this.source=e,this.path=n,this.children=r,this.type=dt.MERGE}operationForChild(e){if(z(this.path)){const n=this.children.subtree(new G(e));return n.isEmpty()?null:n.value?new Mn(this.source,$(),n.value):new Ir(this.source,$(),n)}else return N(M(this.path)===e,"Can't get a merge for a child not on the path of the operation"),new Ir(this.source,Y(this.path),this.children)}toString(){return"Operation("+this.path+": "+this.source.toString()+" merge: "+this.children.toString()+")"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fn{constructor(e,n,r){this.node_=e,this.fullyInitialized_=n,this.filtered_=r}isFullyInitialized(){return this.fullyInitialized_}isFiltered(){return this.filtered_}isCompleteForPath(e){if(z(e))return this.isFullyInitialized()&&!this.filtered_;const n=M(e);return this.isCompleteForChild(n)}isCompleteForChild(e){return this.isFullyInitialized()&&!this.filtered_||this.node_.hasChild(e)}getNode(){return this.node_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d1{constructor(e){this.query_=e,this.index_=this.query_._queryParams.getIndex()}}function h1(t,e,n,r){const i=[],s=[];return e.forEach(o=>{o.type==="child_changed"&&t.index_.indexedValueChanged(o.oldSnap,o.snapshotNode)&&s.push(n1(o.childName,o.snapshotNode))}),Jr(t,i,"child_removed",e,r,n),Jr(t,i,"child_added",e,r,n),Jr(t,i,"child_moved",s,r,n),Jr(t,i,"child_changed",e,r,n),Jr(t,i,"value",e,r,n),i}function Jr(t,e,n,r,i,s){const o=r.filter(l=>l.type===n);o.sort((l,a)=>p1(t,l,a)),o.forEach(l=>{const a=f1(t,l,s);i.forEach(u=>{u.respondsTo(l.type)&&e.push(u.createEvent(a,t.query_))})})}function f1(t,e,n){return e.type==="value"||e.type==="child_removed"||(e.prevName=n.getPredecessorChildName(e.childName,e.snapshotNode,t.index_)),e}function p1(t,e,n){if(e.childName==null||n.childName==null)throw Dr("Should only compare child_ events.");const r=new F(e.childName,e.snapshotNode),i=new F(n.childName,n.snapshotNode);return t.index_.compare(r,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nl(t,e){return{eventCache:t,serverCache:e}}function pi(t,e,n,r){return nl(new fn(e,n,r),t.serverCache)}function jg(t,e,n,r){return nl(t.eventCache,new fn(e,n,r))}function Io(t){return t.eventCache.isFullyInitialized()?t.eventCache.getNode():null}function Fn(t){return t.serverCache.isFullyInitialized()?t.serverCache.getNode():null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Kl;const m1=()=>(Kl||(Kl=new Fe(Zw)),Kl);class K{constructor(e,n=m1()){this.value=e,this.children=n}static fromObject(e){let n=new K(null);return Se(e,(r,i)=>{n=n.set(new G(r),i)}),n}isEmpty(){return this.value===null&&this.children.isEmpty()}findRootMostMatchingPathAndValue(e,n){if(this.value!=null&&n(this.value))return{path:$(),value:this.value};if(z(e))return null;{const r=M(e),i=this.children.get(r);if(i!==null){const s=i.findRootMostMatchingPathAndValue(Y(e),n);return s!=null?{path:le(new G(r),s.path),value:s.value}:null}else return null}}findRootMostValueAndPath(e){return this.findRootMostMatchingPathAndValue(e,()=>!0)}subtree(e){if(z(e))return this;{const n=M(e),r=this.children.get(n);return r!==null?r.subtree(Y(e)):new K(null)}}set(e,n){if(z(e))return new K(n,this.children);{const r=M(e),s=(this.children.get(r)||new K(null)).set(Y(e),n),o=this.children.insert(r,s);return new K(this.value,o)}}remove(e){if(z(e))return this.children.isEmpty()?new K(null):new K(null,this.children);{const n=M(e),r=this.children.get(n);if(r){const i=r.remove(Y(e));let s;return i.isEmpty()?s=this.children.remove(n):s=this.children.insert(n,i),this.value===null&&s.isEmpty()?new K(null):new K(this.value,s)}else return this}}get(e){if(z(e))return this.value;{const n=M(e),r=this.children.get(n);return r?r.get(Y(e)):null}}setTree(e,n){if(z(e))return n;{const r=M(e),s=(this.children.get(r)||new K(null)).setTree(Y(e),n);let o;return s.isEmpty()?o=this.children.remove(r):o=this.children.insert(r,s),new K(this.value,o)}}fold(e){return this.fold_($(),e)}fold_(e,n){const r={};return this.children.inorderTraversal((i,s)=>{r[i]=s.fold_(le(e,i),n)}),n(e,this.value,r)}findOnPath(e,n){return this.findOnPath_(e,$(),n)}findOnPath_(e,n,r){const i=this.value?r(n,this.value):!1;if(i)return i;if(z(e))return null;{const s=M(e),o=this.children.get(s);return o?o.findOnPath_(Y(e),le(n,s),r):null}}foreachOnPath(e,n){return this.foreachOnPath_(e,$(),n)}foreachOnPath_(e,n,r){if(z(e))return this;{this.value&&r(n,this.value);const i=M(e),s=this.children.get(i);return s?s.foreachOnPath_(Y(e),le(n,i),r):new K(null)}}foreach(e){this.foreach_($(),e)}foreach_(e,n){this.children.inorderTraversal((r,i)=>{i.foreach_(le(e,r),n)}),this.value&&n(e,this.value)}foreachChild(e){this.children.inorderTraversal((n,r)=>{r.value&&e(n,r.value)})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pt{constructor(e){this.writeTree_=e}static empty(){return new pt(new K(null))}}function mi(t,e,n){if(z(e))return new pt(new K(n));{const r=t.writeTree_.findRootMostValueAndPath(e);if(r!=null){const i=r.path;let s=r.value;const o=Re(i,e);return s=s.updateChild(o,n),new pt(t.writeTree_.set(i,s))}else{const i=new K(n),s=t.writeTree_.setTree(e,i);return new pt(s)}}}function lu(t,e,n){let r=t;return Se(n,(i,s)=>{r=mi(r,le(e,i),s)}),r}function Yh(t,e){if(z(e))return pt.empty();{const n=t.writeTree_.setTree(e,new K(null));return new pt(n)}}function au(t,e){return Hn(t,e)!=null}function Hn(t,e){const n=t.writeTree_.findRootMostValueAndPath(e);return n!=null?t.writeTree_.get(n.path).getChild(Re(n.path,e)):null}function Xh(t){const e=[],n=t.writeTree_.value;return n!=null?n.isLeafNode()||n.forEachChild(ae,(r,i)=>{e.push(new F(r,i))}):t.writeTree_.children.inorderTraversal((r,i)=>{i.value!=null&&e.push(new F(r,i.value))}),e}function an(t,e){if(z(e))return t;{const n=Hn(t,e);return n!=null?new pt(new K(n)):new pt(t.writeTree_.subtree(e))}}function uu(t){return t.writeTree_.isEmpty()}function Tr(t,e){return bg($(),t.writeTree_,e)}function bg(t,e,n){if(e.value!=null)return n.updateChild(t,e.value);{let r=null;return e.children.inorderTraversal((i,s)=>{i===".priority"?(N(s.value!==null,"Priority writes must always be leaf nodes"),r=s.value):n=bg(le(t,i),s,n)}),!n.getChild(t).isEmpty()&&r!==null&&(n=n.updateChild(le(t,".priority"),r)),n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(t,e){return Lg(e,t)}function g1(t,e,n,r,i){N(r>t.lastWriteId,"Stacking an older write on top of newer ones"),i===void 0&&(i=!0),t.allWrites.push({path:e,snap:n,writeId:r,visible:i}),i&&(t.visibleWrites=mi(t.visibleWrites,e,n)),t.lastWriteId=r}function v1(t,e,n,r){N(r>t.lastWriteId,"Stacking an older merge on top of newer ones"),t.allWrites.push({path:e,children:n,writeId:r,visible:!0}),t.visibleWrites=lu(t.visibleWrites,e,n),t.lastWriteId=r}function y1(t,e){for(let n=0;n<t.allWrites.length;n++){const r=t.allWrites[n];if(r.writeId===e)return r}return null}function _1(t,e){const n=t.allWrites.findIndex(l=>l.writeId===e);N(n>=0,"removeWrite called with nonexistent writeId.");const r=t.allWrites[n];t.allWrites.splice(n,1);let i=r.visible,s=!1,o=t.allWrites.length-1;for(;i&&o>=0;){const l=t.allWrites[o];l.visible&&(o>=n&&x1(l,r.path)?i=!1:et(r.path,l.path)&&(s=!0)),o--}if(i){if(s)return w1(t),!0;if(r.snap)t.visibleWrites=Yh(t.visibleWrites,r.path);else{const l=r.children;Se(l,a=>{t.visibleWrites=Yh(t.visibleWrites,le(r.path,a))})}return!0}else return!1}function x1(t,e){if(t.snap)return et(t.path,e);for(const n in t.children)if(t.children.hasOwnProperty(n)&&et(le(t.path,n),e))return!0;return!1}function w1(t){t.visibleWrites=Og(t.allWrites,C1,$()),t.allWrites.length>0?t.lastWriteId=t.allWrites[t.allWrites.length-1].writeId:t.lastWriteId=-1}function C1(t){return t.visible}function Og(t,e,n){let r=pt.empty();for(let i=0;i<t.length;++i){const s=t[i];if(e(s)){const o=s.path;let l;if(s.snap)et(n,o)?(l=Re(n,o),r=mi(r,l,s.snap)):et(o,n)&&(l=Re(o,n),r=mi(r,$(),s.snap.getChild(l)));else if(s.children){if(et(n,o))l=Re(n,o),r=lu(r,l,s.children);else if(et(o,n))if(l=Re(o,n),z(l))r=lu(r,$(),s.children);else{const a=Sr(s.children,M(l));if(a){const u=a.getChild(Y(l));r=mi(r,$(),u)}}}else throw Dr("WriteRecord should have .snap or .children")}}return r}function Dg(t,e,n,r,i){if(!r&&!i){const s=Hn(t.visibleWrites,e);if(s!=null)return s;{const o=an(t.visibleWrites,e);if(uu(o))return n;if(n==null&&!au(o,$()))return null;{const l=n||O.EMPTY_NODE;return Tr(o,l)}}}else{const s=an(t.visibleWrites,e);if(!i&&uu(s))return n;if(!i&&n==null&&!au(s,$()))return null;{const o=function(u){return(u.visible||i)&&(!r||!~r.indexOf(u.writeId))&&(et(u.path,e)||et(e,u.path))},l=Og(t.allWrites,o,e),a=n||O.EMPTY_NODE;return Tr(l,a)}}}function E1(t,e,n){let r=O.EMPTY_NODE;const i=Hn(t.visibleWrites,e);if(i)return i.isLeafNode()||i.forEachChild(ae,(s,o)=>{r=r.updateImmediateChild(s,o)}),r;if(n){const s=an(t.visibleWrites,e);return n.forEachChild(ae,(o,l)=>{const a=Tr(an(s,new G(o)),l);r=r.updateImmediateChild(o,a)}),Xh(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}else{const s=an(t.visibleWrites,e);return Xh(s).forEach(o=>{r=r.updateImmediateChild(o.name,o.node)}),r}}function S1(t,e,n,r,i){N(r||i,"Either existingEventSnap or existingServerSnap must exist");const s=le(e,n);if(au(t.visibleWrites,s))return null;{const o=an(t.visibleWrites,s);return uu(o)?i.getChild(n):Tr(o,i.getChild(n))}}function N1(t,e,n,r){const i=le(e,n),s=Hn(t.visibleWrites,i);if(s!=null)return s;if(r.isCompleteForChild(n)){const o=an(t.visibleWrites,i);return Tr(o,r.getNode().getImmediateChild(n))}else return null}function k1(t,e){return Hn(t.visibleWrites,e)}function I1(t,e,n,r,i,s,o){let l;const a=an(t.visibleWrites,e),u=Hn(a,$());if(u!=null)l=u;else if(n!=null)l=Tr(a,n);else return[];if(l=l.withIndex(o),!l.isEmpty()&&!l.isLeafNode()){const h=[],d=o.getCompare(),f=s?l.getReverseIteratorFrom(r,o):l.getIteratorFrom(r,o);let v=f.getNext();for(;v&&h.length<i;)d(v,r)!==0&&h.push(v),v=f.getNext();return h}else return[]}function T1(){return{visibleWrites:pt.empty(),allWrites:[],lastWriteId:-1}}function To(t,e,n,r){return Dg(t.writeTree,t.treePath,e,n,r)}function Dc(t,e){return E1(t.writeTree,t.treePath,e)}function Jh(t,e,n,r){return S1(t.writeTree,t.treePath,e,n,r)}function Po(t,e){return k1(t.writeTree,le(t.treePath,e))}function P1(t,e,n,r,i,s){return I1(t.writeTree,t.treePath,e,n,r,i,s)}function Ac(t,e,n){return N1(t.writeTree,t.treePath,e,n)}function Ag(t,e){return Lg(le(t.treePath,e),t.writeTree)}function Lg(t,e){return{treePath:t,writeTree:e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R1{constructor(){this.changeMap=new Map}trackChildChange(e){const n=e.type,r=e.childName;N(n==="child_added"||n==="child_changed"||n==="child_removed","Only child changes supported for tracking"),N(r!==".priority","Only non-priority child changes can be tracked.");const i=this.changeMap.get(r);if(i){const s=i.type;if(n==="child_added"&&s==="child_removed")this.changeMap.set(r,Wi(r,e.snapshotNode,i.snapshotNode));else if(n==="child_removed"&&s==="child_added")this.changeMap.delete(r);else if(n==="child_removed"&&s==="child_changed")this.changeMap.set(r,Bi(r,i.oldSnap));else if(n==="child_changed"&&s==="child_added")this.changeMap.set(r,kr(r,e.snapshotNode));else if(n==="child_changed"&&s==="child_changed")this.changeMap.set(r,Wi(r,e.snapshotNode,i.oldSnap));else throw Dr("Illegal combination of changes: "+e+" occurred after "+i)}else this.changeMap.set(r,e)}getChanges(){return Array.from(this.changeMap.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j1{getCompleteChild(e){return null}getChildAfterChild(e,n,r){return null}}const Mg=new j1;class Lc{constructor(e,n,r=null){this.writes_=e,this.viewCache_=n,this.optCompleteServerCache_=r}getCompleteChild(e){const n=this.viewCache_.eventCache;if(n.isCompleteForChild(e))return n.getNode().getImmediateChild(e);{const r=this.optCompleteServerCache_!=null?new fn(this.optCompleteServerCache_,!0,!1):this.viewCache_.serverCache;return Ac(this.writes_,e,r)}}getChildAfterChild(e,n,r){const i=this.optCompleteServerCache_!=null?this.optCompleteServerCache_:Fn(this.viewCache_),s=P1(this.writes_,i,n,1,r,e);return s.length===0?null:s[0]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function b1(t){return{filter:t}}function O1(t,e){N(e.eventCache.getNode().isIndexed(t.filter.getIndex()),"Event snap not indexed"),N(e.serverCache.getNode().isIndexed(t.filter.getIndex()),"Server snap not indexed")}function D1(t,e,n,r,i){const s=new R1;let o,l;if(n.type===dt.OVERWRITE){const u=n;u.source.fromUser?o=cu(t,e,u.path,u.snap,r,i,s):(N(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered()&&!z(u.path),o=Ro(t,e,u.path,u.snap,r,i,l,s))}else if(n.type===dt.MERGE){const u=n;u.source.fromUser?o=L1(t,e,u.path,u.children,r,i,s):(N(u.source.fromServer,"Unknown source."),l=u.source.tagged||e.serverCache.isFiltered(),o=du(t,e,u.path,u.children,r,i,l,s))}else if(n.type===dt.ACK_USER_WRITE){const u=n;u.revert?o=z1(t,e,u.path,r,i,s):o=M1(t,e,u.path,u.affectedTree,r,i,s)}else if(n.type===dt.LISTEN_COMPLETE)o=F1(t,e,n.path,r,s);else throw Dr("Unknown operation type: "+n.type);const a=s.getChanges();return A1(e,o,a),{viewCache:o,changes:a}}function A1(t,e,n){const r=e.eventCache;if(r.isFullyInitialized()){const i=r.getNode().isLeafNode()||r.getNode().isEmpty(),s=Io(t);(n.length>0||!t.eventCache.isFullyInitialized()||i&&!r.getNode().equals(s)||!r.getNode().getPriority().equals(s.getPriority()))&&n.push(Pg(Io(e)))}}function Fg(t,e,n,r,i,s){const o=e.eventCache;if(Po(r,n)!=null)return e;{let l,a;if(z(n))if(N(e.serverCache.isFullyInitialized(),"If change path is empty, we must have complete server data"),e.serverCache.isFiltered()){const u=Fn(e),h=u instanceof O?u:O.EMPTY_NODE,d=Dc(r,h);l=t.filter.updateFullNode(e.eventCache.getNode(),d,s)}else{const u=To(r,Fn(e));l=t.filter.updateFullNode(e.eventCache.getNode(),u,s)}else{const u=M(n);if(u===".priority"){N(hn(n)===1,"Can't have a priority with additional path components");const h=o.getNode();a=e.serverCache.getNode();const d=Jh(r,n,h,a);d!=null?l=t.filter.updatePriority(h,d):l=o.getNode()}else{const h=Y(n);let d;if(o.isCompleteForChild(u)){a=e.serverCache.getNode();const f=Jh(r,n,o.getNode(),a);f!=null?d=o.getNode().getImmediateChild(u).updateChild(h,f):d=o.getNode().getImmediateChild(u)}else d=Ac(r,u,e.serverCache);d!=null?l=t.filter.updateChild(o.getNode(),u,d,h,i,s):l=o.getNode()}}return pi(e,l,o.isFullyInitialized()||z(n),t.filter.filtersNodes())}}function Ro(t,e,n,r,i,s,o,l){const a=e.serverCache;let u;const h=o?t.filter:t.filter.getIndexedFilter();if(z(n))u=h.updateFullNode(a.getNode(),r,null);else if(h.filtersNodes()&&!a.isFiltered()){const v=a.getNode().updateChild(n,r);u=h.updateFullNode(a.getNode(),v,null)}else{const v=M(n);if(!a.isCompleteForPath(n)&&hn(n)>1)return e;const y=Y(n),E=a.getNode().getImmediateChild(v).updateChild(y,r);v===".priority"?u=h.updatePriority(a.getNode(),E):u=h.updateChild(a.getNode(),v,E,y,Mg,null)}const d=jg(e,u,a.isFullyInitialized()||z(n),h.filtersNodes()),f=new Lc(i,d,s);return Fg(t,d,n,i,f,l)}function cu(t,e,n,r,i,s,o){const l=e.eventCache;let a,u;const h=new Lc(i,e,s);if(z(n))u=t.filter.updateFullNode(e.eventCache.getNode(),r,o),a=pi(e,u,!0,t.filter.filtersNodes());else{const d=M(n);if(d===".priority")u=t.filter.updatePriority(e.eventCache.getNode(),r),a=pi(e,u,l.isFullyInitialized(),l.isFiltered());else{const f=Y(n),v=l.getNode().getImmediateChild(d);let y;if(z(f))y=r;else{const _=h.getCompleteChild(d);_!=null?Nc(f)===".priority"&&_.getChild(Cg(f)).isEmpty()?y=_:y=_.updateChild(f,r):y=O.EMPTY_NODE}if(v.equals(y))a=e;else{const _=t.filter.updateChild(l.getNode(),d,y,f,h,o);a=pi(e,_,l.isFullyInitialized(),t.filter.filtersNodes())}}}return a}function Zh(t,e){return t.eventCache.isCompleteForChild(e)}function L1(t,e,n,r,i,s,o){let l=e;return r.foreach((a,u)=>{const h=le(n,a);Zh(e,M(h))&&(l=cu(t,l,h,u,i,s,o))}),r.foreach((a,u)=>{const h=le(n,a);Zh(e,M(h))||(l=cu(t,l,h,u,i,s,o))}),l}function ef(t,e,n){return n.foreach((r,i)=>{e=e.updateChild(r,i)}),e}function du(t,e,n,r,i,s,o,l){if(e.serverCache.getNode().isEmpty()&&!e.serverCache.isFullyInitialized())return e;let a=e,u;z(n)?u=r:u=new K(null).setTree(n,r);const h=e.serverCache.getNode();return u.children.inorderTraversal((d,f)=>{if(h.hasChild(d)){const v=e.serverCache.getNode().getImmediateChild(d),y=ef(t,v,f);a=Ro(t,a,new G(d),y,i,s,o,l)}}),u.children.inorderTraversal((d,f)=>{const v=!e.serverCache.isCompleteForChild(d)&&f.value===null;if(!h.hasChild(d)&&!v){const y=e.serverCache.getNode().getImmediateChild(d),_=ef(t,y,f);a=Ro(t,a,new G(d),_,i,s,o,l)}}),a}function M1(t,e,n,r,i,s,o){if(Po(i,n)!=null)return e;const l=e.serverCache.isFiltered(),a=e.serverCache;if(r.value!=null){if(z(n)&&a.isFullyInitialized()||a.isCompleteForPath(n))return Ro(t,e,n,a.getNode().getChild(n),i,s,l,o);if(z(n)){let u=new K(null);return a.getNode().forEachChild(gr,(h,d)=>{u=u.set(new G(h),d)}),du(t,e,n,u,i,s,l,o)}else return e}else{let u=new K(null);return r.foreach((h,d)=>{const f=le(n,h);a.isCompleteForPath(f)&&(u=u.set(h,a.getNode().getChild(f)))}),du(t,e,n,u,i,s,l,o)}}function F1(t,e,n,r,i){const s=e.serverCache,o=jg(e,s.getNode(),s.isFullyInitialized()||z(n),s.isFiltered());return Fg(t,o,n,r,Mg,i)}function z1(t,e,n,r,i,s){let o;if(Po(r,n)!=null)return e;{const l=new Lc(r,e,i),a=e.eventCache.getNode();let u;if(z(n)||M(n)===".priority"){let h;if(e.serverCache.isFullyInitialized())h=To(r,Fn(e));else{const d=e.serverCache.getNode();N(d instanceof O,"serverChildren would be complete if leaf node"),h=Dc(r,d)}h=h,u=t.filter.updateFullNode(a,h,s)}else{const h=M(n);let d=Ac(r,h,e.serverCache);d==null&&e.serverCache.isCompleteForChild(h)&&(d=a.getImmediateChild(h)),d!=null?u=t.filter.updateChild(a,h,d,Y(n),l,s):e.eventCache.getNode().hasChild(h)?u=t.filter.updateChild(a,h,O.EMPTY_NODE,Y(n),l,s):u=a,u.isEmpty()&&e.serverCache.isFullyInitialized()&&(o=To(r,Fn(e)),o.isLeafNode()&&(u=t.filter.updateFullNode(u,o,s)))}return o=e.serverCache.isFullyInitialized()||Po(r,$())!=null,pi(e,u,o,t.filter.filtersNodes())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U1{constructor(e,n){this.query_=e,this.eventRegistrations_=[];const r=this.query_._queryParams,i=new Pc(r.getIndex()),s=i1(r);this.processor_=b1(s);const o=n.serverCache,l=n.eventCache,a=i.updateFullNode(O.EMPTY_NODE,o.getNode(),null),u=s.updateFullNode(O.EMPTY_NODE,l.getNode(),null),h=new fn(a,o.isFullyInitialized(),i.filtersNodes()),d=new fn(u,l.isFullyInitialized(),s.filtersNodes());this.viewCache_=nl(d,h),this.eventGenerator_=new d1(this.query_)}get query(){return this.query_}}function B1(t){return t.viewCache_.serverCache.getNode()}function W1(t){return Io(t.viewCache_)}function $1(t,e){const n=Fn(t.viewCache_);return n&&(t.query._queryParams.loadsAllData()||!z(e)&&!n.getImmediateChild(M(e)).isEmpty())?n.getChild(e):null}function tf(t){return t.eventRegistrations_.length===0}function V1(t,e){t.eventRegistrations_.push(e)}function nf(t,e,n){const r=[];if(n){N(e==null,"A cancel should cancel all event registrations.");const i=t.query._path;t.eventRegistrations_.forEach(s=>{const o=s.createCancelEvent(n,i);o&&r.push(o)})}if(e){let i=[];for(let s=0;s<t.eventRegistrations_.length;++s){const o=t.eventRegistrations_[s];if(!o.matches(e))i.push(o);else if(e.hasAnyCallback()){i=i.concat(t.eventRegistrations_.slice(s+1));break}}t.eventRegistrations_=i}else t.eventRegistrations_=[];return r}function rf(t,e,n,r){e.type===dt.MERGE&&e.source.queryId!==null&&(N(Fn(t.viewCache_),"We should always have a full cache before handling merges"),N(Io(t.viewCache_),"Missing event cache, even though we have a server cache"));const i=t.viewCache_,s=D1(t.processor_,i,e,n,r);return O1(t.processor_,s.viewCache),N(s.viewCache.serverCache.isFullyInitialized()||!i.serverCache.isFullyInitialized(),"Once a server snap is complete, it should never go back"),t.viewCache_=s.viewCache,zg(t,s.changes,s.viewCache.eventCache.getNode(),null)}function H1(t,e){const n=t.viewCache_.eventCache,r=[];return n.getNode().isLeafNode()||n.getNode().forEachChild(ae,(s,o)=>{r.push(kr(s,o))}),n.isFullyInitialized()&&r.push(Pg(n.getNode())),zg(t,r,n.getNode(),e)}function zg(t,e,n,r){const i=r?[r]:t.eventRegistrations_;return h1(t.eventGenerator_,e,n,i)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let jo;class Ug{constructor(){this.views=new Map}}function Q1(t){N(!jo,"__referenceConstructor has already been defined"),jo=t}function G1(){return N(jo,"Reference.ts has not been loaded"),jo}function K1(t){return t.views.size===0}function Mc(t,e,n,r){const i=e.source.queryId;if(i!==null){const s=t.views.get(i);return N(s!=null,"SyncTree gave us an op for an invalid query."),rf(s,e,n,r)}else{let s=[];for(const o of t.views.values())s=s.concat(rf(o,e,n,r));return s}}function Bg(t,e,n,r,i){const s=e._queryIdentifier,o=t.views.get(s);if(!o){let l=To(n,i?r:null),a=!1;l?a=!0:r instanceof O?(l=Dc(n,r),a=!1):(l=O.EMPTY_NODE,a=!1);const u=nl(new fn(l,a,!1),new fn(r,i,!1));return new U1(e,u)}return o}function q1(t,e,n,r,i,s){const o=Bg(t,e,r,i,s);return t.views.has(e._queryIdentifier)||t.views.set(e._queryIdentifier,o),V1(o,n),H1(o,n)}function Y1(t,e,n,r){const i=e._queryIdentifier,s=[];let o=[];const l=pn(t);if(i==="default")for(const[a,u]of t.views.entries())o=o.concat(nf(u,n,r)),tf(u)&&(t.views.delete(a),u.query._queryParams.loadsAllData()||s.push(u.query));else{const a=t.views.get(i);a&&(o=o.concat(nf(a,n,r)),tf(a)&&(t.views.delete(i),a.query._queryParams.loadsAllData()||s.push(a.query)))}return l&&!pn(t)&&s.push(new(G1())(e._repo,e._path)),{removed:s,events:o}}function Wg(t){const e=[];for(const n of t.views.values())n.query._queryParams.loadsAllData()||e.push(n);return e}function un(t,e){let n=null;for(const r of t.views.values())n=n||$1(r,e);return n}function $g(t,e){if(e._queryParams.loadsAllData())return il(t);{const r=e._queryIdentifier;return t.views.get(r)}}function Vg(t,e){return $g(t,e)!=null}function pn(t){return il(t)!=null}function il(t){for(const e of t.views.values())if(e.query._queryParams.loadsAllData())return e;return null}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bo;function X1(t){N(!bo,"__referenceConstructor has already been defined"),bo=t}function J1(){return N(bo,"Reference.ts has not been loaded"),bo}let Z1=1;class sf{constructor(e){this.listenProvider_=e,this.syncPointTree_=new K(null),this.pendingWriteTree_=T1(),this.tagToQueryMap=new Map,this.queryToTagMap=new Map}}function Hg(t,e,n,r,i){return g1(t.pendingWriteTree_,e,n,r,i),i?Lr(t,new Mn(jc(),e,n)):[]}function eE(t,e,n,r){v1(t.pendingWriteTree_,e,n,r);const i=K.fromObject(n);return Lr(t,new Ir(jc(),e,i))}function qt(t,e,n=!1){const r=y1(t.pendingWriteTree_,e);if(_1(t.pendingWriteTree_,e)){let s=new K(null);return r.snap!=null?s=s.set($(),!0):Se(r.children,o=>{s=s.set(new G(o),!0)}),Lr(t,new ko(r.path,s,n))}else return[]}function os(t,e,n){return Lr(t,new Mn(bc(),e,n))}function tE(t,e,n){const r=K.fromObject(n);return Lr(t,new Ir(bc(),e,r))}function nE(t,e){return Lr(t,new Vi(bc(),e))}function rE(t,e,n){const r=zc(t,n);if(r){const i=Uc(r),s=i.path,o=i.queryId,l=Re(s,e),a=new Vi(Oc(o),l);return Bc(t,s,a)}else return[]}function Oo(t,e,n,r,i=!1){const s=e._path,o=t.syncPointTree_.get(s);let l=[];if(o&&(e._queryIdentifier==="default"||Vg(o,e))){const a=Y1(o,e,n,r);K1(o)&&(t.syncPointTree_=t.syncPointTree_.remove(s));const u=a.removed;if(l=a.events,!i){const h=u.findIndex(f=>f._queryParams.loadsAllData())!==-1,d=t.syncPointTree_.findOnPath(s,(f,v)=>pn(v));if(h&&!d){const f=t.syncPointTree_.subtree(s);if(!f.isEmpty()){const v=oE(f);for(let y=0;y<v.length;++y){const _=v[y],E=_.query,m=qg(t,_);t.listenProvider_.startListening(gi(E),Hi(t,E),m.hashFn,m.onComplete)}}}!d&&u.length>0&&!r&&(h?t.listenProvider_.stopListening(gi(e),null):u.forEach(f=>{const v=t.queryToTagMap.get(sl(f));t.listenProvider_.stopListening(gi(f),v)}))}lE(t,u)}return l}function Qg(t,e,n,r){const i=zc(t,r);if(i!=null){const s=Uc(i),o=s.path,l=s.queryId,a=Re(o,e),u=new Mn(Oc(l),a,n);return Bc(t,o,u)}else return[]}function iE(t,e,n,r){const i=zc(t,r);if(i){const s=Uc(i),o=s.path,l=s.queryId,a=Re(o,e),u=K.fromObject(n),h=new Ir(Oc(l),a,u);return Bc(t,o,h)}else return[]}function hu(t,e,n,r=!1){const i=e._path;let s=null,o=!1;t.syncPointTree_.foreachOnPath(i,(f,v)=>{const y=Re(f,i);s=s||un(v,y),o=o||pn(v)});let l=t.syncPointTree_.get(i);l?(o=o||pn(l),s=s||un(l,$())):(l=new Ug,t.syncPointTree_=t.syncPointTree_.set(i,l));let a;s!=null?a=!0:(a=!1,s=O.EMPTY_NODE,t.syncPointTree_.subtree(i).foreachChild((v,y)=>{const _=un(y,$());_&&(s=s.updateImmediateChild(v,_))}));const u=Vg(l,e);if(!u&&!e._queryParams.loadsAllData()){const f=sl(e);N(!t.queryToTagMap.has(f),"View does not exist, but we have a tag");const v=aE();t.queryToTagMap.set(f,v),t.tagToQueryMap.set(v,f)}const h=rl(t.pendingWriteTree_,i);let d=q1(l,e,n,h,s,a);if(!u&&!o&&!r){const f=$g(l,e);d=d.concat(uE(t,e,f))}return d}function Fc(t,e,n){const i=t.pendingWriteTree_,s=t.syncPointTree_.findOnPath(e,(o,l)=>{const a=Re(o,e),u=un(l,a);if(u)return u});return Dg(i,e,s,n,!0)}function sE(t,e){const n=e._path;let r=null;t.syncPointTree_.foreachOnPath(n,(u,h)=>{const d=Re(u,n);r=r||un(h,d)});let i=t.syncPointTree_.get(n);i?r=r||un(i,$()):(i=new Ug,t.syncPointTree_=t.syncPointTree_.set(n,i));const s=r!=null,o=s?new fn(r,!0,!1):null,l=rl(t.pendingWriteTree_,e._path),a=Bg(i,e,l,s?o.getNode():O.EMPTY_NODE,s);return W1(a)}function Lr(t,e){return Gg(e,t.syncPointTree_,null,rl(t.pendingWriteTree_,$()))}function Gg(t,e,n,r){if(z(t.path))return Kg(t,e,n,r);{const i=e.get($());n==null&&i!=null&&(n=un(i,$()));let s=[];const o=M(t.path),l=t.operationForChild(o),a=e.children.get(o);if(a&&l){const u=n?n.getImmediateChild(o):null,h=Ag(r,o);s=s.concat(Gg(l,a,u,h))}return i&&(s=s.concat(Mc(i,t,r,n))),s}}function Kg(t,e,n,r){const i=e.get($());n==null&&i!=null&&(n=un(i,$()));let s=[];return e.children.inorderTraversal((o,l)=>{const a=n?n.getImmediateChild(o):null,u=Ag(r,o),h=t.operationForChild(o);h&&(s=s.concat(Kg(h,l,a,u)))}),i&&(s=s.concat(Mc(i,t,r,n))),s}function qg(t,e){const n=e.query,r=Hi(t,n);return{hashFn:()=>(B1(e)||O.EMPTY_NODE).hash(),onComplete:i=>{if(i==="ok")return r?rE(t,n._path,r):nE(t,n._path);{const s=nC(i,n);return Oo(t,n,null,s)}}}}function Hi(t,e){const n=sl(e);return t.queryToTagMap.get(n)}function sl(t){return t._path.toString()+"$"+t._queryIdentifier}function zc(t,e){return t.tagToQueryMap.get(e)}function Uc(t){const e=t.indexOf("$");return N(e!==-1&&e<t.length-1,"Bad queryKey."),{queryId:t.substr(e+1),path:new G(t.substr(0,e))}}function Bc(t,e,n){const r=t.syncPointTree_.get(e);N(r,"Missing sync point for query tag that we're tracking");const i=rl(t.pendingWriteTree_,e);return Mc(r,n,i,null)}function oE(t){return t.fold((e,n,r)=>{if(n&&pn(n))return[il(n)];{let i=[];return n&&(i=Wg(n)),Se(r,(s,o)=>{i=i.concat(o)}),i}})}function gi(t){return t._queryParams.loadsAllData()&&!t._queryParams.isDefault()?new(J1())(t._repo,t._path):t}function lE(t,e){for(let n=0;n<e.length;++n){const r=e[n];if(!r._queryParams.loadsAllData()){const i=sl(r),s=t.queryToTagMap.get(i);t.queryToTagMap.delete(i),t.tagToQueryMap.delete(s)}}}function aE(){return Z1++}function uE(t,e,n){const r=e._path,i=Hi(t,e),s=qg(t,n),o=t.listenProvider_.startListening(gi(e),i,s.hashFn,s.onComplete),l=t.syncPointTree_.subtree(r);if(i)N(!pn(l.value),"If we're adding a query, it shouldn't be shadowed");else{const a=l.fold((u,h,d)=>{if(!z(u)&&h&&pn(h))return[il(h).query];{let f=[];return h&&(f=f.concat(Wg(h).map(v=>v.query))),Se(d,(v,y)=>{f=f.concat(y)}),f}});for(let u=0;u<a.length;++u){const h=a[u];t.listenProvider_.stopListening(gi(h),Hi(t,h))}}return o}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc{constructor(e){this.node_=e}getImmediateChild(e){const n=this.node_.getImmediateChild(e);return new Wc(n)}node(){return this.node_}}class $c{constructor(e,n){this.syncTree_=e,this.path_=n}getImmediateChild(e){const n=le(this.path_,e);return new $c(this.syncTree_,n)}node(){return Fc(this.syncTree_,this.path_)}}const cE=function(t){return t=t||{},t.timestamp=t.timestamp||new Date().getTime(),t},of=function(t,e,n){if(!t||typeof t!="object")return t;if(N(".sv"in t,"Unexpected leaf node or priority contents"),typeof t[".sv"]=="string")return dE(t[".sv"],e,n);if(typeof t[".sv"]=="object")return hE(t[".sv"],e);N(!1,"Unexpected server value: "+JSON.stringify(t,null,2))},dE=function(t,e,n){switch(t){case"timestamp":return n.timestamp;default:N(!1,"Unexpected server value: "+t)}},hE=function(t,e,n){t.hasOwnProperty("increment")||N(!1,"Unexpected server value: "+JSON.stringify(t,null,2));const r=t.increment;typeof r!="number"&&N(!1,"Unexpected increment value: "+r);const i=e.node();if(N(i!==null&&typeof i<"u","Expected ChildrenNode.EMPTY_NODE for nulls"),!i.isLeafNode())return r;const o=i.getValue();return typeof o!="number"?r:o+r},Yg=function(t,e,n,r){return Vc(e,new $c(n,t),r)},Xg=function(t,e,n){return Vc(t,new Wc(e),n)};function Vc(t,e,n){const r=t.getPriority().val(),i=of(r,e.getImmediateChild(".priority"),n);let s;if(t.isLeafNode()){const o=t,l=of(o.getValue(),e,n);return l!==o.getValue()||i!==o.getPriority().val()?new ge(l,fe(i)):t}else{const o=t;return s=o,i!==o.getPriority().val()&&(s=s.updatePriority(new ge(i))),o.forEachChild(ae,(l,a)=>{const u=Vc(a,e.getImmediateChild(l),n);u!==a&&(s=s.updateImmediateChild(l,u))}),s}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hc{constructor(e="",n=null,r={children:{},childCount:0}){this.name=e,this.parent=n,this.node=r}}function Qc(t,e){let n=e instanceof G?e:new G(e),r=t,i=M(n);for(;i!==null;){const s=Sr(r.node.children,i)||{children:{},childCount:0};r=new Hc(i,r,s),n=Y(n),i=M(n)}return r}function Mr(t){return t.node.value}function Jg(t,e){t.node.value=e,fu(t)}function Zg(t){return t.node.childCount>0}function fE(t){return Mr(t)===void 0&&!Zg(t)}function ol(t,e){Se(t.node.children,(n,r)=>{e(new Hc(n,t,r))})}function ev(t,e,n,r){n&&e(t),ol(t,i=>{ev(i,e,!0)})}function pE(t,e,n){let r=t.parent;for(;r!==null;){if(e(r))return!0;r=r.parent}return!1}function ls(t){return new G(t.parent===null?t.name:ls(t.parent)+"/"+t.name)}function fu(t){t.parent!==null&&mE(t.parent,t.name,t)}function mE(t,e,n){const r=fE(n),i=wt(t.node.children,e);r&&i?(delete t.node.children[e],t.node.childCount--,fu(t)):!r&&!i&&(t.node.children[e]=n.node,t.node.childCount++,fu(t))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gE=/[\[\].#$\/\u0000-\u001F\u007F]/,vE=/[\[\].#$\u0000-\u001F\u007F]/,ql=10*1024*1024,Gc=function(t){return typeof t=="string"&&t.length!==0&&!gE.test(t)},tv=function(t){return typeof t=="string"&&t.length!==0&&!vE.test(t)},yE=function(t){return t&&(t=t.replace(/^\/*\.info(\/|$)/,"/")),tv(t)},_E=function(t){return t===null||typeof t=="string"||typeof t=="number"&&!xc(t)||t&&typeof t=="object"&&wt(t,".sv")},nv=function(t,e,n,r){r&&e===void 0||ll(Zo(t,"value"),e,n)},ll=function(t,e,n){const r=n instanceof G?new LC(n,t):n;if(e===void 0)throw new Error(t+"contains undefined "+Sn(r));if(typeof e=="function")throw new Error(t+"contains a function "+Sn(r)+" with contents = "+e.toString());if(xc(e))throw new Error(t+"contains "+e.toString()+" "+Sn(r));if(typeof e=="string"&&e.length>ql/3&&el(e)>ql)throw new Error(t+"contains a string greater than "+ql+" utf8 bytes "+Sn(r)+" ('"+e.substring(0,50)+"...')");if(e&&typeof e=="object"){let i=!1,s=!1;if(Se(e,(o,l)=>{if(o===".value")i=!0;else if(o!==".priority"&&o!==".sv"&&(s=!0,!Gc(o)))throw new Error(t+" contains an invalid key ("+o+") "+Sn(r)+`.  Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`);MC(r,o),ll(t,l,r),FC(r)}),i&&s)throw new Error(t+' contains ".value" child '+Sn(r)+" in addition to actual children.")}},xE=function(t,e){let n,r;for(n=0;n<e.length;n++){r=e[n];const s=Ui(r);for(let o=0;o<s.length;o++)if(!(s[o]===".priority"&&o===s.length-1)){if(!Gc(s[o]))throw new Error(t+"contains an invalid key ("+s[o]+") in path "+r.toString()+`. Keys must be non-empty strings and can't contain ".", "#", "$", "/", "[", or "]"`)}}e.sort(AC);let i=null;for(n=0;n<e.length;n++){if(r=e[n],i!==null&&et(i,r))throw new Error(t+"contains a path "+i.toString()+" that is ancestor of another path "+r.toString());i=r}},wE=function(t,e,n,r){const i=Zo(t,"values");if(!(e&&typeof e=="object")||Array.isArray(e))throw new Error(i+" must be an object containing the children to replace.");const s=[];Se(e,(o,l)=>{const a=new G(o);if(ll(i,l,le(n,a)),Nc(a)===".priority"&&!_E(l))throw new Error(i+"contains an invalid value for '"+a.toString()+"', which must be a valid Firebase priority (a string, finite number, server value, or null).");s.push(a)}),xE(i,s)},rv=function(t,e,n,r){if(!tv(n))throw new Error(Zo(t,e)+'was an invalid path = "'+n+`". Paths must be non-empty strings and can't contain ".", "#", "$", "[", or "]"`)},CE=function(t,e,n,r){n&&(n=n.replace(/^\/*\.info(\/|$)/,"/")),rv(t,e,n)},Kc=function(t,e){if(M(e)===".info")throw new Error(t+" failed = Can't modify data under /.info/")},EE=function(t,e){const n=e.path.toString();if(typeof e.repoInfo.host!="string"||e.repoInfo.host.length===0||!Gc(e.repoInfo.namespace)&&e.repoInfo.host.split(":")[0]!=="localhost"||n.length!==0&&!yE(n))throw new Error(Zo(t,"url")+`must be a valid firebase URL and the path can't contain ".", "#", "$", "[", or "]".`)};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SE{constructor(){this.eventLists_=[],this.recursionDepth_=0}}function al(t,e){let n=null;for(let r=0;r<e.length;r++){const i=e[r],s=i.getPath();n!==null&&!kc(s,n.path)&&(t.eventLists_.push(n),n=null),n===null&&(n={events:[],path:s}),n.events.push(i)}n&&t.eventLists_.push(n)}function iv(t,e,n){al(t,n),sv(t,r=>kc(r,e))}function it(t,e,n){al(t,n),sv(t,r=>et(r,e)||et(e,r))}function sv(t,e){t.recursionDepth_++;let n=!0;for(let r=0;r<t.eventLists_.length;r++){const i=t.eventLists_[r];if(i){const s=i.path;e(s)?(NE(t.eventLists_[r]),t.eventLists_[r]=null):n=!1}}n&&(t.eventLists_=[]),t.recursionDepth_--}function NE(t){for(let e=0;e<t.events.length;e++){const n=t.events[e];if(n!==null){t.events[e]=null;const r=n.getEventRunner();hi&&we("event: "+n.toString()),Ar(r)}}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kE="repo_interrupt",IE=25;class TE{constructor(e,n,r,i){this.repoInfo_=e,this.forceRestClient_=n,this.authTokenProvider_=r,this.appCheckProvider_=i,this.dataUpdateCount=0,this.statsListener_=null,this.eventQueue_=new SE,this.nextWriteId_=1,this.interceptServerDataCallback_=null,this.onDisconnect_=No(),this.transactionQueueTree_=new Hc,this.persistentConnection_=null,this.key=this.repoInfo_.toURLString()}toString(){return(this.repoInfo_.secure?"https://":"http://")+this.repoInfo_.host}}function PE(t,e,n){if(t.stats_=Ec(t.repoInfo_),t.forceRestClient_||oC())t.server_=new So(t.repoInfo_,(r,i,s,o)=>{lf(t,r,i,s,o)},t.authTokenProvider_,t.appCheckProvider_),setTimeout(()=>af(t,!0),0);else{if(typeof n<"u"&&n!==null){if(typeof n!="object")throw new Error("Only objects are supported for option databaseAuthVariableOverride");try{pe(n)}catch(r){throw new Error("Invalid authOverride provided: "+r)}}t.persistentConnection_=new Pt(t.repoInfo_,e,(r,i,s,o)=>{lf(t,r,i,s,o)},r=>{af(t,r)},r=>{RE(t,r)},t.authTokenProvider_,t.appCheckProvider_,n),t.server_=t.persistentConnection_}t.authTokenProvider_.addTokenChangeListener(r=>{t.server_.refreshAuthToken(r)}),t.appCheckProvider_.addTokenChangeListener(r=>{t.server_.refreshAppCheckToken(r.token)}),t.statsReporter_=dC(t.repoInfo_,()=>new c1(t.stats_,t.server_)),t.infoData_=new s1,t.infoSyncTree_=new sf({startListening:(r,i,s,o)=>{let l=[];const a=t.infoData_.getNode(r._path);return a.isEmpty()||(l=os(t.infoSyncTree_,r._path,a),setTimeout(()=>{o("ok")},0)),l},stopListening:()=>{}}),qc(t,"connected",!1),t.serverSyncTree_=new sf({startListening:(r,i,s,o)=>(t.server_.listen(r,s,i,(l,a)=>{const u=o(l,a);it(t.eventQueue_,r._path,u)}),[]),stopListening:(r,i)=>{t.server_.unlisten(r,i)}})}function ov(t){const n=t.infoData_.getNode(new G(".info/serverTimeOffset")).val()||0;return new Date().getTime()+n}function ul(t){return cE({timestamp:ov(t)})}function lf(t,e,n,r,i){t.dataUpdateCount++;const s=new G(e);n=t.interceptServerDataCallback_?t.interceptServerDataCallback_(e,n):n;let o=[];if(i)if(r){const a=yo(n,u=>fe(u));o=iE(t.serverSyncTree_,s,a,i)}else{const a=fe(n);o=Qg(t.serverSyncTree_,s,a,i)}else if(r){const a=yo(n,u=>fe(u));o=tE(t.serverSyncTree_,s,a)}else{const a=fe(n);o=os(t.serverSyncTree_,s,a)}let l=s;o.length>0&&(l=Pr(t,s)),it(t.eventQueue_,l,o)}function af(t,e){qc(t,"connected",e),e===!1&&DE(t)}function RE(t,e){Se(e,(n,r)=>{qc(t,n,r)})}function qc(t,e,n){const r=new G("/.info/"+e),i=fe(n);t.infoData_.updateSnapshot(r,i);const s=os(t.infoSyncTree_,r,i);it(t.eventQueue_,r,s)}function Yc(t){return t.nextWriteId_++}function jE(t,e,n){const r=sE(t.serverSyncTree_,e);return r!=null?Promise.resolve(r):t.server_.get(e).then(i=>{const s=fe(i).withIndex(e._queryParams.getIndex());hu(t.serverSyncTree_,e,n,!0);let o;if(e._queryParams.loadsAllData())o=os(t.serverSyncTree_,e._path,s);else{const l=Hi(t.serverSyncTree_,e);o=Qg(t.serverSyncTree_,e._path,s,l)}return it(t.eventQueue_,e._path,o),Oo(t.serverSyncTree_,e,n,null,!0),s},i=>(as(t,"get for query "+pe(e)+" failed: "+i),Promise.reject(new Error(i))))}function bE(t,e,n,r,i){as(t,"set",{path:e.toString(),value:n,priority:r});const s=ul(t),o=fe(n,r),l=Fc(t.serverSyncTree_,e),a=Xg(o,l,s),u=Yc(t),h=Hg(t.serverSyncTree_,e,a,u,!0);al(t.eventQueue_,h),t.server_.put(e.toString(),o.val(!0),(f,v)=>{const y=f==="ok";y||be("set at "+e+" failed: "+f);const _=qt(t.serverSyncTree_,u,!y);it(t.eventQueue_,e,_),pu(t,i,f,v)});const d=Jc(t,e);Pr(t,d),it(t.eventQueue_,d,[])}function OE(t,e,n,r){as(t,"update",{path:e.toString(),value:n});let i=!0;const s=ul(t),o={};if(Se(n,(l,a)=>{i=!1,o[l]=Yg(le(e,l),fe(a),t.serverSyncTree_,s)}),i)we("update() called with empty data.  Don't do anything."),pu(t,r,"ok",void 0);else{const l=Yc(t),a=eE(t.serverSyncTree_,e,o,l);al(t.eventQueue_,a),t.server_.merge(e.toString(),n,(u,h)=>{const d=u==="ok";d||be("update at "+e+" failed: "+u);const f=qt(t.serverSyncTree_,l,!d),v=f.length>0?Pr(t,e):e;it(t.eventQueue_,v,f),pu(t,r,u,h)}),Se(n,u=>{const h=Jc(t,le(e,u));Pr(t,h)}),it(t.eventQueue_,e,[])}}function DE(t){as(t,"onDisconnectEvents");const e=ul(t),n=No();ou(t.onDisconnect_,$(),(i,s)=>{const o=Yg(i,s,t.serverSyncTree_,e);Rg(n,i,o)});let r=[];ou(n,$(),(i,s)=>{r=r.concat(os(t.serverSyncTree_,i,s));const o=Jc(t,i);Pr(t,o)}),t.onDisconnect_=No(),it(t.eventQueue_,$(),r)}function AE(t,e,n){let r;M(e._path)===".info"?r=hu(t.infoSyncTree_,e,n):r=hu(t.serverSyncTree_,e,n),iv(t.eventQueue_,e._path,r)}function uf(t,e,n){let r;M(e._path)===".info"?r=Oo(t.infoSyncTree_,e,n):r=Oo(t.serverSyncTree_,e,n),iv(t.eventQueue_,e._path,r)}function LE(t){t.persistentConnection_&&t.persistentConnection_.interrupt(kE)}function as(t,...e){let n="";t.persistentConnection_&&(n=t.persistentConnection_.id+":"),we(n,...e)}function pu(t,e,n,r){e&&Ar(()=>{if(n==="ok")e(null);else{const i=(n||"error").toUpperCase();let s=i;r&&(s+=": "+r);const o=new Error(s);o.code=i,e(o)}})}function lv(t,e,n){return Fc(t.serverSyncTree_,e,n)||O.EMPTY_NODE}function Xc(t,e=t.transactionQueueTree_){if(e||cl(t,e),Mr(e)){const n=uv(t,e);N(n.length>0,"Sending zero length transaction queue"),n.every(i=>i.status===0)&&ME(t,ls(e),n)}else Zg(e)&&ol(e,n=>{Xc(t,n)})}function ME(t,e,n){const r=n.map(u=>u.currentWriteId),i=lv(t,e,r);let s=i;const o=i.hash();for(let u=0;u<n.length;u++){const h=n[u];N(h.status===0,"tryToSendTransactionQueue_: items in queue should all be run."),h.status=1,h.retryCount++;const d=Re(e,h.path);s=s.updateChild(d,h.currentOutputSnapshotRaw)}const l=s.val(!0),a=e;t.server_.put(a.toString(),l,u=>{as(t,"transaction put response",{path:a.toString(),status:u});let h=[];if(u==="ok"){const d=[];for(let f=0;f<n.length;f++)n[f].status=2,h=h.concat(qt(t.serverSyncTree_,n[f].currentWriteId)),n[f].onComplete&&d.push(()=>n[f].onComplete(null,!0,n[f].currentOutputSnapshotResolved)),n[f].unwatcher();cl(t,Qc(t.transactionQueueTree_,e)),Xc(t,t.transactionQueueTree_),it(t.eventQueue_,e,h);for(let f=0;f<d.length;f++)Ar(d[f])}else{if(u==="datastale")for(let d=0;d<n.length;d++)n[d].status===3?n[d].status=4:n[d].status=0;else{be("transaction at "+a.toString()+" failed: "+u);for(let d=0;d<n.length;d++)n[d].status=4,n[d].abortReason=u}Pr(t,e)}},o)}function Pr(t,e){const n=av(t,e),r=ls(n),i=uv(t,n);return FE(t,i,r),r}function FE(t,e,n){if(e.length===0)return;const r=[];let i=[];const o=e.filter(l=>l.status===0).map(l=>l.currentWriteId);for(let l=0;l<e.length;l++){const a=e[l],u=Re(n,a.path);let h=!1,d;if(N(u!==null,"rerunTransactionsUnderNode_: relativePath should not be null."),a.status===4)h=!0,d=a.abortReason,i=i.concat(qt(t.serverSyncTree_,a.currentWriteId,!0));else if(a.status===0)if(a.retryCount>=IE)h=!0,d="maxretry",i=i.concat(qt(t.serverSyncTree_,a.currentWriteId,!0));else{const f=lv(t,a.path,o);a.currentInputSnapshot=f;const v=e[l].update(f.val());if(v!==void 0){ll("transaction failed: Data returned ",v,a.path);let y=fe(v);typeof v=="object"&&v!=null&&wt(v,".priority")||(y=y.updatePriority(f.getPriority()));const E=a.currentWriteId,m=ul(t),p=Xg(y,f,m);a.currentOutputSnapshotRaw=y,a.currentOutputSnapshotResolved=p,a.currentWriteId=Yc(t),o.splice(o.indexOf(E),1),i=i.concat(Hg(t.serverSyncTree_,a.path,p,a.currentWriteId,a.applyLocally)),i=i.concat(qt(t.serverSyncTree_,E,!0))}else h=!0,d="nodata",i=i.concat(qt(t.serverSyncTree_,a.currentWriteId,!0))}it(t.eventQueue_,n,i),i=[],h&&(e[l].status=2,function(f){setTimeout(f,Math.floor(0))}(e[l].unwatcher),e[l].onComplete&&(d==="nodata"?r.push(()=>e[l].onComplete(null,!1,e[l].currentInputSnapshot)):r.push(()=>e[l].onComplete(new Error(d),!1,null))))}cl(t,t.transactionQueueTree_);for(let l=0;l<r.length;l++)Ar(r[l]);Xc(t,t.transactionQueueTree_)}function av(t,e){let n,r=t.transactionQueueTree_;for(n=M(e);n!==null&&Mr(r)===void 0;)r=Qc(r,n),e=Y(e),n=M(e);return r}function uv(t,e){const n=[];return cv(t,e,n),n.sort((r,i)=>r.order-i.order),n}function cv(t,e,n){const r=Mr(e);if(r)for(let i=0;i<r.length;i++)n.push(r[i]);ol(e,i=>{cv(t,i,n)})}function cl(t,e){const n=Mr(e);if(n){let r=0;for(let i=0;i<n.length;i++)n[i].status!==2&&(n[r]=n[i],r++);n.length=r,Jg(e,n.length>0?n:void 0)}ol(e,r=>{cl(t,r)})}function Jc(t,e){const n=ls(av(t,e)),r=Qc(t.transactionQueueTree_,e);return pE(r,i=>{Yl(t,i)}),Yl(t,r),ev(r,i=>{Yl(t,i)}),n}function Yl(t,e){const n=Mr(e);if(n){const r=[];let i=[],s=-1;for(let o=0;o<n.length;o++)n[o].status===3||(n[o].status===1?(N(s===o-1,"All SENT items should be at beginning of queue."),s=o,n[o].status=3,n[o].abortReason="set"):(N(n[o].status===0,"Unexpected transaction status in abort"),n[o].unwatcher(),i=i.concat(qt(t.serverSyncTree_,n[o].currentWriteId,!0)),n[o].onComplete&&r.push(n[o].onComplete.bind(null,new Error("set"),!1,null))));s===-1?Jg(e,void 0):n.length=s+1,it(t.eventQueue_,ls(e),i);for(let o=0;o<r.length;o++)Ar(r[o])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function zE(t){let e="";const n=t.split("/");for(let r=0;r<n.length;r++)if(n[r].length>0){let i=n[r];try{i=decodeURIComponent(i.replace(/\+/g," "))}catch{}e+="/"+i}return e}function UE(t){const e={};t.charAt(0)==="?"&&(t=t.substring(1));for(const n of t.split("&")){if(n.length===0)continue;const r=n.split("=");r.length===2?e[decodeURIComponent(r[0])]=decodeURIComponent(r[1]):be(`Invalid query segment '${n}' in query '${t}'`)}return e}const cf=function(t,e){const n=BE(t),r=n.namespace;n.domain==="firebase.com"&&At(n.host+" is no longer supported. Please use <YOUR FIREBASE>.firebaseio.com instead"),(!r||r==="undefined")&&n.domain!=="localhost"&&At("Cannot parse Firebase url. Please use https://<YOUR FIREBASE>.firebaseio.com"),n.secure||Xw();const i=n.scheme==="ws"||n.scheme==="wss";return{repoInfo:new fg(n.host,n.secure,r,i,e,"",r!==n.subdomain),path:new G(n.pathString)}},BE=function(t){let e="",n="",r="",i="",s="",o=!0,l="https",a=443;if(typeof t=="string"){let u=t.indexOf("//");u>=0&&(l=t.substring(0,u-1),t=t.substring(u+2));let h=t.indexOf("/");h===-1&&(h=t.length);let d=t.indexOf("?");d===-1&&(d=t.length),e=t.substring(0,Math.min(h,d)),h<d&&(i=zE(t.substring(h,d)));const f=UE(t.substring(Math.min(t.length,d)));u=e.indexOf(":"),u>=0?(o=l==="https"||l==="wss",a=parseInt(e.substring(u+1),10)):u=e.length;const v=e.slice(0,u);if(v.toLowerCase()==="localhost")n="localhost";else if(v.split(".").length<=2)n=v;else{const y=e.indexOf(".");r=e.substring(0,y).toLowerCase(),n=e.substring(y+1),s=r}"ns"in f&&(s=f.ns)}return{host:e,port:a,domain:n,subdomain:r,secure:o,scheme:l,pathString:i,namespace:s}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const df="-0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ_abcdefghijklmnopqrstuvwxyz",WE=function(){let t=0;const e=[];return function(n){const r=n===t;t=n;let i;const s=new Array(8);for(i=7;i>=0;i--)s[i]=df.charAt(n%64),n=Math.floor(n/64);N(n===0,"Cannot push at time == 0");let o=s.join("");if(r){for(i=11;i>=0&&e[i]===63;i--)e[i]=0;e[i]++}else for(i=0;i<12;i++)e[i]=Math.floor(Math.random()*64);for(i=0;i<12;i++)o+=df.charAt(e[i]);return N(o.length===20,"nextPushId: Length should be 20."),o}}();/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $E{constructor(e,n,r,i){this.eventType=e,this.eventRegistration=n,this.snapshot=r,this.prevName=i}getPath(){const e=this.snapshot.ref;return this.eventType==="value"?e._path:e.parent._path}getEventType(){return this.eventType}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.getPath().toString()+":"+this.eventType+":"+pe(this.snapshot.exportVal())}}class VE{constructor(e,n,r){this.eventRegistration=e,this.error=n,this.path=r}getPath(){return this.path}getEventType(){return"cancel"}getEventRunner(){return this.eventRegistration.getEventRunner(this)}toString(){return this.path.toString()+":cancel"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dv{constructor(e,n){this.snapshotCallback=e,this.cancelCallback=n}onValue(e,n){this.snapshotCallback.call(null,e,n)}onCancel(e){return N(this.hasCancelCallback,"Raising a cancel event on a listener with no cancel callback"),this.cancelCallback.call(null,e)}get hasCancelCallback(){return!!this.cancelCallback}matches(e){return this.snapshotCallback===e.snapshotCallback||this.snapshotCallback.userCallback!==void 0&&this.snapshotCallback.userCallback===e.snapshotCallback.userCallback&&this.snapshotCallback.context===e.snapshotCallback.context}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zc{constructor(e,n,r,i){this._repo=e,this._path=n,this._queryParams=r,this._orderByCalled=i}get key(){return z(this._path)?null:Nc(this._path)}get ref(){return new Ft(this._repo,this._path)}get _queryIdentifier(){const e=Kh(this._queryParams),n=wc(e);return n==="{}"?"default":n}get _queryObject(){return Kh(this._queryParams)}isEqual(e){if(e=$n(e),!(e instanceof Zc))return!1;const n=this._repo===e._repo,r=kc(this._path,e._path),i=this._queryIdentifier===e._queryIdentifier;return n&&r&&i}toJSON(){return this.toString()}toString(){return this._repo.toString()+DC(this._path)}}class Ft extends Zc{constructor(e,n){super(e,n,new Rc,!1)}get parent(){const e=Cg(this._path);return e===null?null:new Ft(this._repo,e)}get root(){let e=this;for(;e.parent!==null;)e=e.parent;return e}}class Qi{constructor(e,n,r){this._node=e,this.ref=n,this._index=r}get priority(){return this._node.getPriority().val()}get key(){return this.ref.key}get size(){return this._node.numChildren()}child(e){const n=new G(e),r=Gi(this.ref,e);return new Qi(this._node.getChild(n),r,ae)}exists(){return!this._node.isEmpty()}exportVal(){return this._node.val(!0)}forEach(e){return this._node.isLeafNode()?!1:!!this._node.forEachChild(this._index,(r,i)=>e(new Qi(i,Gi(this.ref,r),ae)))}hasChild(e){const n=new G(e);return!this._node.getChild(n).isEmpty()}hasChildren(){return this._node.isLeafNode()?!1:!this._node.isEmpty()}toJSON(){return this.exportVal()}val(){return this._node.val()}}function us(t,e){return t=$n(t),t._checkNotDeleted("ref"),e!==void 0?Gi(t._root,e):t._root}function Gi(t,e){return t=$n(t),M(t._path)===null?CE("child","path",e):rv("child","path",e),new Ft(t._repo,le(t._path,e))}function HE(t,e){t=$n(t),Kc("push",t._path),nv("push",e,t._path,!0);const n=ov(t._repo),r=WE(n),i=Gi(t,r),s=Gi(t,r);let o;return o=Promise.resolve(s),i.then=o.then.bind(o),i.catch=o.then.bind(o,void 0),i}function QE(t){return Kc("remove",t._path),hv(t,null)}function hv(t,e){t=$n(t),Kc("set",t._path),nv("set",e,t._path,!1);const n=new ts;return bE(t._repo,t._path,e,null,n.wrapCallback(()=>{})),n.promise}function GE(t,e){wE("update",e,t._path);const n=new ts;return OE(t._repo,t._path,e,n.wrapCallback(()=>{})),n.promise}function KE(t){t=$n(t);const e=new dv(()=>{}),n=new dl(e);return jE(t._repo,t,n).then(r=>new Qi(r,new Ft(t._repo,t._path),t._queryParams.getIndex()))}class dl{constructor(e){this.callbackContext=e}respondsTo(e){return e==="value"}createEvent(e,n){const r=n._queryParams.getIndex();return new $E("value",this,new Qi(e.snapshotNode,new Ft(n._repo,n._path),r))}getEventRunner(e){return e.getEventType()==="cancel"?()=>this.callbackContext.onCancel(e.error):()=>this.callbackContext.onValue(e.snapshot,null)}createCancelEvent(e,n){return this.callbackContext.hasCancelCallback?new VE(this,e,n):null}matches(e){return e instanceof dl?!e.callbackContext||!this.callbackContext?!0:e.callbackContext.matches(this.callbackContext):!1}hasAnyCallback(){return this.callbackContext!==null}}function qE(t,e,n,r,i){let s;if(typeof r=="object"&&(s=void 0,i=r),typeof r=="function"&&(s=r),i&&i.onlyOnce){const a=n,u=(h,d)=>{uf(t._repo,t,l),a(h,d)};u.userCallback=n.userCallback,u.context=n.context,n=u}const o=new dv(n,s||void 0),l=new dl(o);return AE(t._repo,t,l),()=>uf(t._repo,t,l)}function YE(t,e,n,r){return qE(t,"value",e,n,r)}Q1(Ft);X1(Ft);/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const XE="FIREBASE_DATABASE_EMULATOR_HOST",mu={};let JE=!1;function ZE(t,e,n,r){t.repoInfo_=new fg(`${e}:${n}`,!1,t.repoInfo_.namespace,t.repoInfo_.webSocketOnly,t.repoInfo_.nodeAdmin,t.repoInfo_.persistenceKey,t.repoInfo_.includeNamespaceInQueryParams,!0),r&&(t.authTokenProvider_=r)}function eS(t,e,n,r,i){let s=r||t.options.databaseURL;s===void 0&&(t.options.projectId||At("Can't determine Firebase Database URL. Be sure to include  a Project ID when calling firebase.initializeApp()."),we("Using default host for project ",t.options.projectId),s=`${t.options.projectId}-default-rtdb.firebaseio.com`);let o=cf(s,i),l=o.repoInfo,a;typeof process<"u"&&Rh&&(a=Rh[XE]),a?(s=`http://${a}?ns=${l.namespace}`,o=cf(s,i),l=o.repoInfo):o.repoInfo.secure;const u=new aC(t.name,t.options,e);EE("Invalid Firebase Database URL",o),z(o.path)||At("Database URL must point to the root of a Firebase Database (not including a child path).");const h=nS(l,t,u,new lC(t.name,n));return new rS(h,t)}function tS(t,e){const n=mu[e];(!n||n[t.key]!==t)&&At(`Database ${e}(${t.repoInfo_}) has already been deleted.`),LE(t),delete n[t.key]}function nS(t,e,n,r){let i=mu[e.name];i||(i={},mu[e.name]=i);let s=i[t.toURLString()];return s&&At("Database initialized multiple times. Please make sure the format of the database URL matches with each database() call."),s=new TE(t,JE,n,r),i[t.toURLString()]=s,s}class rS{constructor(e,n){this._repoInternal=e,this.app=n,this.type="database",this._instanceStarted=!1}get _repo(){return this._instanceStarted||(PE(this._repoInternal,this.app.options.appId,this.app.options.databaseAuthVariableOverride),this._instanceStarted=!0),this._repoInternal}get _root(){return this._rootInternal||(this._rootInternal=new Ft(this._repo,$())),this._rootInternal}_delete(){return this._rootInternal!==null&&(tS(this._repo,this.app.name),this._repoInternal=null,this._rootInternal=null),Promise.resolve()}_checkNotDeleted(e){this._rootInternal===null&&At("Cannot call "+e+" on a deleted database.")}}function iS(t=Ow(),e){const n=Pw(t,"database").getImmediate({identifier:e});if(!n._instanceStarted){const r=yx("database");r&&sS(n,...r)}return n}function sS(t,e,n,r={}){t=$n(t),t._checkNotDeleted("useEmulator"),t._instanceStarted&&At("Cannot call useEmulator() after instance has already been initialized.");const i=t._repoInternal;let s;if(i.repoInfo_.nodeAdmin)r.mockUserToken&&At('mockUserToken is not supported by the Admin SDK. For client access with mock users, please use the "firebase" package instead of "firebase-admin".'),s=new Vs(Vs.OWNER);else if(r.mockUserToken){const o=typeof r.mockUserToken=="string"?r.mockUserToken:_x(r.mockUserToken,t.app.options.projectId);s=new Vs(o)}ZE(i,e,n,s)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oS(t){Hw(bw),xo(new Mi("database",(e,{instanceIdentifier:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("auth-internal"),s=e.getProvider("app-check-internal");return eS(r,i,s,n)},"PUBLIC").setMultipleInstances(!0)),pr(jh,bh,t),pr(jh,bh,"esm2017")}Pt.prototype.simpleListen=function(t,e){this.sendRequest("q",{p:t},e)};Pt.prototype.echo=function(t,e){this.sendRequest("echo",{d:t},e)};oS();const lS={apiKey:"AIzaSyAhuOO-9ifGREkqMF6JNQcl5LPjHvVwRyc",authDomain:"online-shop-21f83.firebaseapp.com",databaseURL:"https://online-shop-21f83-default-rtdb.firebaseio.com",projectId:"online-shop-21f83",storageBucket:"online-shop-21f83.appspot.com",messagingSenderId:"1043265038518",appId:"1:1043265038518:web:ee3ef45664e4e4c5895e17"},aS=Ym(lS),cs=iS(aS),ds=(t,e,n)=>(console.error(`Firebase error during ${n}:`,t),t.message&&t.message.includes("Permission denied")&&(console.warn(`Firebase permission denied during ${n}. Please check your Firebase security rules.`),console.warn("You may need to update your Firebase security rules to allow read/write access."),console.warn('Example rules for development: { "rules": { ".read": true, ".write": true } }')),e),uS=async t=>{console.log("Saving order to Firebase:",t);try{const e=us(cs,"orders"),n=HE(e);return await hv(n,{...t,firebaseId:n.key,timestamp:Date.now()}),console.log("Order saved to Firebase successfully with ID:",t.id),t.id}catch(e){throw ds(e,null,"saveOrder"),e}},cS=async()=>{console.log("Getting orders from Firebase");try{const t=us(cs,"orders"),e=await KE(t);if(e.exists()){const n=e.val(),r=Object.keys(n).map(i=>({...n[i],firebaseKey:i}));return console.log(`Retrieved ${r.length} orders from Firebase`),r}return console.log("No orders found in Firebase"),[]}catch(t){return ds(t,[],"getOrdersOnce")}},dS=t=>{console.log("Setting up real-time listener for orders");try{const e=us(cs,"orders");return YE(e,r=>{if(console.log("Received order update from Firebase"),r.exists()){const i=r.val(),s=Object.keys(i).map(o=>({...i[o],firebaseKey:o}));console.log(`Real-time update: ${s.length} orders from Firebase`),t(s)}else console.log("No orders found in Firebase (real-time update)"),t([])},r=>{console.error("Error in Firebase real-time listener:",r),t([])})}catch(e){return ds(e,null,"listenToOrders"),()=>{}}},hS=async(t,e,n)=>{console.log(`Updating order ${t} status to ${e}`);try{const r=us(cs,`orders/${n}`);return await GE(r,{status:e}),console.log(`Order ${t} status updated successfully`),!0}catch(r){throw ds(r,!1,"updateOrderStatus"),r}},fS=async t=>{console.log(`Deleting order with Firebase key: ${t}`);try{const e=us(cs,`orders/${t}`);return await QE(e),console.log("Order deleted successfully"),!0}catch(e){throw ds(e,!1,"deleteOrder"),e}},Ki={_origin:"https://api.emailjs.com"},pS=(t,e="https://api.emailjs.com")=>{Ki._userID=t,Ki._origin=e},fv=(t,e,n)=>{if(!t)throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e)throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!n)throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates";return!0};class hf{constructor(e){this.status=e?e.status:0,this.text=e?e.responseText:"Network Error"}}const pv=(t,e,n={})=>new Promise((r,i)=>{const s=new XMLHttpRequest;s.addEventListener("load",({target:o})=>{const l=new hf(o);l.status===200||l.text==="OK"?r(l):i(l)}),s.addEventListener("error",({target:o})=>{i(new hf(o))}),s.open("POST",Ki._origin+t,!0),Object.keys(n).forEach(o=>{s.setRequestHeader(o,n[o])}),s.send(e)}),mS=(t,e,n,r)=>{const i=r||Ki._userID;return fv(i,t,e),pv("/api/v1.0/email/send",JSON.stringify({lib_version:"3.12.1",user_id:i,service_id:t,template_id:e,template_params:n}),{"Content-type":"application/json"})},gS=t=>{let e;if(typeof t=="string"?e=document.querySelector(t):e=t,!e||e.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of form";return e},vS=(t,e,n,r)=>{const i=r||Ki._userID,s=gS(n);fv(i,t,e);const o=new FormData(s);return o.append("lib_version","3.12.1"),o.append("service_id",t),o.append("template_id",e),o.append("user_id",i),pv("/api/v1.0/email/send-form",o)},gu={init:pS,send:mS,sendForm:vS},yS=()=>{const t=JSON.parse(localStorage.getItem("store_orders")||"[]");let e=0;return t.forEach(n=>{const r=n.id&&n.id.match(/ORDER-(\d+)/);if(r&&r[1]){const i=parseInt(r[1],10);i>e&&(e=i)}}),e+1};function _S(){const t=es(),[e,n]=x.useState([]),[r,i]=x.useState(0),{showToast:s}=vc(),[o,l]=x.useState(!1),[a,u]=x.useState({name:"",email:"",phone:"",address:"",city:"",deliveryDate:"",deliveryTime:"",notes:""});x.useEffect(()=>{const f=Tt();if(f.length===0){t("/cart");return}n(f),i(f.reduce((v,y)=>v+y.price*y.quantity,0))},[t]);const h=f=>{const{name:v,value:y}=f.target;u(_=>({..._,[v]:y}))},d=async f=>{f.preventDefault(),l(!0);const v=yS();console.log("Generated order number:",v);const y={id:`ORDER-${v}`,items:e,total:r,...a,status:"חדש",createdAt:new Date().toISOString()};console.log("Created order with ID:",y.id);try{console.log("Submitting order:",y),console.log("Saving order to Firebase..."),await uS(y),console.log("Order saved to Firebase successfully"),console.log("Saving order to localStorage...");const _=JSON.parse(localStorage.getItem("store_orders")||"[]");_.push(y),Kn(_),console.log("Order saved to localStorage successfully");const E=y.items.map(C=>`${C.name} x${C.quantity} - ₪${C.price*C.quantity}`).join(`
`),m=Math.round(y.total),p={order_id:y.id,customer_name:y.name,customer_email:y.email,customer_phone:y.phone,delivery_address:`${y.address}, ${y.city}`,delivery_date:new Date(y.deliveryDate).toLocaleDateString("he-IL"),delivery_time:y.deliveryTime,items:E,total:`₪${m}`,notes:y.notes||"אין הערות"};console.log("Sending email to store owner..."),await gu.send("service_scvfp6q","template_jqnqrmr",{to_email:"netamal3134@gmail.com",subject:`הזמנה חדשה ${y.id}`,...p},"wdkhxkDvY1CBqWjhm"),console.log("Email sent to store owner successfully"),console.log("Sending confirmation email to customer...");const g={to_name:a.name,to_email:a.email,reply_to:"netamal3134@gmail.com",from_name:"החנות האונליין",customer_email:a.email,customer_name:a.name,subject:`אישור הזמנה ${y.id}`,order_id:y.id,delivery_date:new Date(y.deliveryDate).toLocaleDateString("he-IL"),delivery_time:y.deliveryTime,delivery_address:`${y.address}, ${y.city}`,items:E,total:`₪${m}`,notes:y.notes||"אין הערות"};await gu.send("service_scvfp6q","template_9gyc9gb",g,"wdkhxkDvY1CBqWjhm"),console.log("Confirmation email sent to customer successfully"),console.log("Clearing cart and redirecting to success page..."),rx(),t("/order-success",{state:{orderId:y.id}})}catch(_){console.error("Error processing order:",_),s("אירעה שגיאה בעיבוד ההזמנה. אנא נסה שוב מאוחר יותר.","error")}finally{l(!1)}};return c.jsxs("div",{className:"max-w-2xl mx-auto space-y-8",children:[c.jsx("h2",{className:"text-2xl font-bold",children:"השלמת הזמנה"}),c.jsxs("form",{onSubmit:d,className:"space-y-6",children:[c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"פרטים אישיים"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"שם מלא"}),c.jsx("input",{type:"text",name:"name",value:a.name,onChange:h,required:!0,className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"אימייל"}),c.jsx("input",{type:"email",name:"email",value:a.email,onChange:h,required:!0,className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"טלפון"}),c.jsx("input",{type:"tel",name:"phone",value:a.phone,onChange:h,required:!0,className:"input-field"})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"פרטי משלוח"}),c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"כתובת מלאה"}),c.jsx("input",{type:"text",name:"address",value:a.address,onChange:h,required:!0,className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"עיר"}),c.jsx("input",{type:"text",name:"city",value:a.city,onChange:h,required:!0,className:"input-field"})]}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"תאריך משלוח"}),c.jsx("input",{type:"date",name:"deliveryDate",value:a.deliveryDate,onChange:h,required:!0,min:new Date().toISOString().split("T")[0],className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"שעת משלוח"}),c.jsxs("select",{name:"deliveryTime",value:a.deliveryTime,onChange:h,required:!0,className:"input-field",children:[c.jsx("option",{value:"",children:"בחר שעה"}),c.jsx("option",{value:"09:00-12:00",children:"09:00-12:00"}),c.jsx("option",{value:"12:00-15:00",children:"12:00-15:00"}),c.jsx("option",{value:"15:00-18:00",children:"15:00-18:00"}),c.jsx("option",{value:"18:00-21:00",children:"18:00-21:00"})]})]})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"סיכום הזמנה"}),c.jsxs("div",{className:"space-y-4",children:[e.map(f=>c.jsxs("div",{className:"flex justify-between",children:[c.jsxs("span",{children:[f.name," x",f.quantity]}),c.jsxs("span",{children:["₪",Math.round(f.price*f.quantity)]})]},f.id)),c.jsx("div",{className:"border-t pt-4",children:c.jsxs("div",{className:"flex justify-between font-bold",children:[c.jsx("span",{children:'סה"כ לתשלום'}),c.jsxs("span",{children:["₪",Math.round(r)]})]})})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:"הערות נוספות"}),c.jsx("textarea",{name:"notes",value:a.notes,onChange:h,rows:"4",className:"input-field",placeholder:"הוסף הערות או הנחיות מיוחדות למשלוח..."})]}),c.jsx("button",{type:"submit",className:"btn-primary w-full",disabled:o,children:o?"מעבד הזמנה...":"אשר הזמנה"})]})]})}function xS(){var r;const t=es(),n=(r=Wn().state)==null?void 0:r.orderId;return x.useEffect(()=>{Tt().length>0&&t("/cart")},[t]),c.jsx("div",{className:"text-center py-16",children:c.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-md max-w-md mx-auto",children:[c.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:c.jsx("svg",{className:"w-8 h-8 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),c.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"תודה על ההזמנה!"}),n&&c.jsx("div",{className:"bg-blue-50 p-4 rounded-lg mb-6",children:c.jsxs("p",{className:"text-blue-800 font-medium",children:["מספר הזמנה: ",n]})}),c.jsx("p",{className:"text-gray-600 mb-8",children:"ההזמנה שלך התקבלה בהצלחה. נשלח לך אימייל עם פרטי ההזמנה. המשלוח יגיע בתאריך ובשעה שבחרת. התשלום יתבצע במזומן בעת המסירה."}),c.jsxs("div",{className:"space-y-4",children:[c.jsx(Ze,{to:"/products",className:"btn-primary block",children:"המשך לקנייה"}),c.jsx(Ze,{to:"/",className:"btn-secondary block",children:"חזרה לדף הבית"})]})]})})}const wS="dkzcfqzv9",CS=t=>{if(window.cloudinary)ff(t);else{const e=document.createElement("script");e.src="https://upload-widget.cloudinary.com/global/all.js",e.async=!0,document.body.appendChild(e),e.onload=()=>{ff(t)}}},ff=t=>{const e={cloudName:wS,uploadPreset:"product_images",sources:["local","url","camera"],multiple:!1,cropping:!0,croppingAspectRatio:1,maxFileSize:5e6,folder:"product-images",clientAllowedFormats:["jpg","jpeg","png","webp"],language:"he",text:{he:{menu:{files:"מהמחשב שלי",url:"מכתובת אינטרנט",camera:"מצלמה"},local:{browse:"בחר קובץ",dd_title_single:"גרור ושחרר תמונה לכאן",dd_title_multi:"גרור ושחרר תמונות לכאן",drop_title_single:"גרור ושחרר תמונה להעלאה",drop_title_multiple:"גרור ושחרר תמונות להעלאה"},queue:{title:"תור העלאה",title_uploading_with_counter:"מעלה {{num}} קבצים",title_uploading:"מעלה קבצים",done:"הועלה בהצלחה",upload_more:"העלה עוד"},crop:{title:"חיתוך תמונה",crop_btn:"חתוך",skip_btn:"דלג",reset_btn:"אפס",close_btn:"סגור"}}}};window.cloudinary.createUploadWidget(e,(r,i)=>{!r&&i&&i.event==="success"&&t(i.info),r&&console.error("Cloudinary upload error:",r)}).open()},ES=t=>{if(!t||!t.includes("cloudinary.com"))return null;const e=t.split("/");e[e.length-1];const n=e.slice(-2).join("/");return n.substring(0,n.lastIndexOf("."))};function SS(){const[t,e]=x.useState("products"),[n,r]=x.useState([]),[i,s]=x.useState([]),[o,l]=x.useState([]),[a,u]=x.useState(null),[h,d]=x.useState(null),[f,v]=x.useState({name:"",description:"",price:"",image:"",categoryId:"",imagePublicId:""}),[y,_]=x.useState(""),[E,m]=x.useState({field:"id",direction:"desc"}),[p,g]=x.useState("all"),[C,k]=x.useState(""),[j,T]=x.useState(null);x.useEffect(()=>{b(),console.log("Setting up Firebase listener in Admin component");let w=null;try{w=dS(I=>{console.log("Received orders update in Admin component:",I),I&&I.length>0&&(l(I),Kn(I),T(null))})}catch(I){console.error("Error setting up Firebase listener:",I),T("Failed to connect to the orders database. Please check your internet connection and Firebase configuration.")}return()=>{console.log("Cleaning up Firebase listener"),w&&w()}},[]);const b=async()=>{r(Xo()),s(Jo());try{console.log("Attempting to load orders from Firebase");const w=await cS();if(console.log("Orders from Firebase:",w),w&&w.length>0)l(w),Kn(w),T(null);else{console.log("No orders in Firebase, falling back to localStorage");const I=vh();l(I)}}catch(w){console.error("Error loading orders from Firebase:",w),T("Failed to load orders from the database. Please check your internet connection and Firebase configuration.");const I=vh();l(I)}},te=(w,I,V)=>{console.log(`Changing order ${w} status to ${I}`),hS(w,I,V).then(()=>{console.log(`Order ${w} status updated to ${I} in Firebase`),T(null)}).catch(Ae=>{console.error("Error updating order status in Firebase:",Ae),T("Failed to update order status in the database. The change was applied locally only.")});const H=o.map(Ae=>Ae.id===w?{...Ae,status:I}:Ae);l(H),Kn(H)},A=w=>{const I=E.field===w&&E.direction==="asc"?"desc":"asc";m({field:w,direction:I})},We=async(w,I)=>{if(window.confirm("האם אתה בטוח שברצונך למחוק הזמנה זו?"))try{await fS(I);const V=o.filter(H=>H.id!==w);l(V),Kn(V),T(null)}catch(V){console.error("Error deleting order:",V),T("שגיאה במחיקת ההזמנה. ההזמנה נמחקה מהתצוגה המקומית בלבד.");const H=o.filter(Ae=>Ae.id!==w);l(H),Kn(H)}},zt=()=>{let w=o;return C.trim()&&(w=o.filter(I=>I.id.toString().includes(C.trim()))),p!=="all"&&(w=w.filter(I=>I.status===p)),[...w].sort((I,V)=>{let H=0;return E.field==="id"?H=parseInt(I.id)-parseInt(V.id):E.field==="date"?H=new Date(I.deliveryDate)-new Date(V.deliveryDate):E.field==="total"?H=parseFloat(I.total)-parseFloat(V.total):E.field==="name"&&(H=I.name.localeCompare(V.name)),E.direction==="asc"?H:-H})},xn=()=>{const w=o.length,I=o.reduce((st,qe)=>st+parseFloat(qe.total),0),V=o.filter(st=>st.status==="הושלם").length,H=o.filter(st=>st.status==="בתהליך").length,Ae=o.filter(st=>st.status==="חדש").length,Ur={};o.forEach(st=>{st.items.forEach(qe=>{Ur[qe.id]||(Ur[qe.id]={name:qe.name,quantity:0,total:0}),Ur[qe.id].quantity+=qe.quantity,Ur[qe.id].total+=Math.round(qe.price*qe.quantity)})});const mv=Object.values(Ur).sort((st,qe)=>qe.quantity-st.quantity).slice(0,5);return{totalOrders:w,totalIncome:I,completedOrders:V,inProcessOrders:H,newOrders:Ae,topProducts:mv}},hs=async w=>{w.preventDefault();try{let I={id:(a==null?void 0:a.id)||Date.now().toString(),...f,price:parseFloat(f.price)};const V=a?n.map(H=>H.id===a.id?I:H):[...n,I];Ka(V),r(V),u(null),v({name:"",description:"",price:"",image:"",categoryId:"",imagePublicId:""}),_("")}catch(I){console.error("Error submitting product:",I),alert("שגיאה בשמירת המוצר. אנא נסה שנית.")}},hl=w=>{w.preventDefault();const I={id:(h==null?void 0:h.id)||Date.now().toString(),name:f.name,description:f.description},V=h?i.map(H=>H.id===h.id?I:H):[...i,I];qa(V),s(V),d(null),v({name:"",description:"",price:"",image:"",categoryId:"",imagePublicId:""})},Fr=w=>{if(window.confirm("האם אתה בטוח שברצונך למחוק מוצר זה?")){const I=n.filter(V=>V.id!==w);Ka(I),r(I)}},zr=w=>{if(window.confirm("האם אתה בטוח שברצונך למחוק קטגוריה זו?")){const I=i.filter(V=>V.id!==w);qa(I),s(I)}},P=w=>{const I=w.image&&w.image.includes("cloudinary.com")?ES(w.image):"";u(w),v({name:w.name,description:w.description,price:w.price,image:w.image,categoryId:w.categoryId,imagePublicId:I}),_(w.image)},D=w=>{d(w),v({name:w.name,description:w.description,price:"",image:"",categoryId:"",imagePublicId:""})},L=w=>{const I=w.target.value;v({...f,image:I,imagePublicId:""}),_(I)},ne=()=>{CS(w=>{const I=w.secure_url,V=w.public_id;v({...f,image:I,imagePublicId:V}),_(I)})},W=xn();return c.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 bg-gray-50 min-h-screen",children:[c.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-700 rounded-xl shadow-lg p-6 mb-8",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("h2",{className:"text-3xl font-bold text-white",children:"לוח בקרה"}),c.jsxs("div",{className:"bg-white bg-opacity-20 rounded-lg px-4 py-2 text-white",children:[c.jsx("div",{className:"text-sm opacity-80",children:"היום"}),c.jsx("div",{className:"font-medium",children:new Date().toLocaleDateString("he-IL",{day:"numeric",month:"long",year:"numeric"})})]})]})}),j&&c.jsxs("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded-lg relative mb-6",role:"alert",children:[c.jsx("strong",{className:"font-bold",children:"שגיאת התחברות: "}),c.jsx("span",{className:"block sm:inline",children:j}),c.jsx("button",{className:"absolute top-0 bottom-0 right-0 px-4 py-3",onClick:()=>T(null),children:c.jsx("span",{className:"text-xl",children:"×"})})]}),c.jsx("div",{className:"mb-8",children:c.jsxs("nav",{className:"flex flex-wrap gap-2",children:[c.jsxs("button",{onClick:()=>e("products"),className:`px-5 py-3 rounded-lg font-medium transition-all duration-200 flex items-center ${t==="products"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"})}),"מוצרים"]}),c.jsxs("button",{onClick:()=>e("categories"),className:`px-5 py-3 rounded-lg font-medium transition-all duration-200 flex items-center ${t==="categories"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}),"קטגוריות"]}),c.jsxs("button",{onClick:()=>e("orders"),className:`px-5 py-3 rounded-lg font-medium transition-all duration-200 flex items-center ${t==="orders"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"הזמנות"]}),c.jsxs("button",{onClick:()=>e("summary"),className:`px-5 py-3 rounded-lg font-medium transition-all duration-200 flex items-center ${t==="summary"?"bg-blue-600 text-white shadow-md":"bg-white text-gray-600 hover:bg-gray-100 border border-gray-200"}`,children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 ml-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"סיכום"]})]})}),t==="products"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("form",{onSubmit:hs,className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:a?"עריכת מוצר":"הוספת מוצר חדש"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"שם המוצר"}),c.jsx("input",{type:"text",value:f.name,onChange:w=>v({...f,name:w.target.value}),required:!0,className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"מחיר"}),c.jsx("input",{type:"number",value:f.price,onChange:w=>v({...f,price:w.target.value}),required:!0,className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"תמונה"}),c.jsxs("div",{className:"flex flex-col space-y-2",children:[c.jsxs("div",{className:"flex space-x-2 space-x-reverse",children:[c.jsx("button",{type:"button",onClick:ne,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-md text-sm",children:"העלה תמונה"}),c.jsx("span",{className:"text-sm text-gray-500 my-auto",children:"או"}),c.jsx("input",{type:"url",value:f.image,onChange:L,className:"input-field flex-1",placeholder:"הזן URL של תמונה"})]}),y&&c.jsx("div",{className:"mt-2",children:c.jsx("img",{src:y,alt:"תצוגה מקדימה",className:"h-24 w-24 object-cover rounded-md border border-gray-300"})})]})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"קטגוריה"}),c.jsxs("select",{value:f.categoryId,onChange:w=>v({...f,categoryId:w.target.value}),required:!0,className:"input-field",children:[c.jsx("option",{value:"",children:"בחר קטגוריה"}),i.map(w=>c.jsx("option",{value:w.id,children:w.name},w.id))]})]}),c.jsxs("div",{className:"md:col-span-2",children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"תיאור"}),c.jsx("textarea",{value:f.description,onChange:w=>v({...f,description:w.target.value}),required:!0,rows:"3",className:"input-field"})]})]}),c.jsxs("div",{className:"mt-4 flex justify-end space-x-4 space-x-reverse",children:[a&&c.jsx("button",{type:"button",onClick:()=>{u(null),v({name:"",description:"",price:"",image:"",categoryId:"",imagePublicId:""}),_("")},className:"btn-secondary",children:"ביטול"}),c.jsx("button",{type:"submit",className:"btn-primary",children:a?"עדכן מוצר":"הוסף מוצר"})]})]}),c.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"שם"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"מחיר"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"קטגוריה"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"פעולות"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:n.map(w=>{var I;return c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("img",{src:w.image,alt:w.name,className:"h-10 w-10 rounded-full object-cover"}),c.jsxs("div",{className:"mr-4",children:[c.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.name}),c.jsx("div",{className:"text-sm text-gray-500",children:w.description})]})]})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["₪",w.price]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:(I=i.find(V=>V.id===w.categoryId))==null?void 0:I.name}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[c.jsx("button",{onClick:()=>P(w),className:"text-blue-600 hover:text-blue-900 ml-4",children:"ערוך"}),c.jsx("button",{onClick:()=>Fr(w.id),className:"text-red-600 hover:text-red-900",children:"מחק"})]})]},w.id)})})]})})]}),t==="categories"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("form",{onSubmit:hl,className:"bg-white p-6 rounded-lg shadow-md",children:[c.jsx("h3",{className:"text-lg font-semibold mb-4",children:h?"עריכת קטגוריה":"הוספת קטגוריה חדשה"}),c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"שם הקטגוריה"}),c.jsx("input",{type:"text",value:f.name,onChange:w=>v({...f,name:w.target.value}),required:!0,className:"input-field"})]}),c.jsxs("div",{children:[c.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"תיאור"}),c.jsx("input",{type:"text",value:f.description,onChange:w=>v({...f,description:w.target.value}),required:!0,className:"input-field"})]})]}),c.jsxs("div",{className:"mt-4 flex justify-end space-x-4 space-x-reverse",children:[h&&c.jsx("button",{type:"button",onClick:()=>{d(null),v({name:"",description:"",price:"",image:"",categoryId:"",imagePublicId:""})},className:"btn-secondary",children:"ביטול"}),c.jsx("button",{type:"submit",className:"btn-primary",children:h?"עדכן קטגוריה":"הוסף קטגוריה"})]})]}),c.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"שם"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"תיאור"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"פעולות"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:i.map(w=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.name})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsx("div",{className:"text-sm text-gray-500",children:w.description})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:[c.jsx("button",{onClick:()=>D(w),className:"text-blue-600 hover:text-blue-900 ml-4",children:"ערוך"}),c.jsx("button",{onClick:()=>zr(w.id),className:"text-red-600 hover:text-red-900",children:"מחק"})]})]},w.id))})]})})]}),t==="orders"&&c.jsxs("div",{className:"space-y-4",children:[c.jsxs("div",{className:"flex flex-wrap justify-between items-center gap-3",children:[c.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[c.jsxs("div",{className:"relative",children:[c.jsx("input",{type:"text",placeholder:"חיפוש לפי מספר הזמנה",value:C,onChange:w=>k(w.target.value),className:"border rounded-md px-4 py-2 text-sm w-48 focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),C&&c.jsx("button",{onClick:()=>k(""),className:"absolute right-2 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",children:"✕"})]}),c.jsxs("select",{value:p,onChange:w=>g(w.target.value),className:"border rounded-md px-3 py-2 text-sm",children:[c.jsx("option",{value:"all",children:"כל הסטטוסים"}),c.jsx("option",{value:"חדש",children:"חדש"}),c.jsx("option",{value:"בתהליך",children:"בתהליך"}),c.jsx("option",{value:"הושלם",children:"הושלם"})]})]}),c.jsxs("button",{onClick:()=>b(),className:"bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-md text-sm flex items-center",children:[c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"רענן נתונים"]})]}),c.jsx("div",{className:"bg-white rounded-lg shadow-md overflow-hidden",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{className:"bg-gray-50",children:c.jsxs("tr",{children:[c.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>A("id"),children:["מספר הזמנה",E.field==="id"&&c.jsx("span",{className:"mr-1",children:E.direction==="asc"?"↑":"↓"})]}),c.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>A("name"),children:["לקוח",E.field==="name"&&c.jsx("span",{className:"mr-1",children:E.direction==="asc"?"↑":"↓"})]}),c.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>A("date"),children:["תאריך משלוח",E.field==="date"&&c.jsx("span",{className:"mr-1",children:E.direction==="asc"?"↑":"↓"})]}),c.jsxs("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer",onClick:()=>A("total"),children:["סכום",E.field==="total"&&c.jsx("span",{className:"mr-1",children:E.direction==="asc"?"↑":"↓"})]}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"סטטוס"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"פעולות"})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:zt().length>0?zt().map(w=>c.jsxs("tr",{children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:w.id}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"text-sm text-gray-900",children:w.name}),c.jsx("div",{className:"text-sm text-gray-500",children:w.email})]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:[new Date(w.deliveryDate).toLocaleDateString("he-IL"),c.jsx("br",{}),w.deliveryTime]}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:["₪",Math.round(w.total)]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("select",{value:w.status,onChange:I=>te(w.id,I.target.value,w.firebaseKey),className:`px-2 py-1 text-xs leading-5 font-semibold rounded-full ${w.status==="חדש"?"bg-yellow-100 text-yellow-800":w.status==="בתהליך"?"bg-blue-100 text-blue-800":"bg-green-100 text-green-800"}`,children:[c.jsx("option",{value:"חדש",children:"חדש"}),c.jsx("option",{value:"בתהליך",children:"בתהליך"}),c.jsx("option",{value:"הושלם",children:"הושלם"})]})}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",children:c.jsx("button",{onClick:()=>We(w.id,w.firebaseKey),className:"text-red-600 hover:text-red-900 transition-colors duration-200",title:"מחק הזמנה",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})})]},w.id)):c.jsx("tr",{children:c.jsx("td",{colSpan:"6",className:"px-6 py-4 text-center text-sm text-gray-500",children:C?"לא נמצאו הזמנות התואמות את החיפוש":"אין הזמנות להצגה"})})})]})})]}),t==="summary"&&c.jsxs("div",{className:"space-y-8",children:[c.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[c.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 p-6 rounded-xl shadow-lg border border-blue-100 transform transition-all duration-300 hover:scale-105",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-indigo-800",children:"סיכום הזמנות"}),c.jsx("div",{className:"p-2 bg-white bg-opacity-80 rounded-full",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-indigo-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:'סה"כ הזמנות:'}),c.jsx("span",{className:"text-xl font-bold text-indigo-800",children:W.totalOrders})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:"הזמנות חדשות:"}),c.jsxs("div",{className:"flex items-center",children:[c.jsx("span",{className:"text-lg font-bold text-green-600",children:W.newOrders}),W.newOrders>0&&c.jsx("span",{className:"ml-2 px-2 py-1 bg-green-100 text-green-800 text-xs rounded-full",children:"חדש"})]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:"הזמנות בתהליך:"}),c.jsx("span",{className:"text-lg font-bold text-yellow-600",children:W.inProcessOrders})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:"הזמנות שהושלמו:"}),c.jsx("span",{className:"text-lg font-bold text-blue-600",children:W.completedOrders})]})]})]}),c.jsxs("div",{className:"bg-gradient-to-br from-emerald-50 to-teal-100 p-6 rounded-xl shadow-lg border border-emerald-100 transform transition-all duration-300 hover:scale-105",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-teal-800",children:"סיכום כספי"}),c.jsx("div",{className:"p-2 bg-white bg-opacity-80 rounded-full",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-teal-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:'סה"כ הכנסות:'}),c.jsxs("span",{className:"text-xl font-bold text-teal-800",children:["₪",Math.round(W.totalIncome)]})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:"ממוצע להזמנה:"}),c.jsxs("span",{className:"text-lg font-bold text-teal-700",children:["₪",W.totalOrders>0?Math.round(W.totalIncome/W.totalOrders):"0"]})]}),c.jsx("div",{className:"mt-4 pt-4 border-t border-teal-200",children:c.jsxs("div",{className:"text-center",children:[c.jsx("span",{className:"text-sm text-teal-700",children:"הכנסה חודשית משוערת"}),c.jsxs("div",{className:"text-2xl font-bold text-teal-800 mt-1",children:["₪",Math.round(W.totalIncome/(W.totalOrders?W.totalOrders:1)*30)]})]})})]})]}),c.jsxs("div",{className:"bg-gradient-to-br from-purple-50 to-fuchsia-100 p-6 rounded-xl shadow-lg border border-purple-100 transform transition-all duration-300 hover:scale-105",children:[c.jsxs("div",{className:"flex items-center justify-between mb-4",children:[c.jsx("h3",{className:"text-xl font-bold text-purple-800",children:"סטטיסטיקה"}),c.jsx("div",{className:"p-2 bg-white bg-opacity-80 rounded-full",children:c.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-purple-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:c.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})})]}),c.jsxs("div",{className:"space-y-3",children:[c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:"מספר מוצרים:"}),c.jsx("span",{className:"text-xl font-bold text-purple-800",children:n.length})]}),c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:"מספר קטגוריות:"}),c.jsx("span",{className:"text-xl font-bold text-purple-800",children:i.length})]}),c.jsx("div",{className:"mt-4 pt-4 border-t border-purple-200",children:c.jsxs("div",{className:"flex justify-between items-center",children:[c.jsx("span",{className:"text-gray-700",children:"יחס מוצרים לקטגוריה:"}),c.jsx("span",{className:"text-lg font-bold text-purple-700",children:i.length>0?(n.length/i.length).toFixed(1):"0"})]})})]})]})]}),c.jsxs("div",{className:"bg-white p-6 rounded-xl shadow-lg border border-gray-100",children:[c.jsxs("div",{className:"flex items-center justify-between mb-6",children:[c.jsx("h3",{className:"text-xl font-bold text-gray-800",children:"מוצרים מובילים"}),c.jsx("div",{className:"text-sm text-gray-500",children:"5 המוצרים הנמכרים ביותר"})]}),c.jsx("div",{className:"overflow-x-auto",children:c.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[c.jsx("thead",{children:c.jsxs("tr",{className:"bg-gray-50",children:[c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider rounded-tr-lg",children:"שם המוצר"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"כמות שנמכרה"}),c.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider rounded-tl-lg",children:'סה"כ הכנסות'})]})}),c.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:W.topProducts.map((w,I)=>c.jsxs("tr",{className:I%2===0?"bg-gray-50":"bg-white",children:[c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"flex items-center",children:[c.jsx("div",{className:"flex-shrink-0 h-8 w-8 bg-indigo-100 rounded-full flex items-center justify-center",children:c.jsx("span",{className:"text-indigo-600 font-bold",children:I+1})}),c.jsx("div",{className:"mr-4",children:c.jsx("div",{className:"text-sm font-medium text-gray-900",children:w.name})})]})}),c.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[c.jsx("div",{className:"text-sm text-gray-900 font-semibold",children:w.quantity}),c.jsx("div",{className:"text-xs text-gray-500",children:"יחידות"})]}),c.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c.jsxs("div",{className:"text-sm font-bold text-emerald-600",children:["₪",w.total]})})]},I))})]})})]})]})]})}function NS(){const[t,e]=x.useState(!1);return c.jsx(ox,{children:c.jsxs("div",{className:"min-h-screen flex flex-col",children:[c.jsx(ix,{isAdmin:t,setIsAdmin:e}),c.jsx("main",{className:"flex-grow container mx-auto px-4 py-8",children:c.jsxs(L0,{children:[c.jsx(Bt,{path:"/",element:c.jsx(yh,{})}),c.jsx(Bt,{path:"/products",element:c.jsx(lx,{})}),c.jsx(Bt,{path:"/cart",element:c.jsx(ax,{})}),c.jsx(Bt,{path:"/checkout",element:c.jsx(_S,{})}),c.jsx(Bt,{path:"/order-success",element:c.jsx(xS,{})}),c.jsx(Bt,{path:"/admin",element:t?c.jsx(SS,{}):c.jsx(yh,{})}),c.jsx(Bt,{path:"*",element:c.jsx(D0,{to:"/",replace:!0})})]})})]})})}gu.init("wdkhxkDvY1CBqWjhm");const kS=()=>{Jo().length===0&&qa([{id:"1",name:"פירות וירקות",description:"פירות וירקות טריים"},{id:"2",name:"מוצרי חלב",description:"חלב, גבינות ומוצרי חלב"},{id:"3",name:"לחם ומאפים",description:"לחם טרי ומאפים"},{id:"4",name:"משקאות",description:"מים, מיצים ומשקאות קלים"}]),Xo().length===0&&Ka([{id:"1",name:"תפוחים",description:"תפוחים טריים מהמטע",price:5.9,image:"https://images.unsplash.com/photo-1570913149827-d2ac84ab3f9a?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"1"},{id:"2",name:"בננות",description:"בננות טריות",price:4.9,image:"https://images.unsplash.com/photo-1571771894821-ce9b6c11b08e?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"1"},{id:"3",name:"חלב טרי",description:"חלב טרי 3% שומן",price:6.5,image:"https://images.unsplash.com/photo-1563636619-e9143da7973b?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"2"},{id:"4",name:"גבינה צהובה",description:"גבינה צהובה 28% שומן",price:12.9,image:"https://images.unsplash.com/photo-1486297678162-eb2a19b0a32d?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"2"},{id:"5",name:"לחם אחיד",description:"לחם אחיד פרוס",price:7.9,image:"https://images.unsplash.com/photo-1549931319-a545dcf3bc7c?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"3"},{id:"6",name:"לחמניות",description:"לחמניות טריות",price:9.9,image:"https://images.unsplash.com/photo-1589367920969-ab8e050bbb04?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"3"},{id:"7",name:"מים מינרלים",description:"מים מינרלים טבעיים",price:8.9,image:"https://images.unsplash.com/photo-1564419320461-6870880221ad?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"4"},{id:"8",name:"מיץ תפוזים",description:"מיץ תפוזים טבעי",price:10.9,image:"https://images.unsplash.com/photo-1600271886742-f049cd451bba?ixlib=rb-1.2.1&auto=format&fit=crop&w=800&q=80",categoryId:"4"}])};kS();Xl.createRoot(document.getElementById("root")).render(c.jsx(Sf.StrictMode,{children:c.jsx(V0,{children:c.jsx(NS,{})})}));
